(function(e){function t(t){for(var a,s,o=t[0],u=t[1],c=t[2],m=0,d=[];m<o.length;m++)s=o[m],i[s]&&d.push(i[s][0]),i[s]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);l&&l(t);while(d.length)d.shift()();return n.push.apply(n,c||[]),r()}function r(){for(var e,t=0;t<n.length;t++){for(var r=n[t],a=!0,o=1;o<r.length;o++){var u=r[o];0!==i[u]&&(a=!1)}a&&(n.splice(t--,1),e=s(s.s=r[0]))}return e}var a={},i={app:0},n=[];function s(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=a,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(r,a,function(t){return e[t]}.bind(null,a));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var l=u;n.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";var a=r("1356"),i=r.n(a);i.a},"084f":function(e,t,r){"use strict";var a=r("6a4c"),i=r.n(a);i.a},"08f9":function(e,t,r){"use strict";var a=r("1df0"),i=r.n(a);i.a},1106:function(e,t,r){"use strict";var a=r("5ef7"),i=r.n(a);i.a},"11a7":function(e,t,r){},1356:function(e,t,r){},"1aa7":function(e,t,r){},"1df0":function(e,t,r){},"1e18":function(e,t,r){},"207f":function(e,t,r){e.exports=r.p+"img/infoImage.c3fd4982.jpg"},"268c":function(e,t,r){e.exports=r.p+"img/zauberSchuleTemplate.4bff5803.jpg"},"2c77":function(e,t,r){"use strict";var a=r("ee03"),i=r.n(a);i.a},"355c":function(e,t,r){},"3eaf":function(e,t,r){e.exports=r.p+"img/ms1.0741a591.jpg"},"46b7":function(e,t,r){"use strict";var a=r("1aa7"),i=r.n(a);i.a},5044:function(e,t,r){"use strict";var a=r("c992"),i=r.n(a);i.a},5403:function(e,t,r){},5437:function(e,t,r){"use strict";var a=r("beb2"),i=r.n(a);i.a},"555a":function(e,t,r){e.exports=r.p+"img/icon.a3d99d53.png"},"56d7":function(e,t,r){"use strict";r.r(t);r("cadf"),r("551c"),r("097d");var a=r("2b0e"),i=(r("d1e7"),r("bb71"));r("da64");a["a"].use(i["a"],{iconfont:"md"});var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("v-app",[r("v-content",[r("v-container",{attrs:{"pl-0":"","pr-0":""}},[r("v-layout",{attrs:{"align-center":"","justify-center":""}},[r("v-flex",[r("div",{attrs:{id:"nav"}},[r("app-navbar",{attrs:{busyWorker:e.$store.getters["worker/busy"],busyInput:e.busyInput,workerReady:e.$store.getters["worker/ready"]}})],1),r("router-view")],1)],1)],1)],1),r("v-flex",[e._v("\n      Based on\n      "),r("font-awesome-icon",{attrs:{icon:["fab","github"]}}),r("a",{attrs:{href:e.link}},[e._v("latsic/imgalign")])],1)],1)],1)},s=[],o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-navigation-drawer",{attrs:{app:"","disable-resize-watcher":"",temporary:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[r("v-list",{attrs:{dense:""}},[e._l(e.navItems,function(t){return[r("v-list-tile",{key:t.title,attrs:{to:t.componentName?{name:t.componentName}:null,color:t.errorColor?t.errorColor:void 0},on:{click:function(r){e.itemClicked(t)}}},[r("v-list-tile-action",[t.isSvg?r("v-layout",[r("img",{attrs:{src:t.icon,alt:"logo",width:"20px"}})]):r("v-icon",[e._v("\n              "+e._s(t.icon)+"\n            ")])],1),r("v-list-tile-content",[r("v-list-tile-title",{domProps:{textContent:e._s(t.title)}})],1)],1),r("v-divider",{key:t.title+"_2"})]})],2)],1),r("v-toolbar",{attrs:{app:"",flat:"",dark:"",dense:""}},[e.$vuetify.breakpoint.xsOnly||e.$vuetify.breakpoint.smAndUp?r("v-toolbar-side-icon",{on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}):e._e(),e.$vuetify.breakpoint.smAndUp?r("v-toolbar-items",e._l(e.itemsLeft,function(t){return r("v-btn",{key:t.title,attrs:{flat:"",to:t.componentName?{name:t.componentName}:null},on:{click:function(r){e.itemClicked(t)}}},[e._v("\n        "+e._s(t.title)+"\n      ")])}),1):e._e(),e.$vuetify.breakpoint.smAndUp?[r("v-spacer"),e.$vuetify.breakpoint.mdAndUp?r("v-toolbar-title",{class:{"secondary--text":!e.nonNavRouteTitle}},[e._v("\n        "+e._s(e.nonNavRouteTitle?e.nonNavRouteTitle:e.appTitle)+"\n      ")]):r("v-toolbar-title",{class:{"secondary--text":!e.nonNavRouteTitle}},[e._v("\n        "+e._s(e.nonNavRouteTitle?e.nonNavRouteTitle:"")+"\n      ")]),r("v-spacer")]:e._e(),e.$vuetify.breakpoint.xsOnly?[r("v-toolbar-title",{staticClass:"title"},[e._v("\n        "+e._s(e.routeTitle)+"\n      ")])]:e._e(),e.$vuetify.breakpoint.smAndUp?r("v-toolbar-items",[e._l(e.itemsRight,function(t){return r("v-btn",{key:t.title,attrs:{flat:"",to:t.componentName?{name:t.componentName}:null,color:t.errorColor?t.errorColor:void 0},on:{click:function(r){e.itemClicked(t)}}},[e._v("\n        "+e._s(t.title)+"\n      ")])}),e.busy?r("v-layout",{attrs:{"align-center":""}},[r("app-spinner",{attrs:{color:e.busyColor}})],1):r("v-layout",{attrs:{"justify-end":"","align-center":""}},[r("img",{attrs:{src:e.logo,alt:"logo",width:"30px"}})])],2):e._e(),e.$vuetify.breakpoint.xsOnly?[r("v-spacer"),r("v-toolbar-items",[e.busy?r("v-layout",{attrs:{"align-center":""}},[r("app-spinner",{attrs:{color:e.busyColor}})],1):r("v-layout",{attrs:{"align-center":""}},[r("img",{attrs:{src:e.logo,alt:"logo",width:"30px"}})])],1)]:e._e()],2)],1)},u=[],c=r("bd86"),l=(r("7514"),r("7f7f"),r("5d73")),m=r.n(l),d=r("75fc"),p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"sk-fading-circle",style:e.cssProps},[r("div",{staticClass:"sk-circle1 sk-circle"}),r("div",{staticClass:"sk-circle2 sk-circle"}),r("div",{staticClass:"sk-circle3 sk-circle"}),r("div",{staticClass:"sk-circle4 sk-circle"}),r("div",{staticClass:"sk-circle5 sk-circle"}),r("div",{staticClass:"sk-circle6 sk-circle"}),r("div",{staticClass:"sk-circle7 sk-circle"}),r("div",{staticClass:"sk-circle8 sk-circle"}),r("div",{staticClass:"sk-circle9 sk-circle"}),r("div",{staticClass:"sk-circle10 sk-circle"}),r("div",{staticClass:"sk-circle11 sk-circle"}),r("div",{staticClass:"sk-circle12 sk-circle"})])},g=[],h={props:{color:{type:String,default:"#333"}},computed:{cssProps:function(){return{"--bg-color":this.color}}}},f=h,y=(r("7a39"),r("2877")),v=Object(y["a"])(f,p,g,!1,null,"a8f1c520",null);v.options.__file="Spinner.vue";var b=v.exports,w=r("555a"),I=r.n(w),_={components:{AppSpinner:b},props:{busyWorker:{type:Boolean,default:!1},workerReady:{type:Boolean,default:!0},busyInput:{type:Boolean,default:!1}},data:function(){return{drawer:!1,appTitle:""}},computed:{itemsLeft:function(){return[{title:"MultiStitcher",componentName:"multistitcher",func:null,icon:"burst_mode"}]},itemsRight:function(){return[]},nonNavItems:function(){return[]},navItems:function(){return[].concat(Object(d["a"])(this.itemsLeft),Object(d["a"])(this.itemsRight),Object(d["a"])(this.itemsXsOnly))},itemsXsOnly:function(){return[{title:"Info",componentName:"info",func:null,icon:"info"},{title:"Global settings",componentName:"settings",func:null,icon:"settings"},{title:"Log",componentName:"logoutput",func:null,icon:"reorder"}]},allItems:function(){return[].concat(Object(d["a"])(this.itemsXsOnly),Object(d["a"])(this.itemsLeft),Object(d["a"])(this.itemsRight),Object(d["a"])(this.nonNavItems))},routeTitle:function(){var e=!0,t=!1,r=void 0;try{for(var a,i=m()(this.allItems);!(e=(a=i.next()).done);e=!0){var n=a.value;if(n.componentName==this.$route.name)return n.title}}catch(s){t=!0,r=s}finally{try{e||null==i.return||i.return()}finally{if(t)throw r}}return""},nonNavRouteTitle:function(){var e=!0,t=!1,r=void 0;try{for(var a,i=m()(this.nonNavItems);!(e=(a=i.next()).done);e=!0){var n=a.value;if(n.componentName==this.$route.name&&n.title)return n.title}}catch(s){t=!0,r=s}finally{try{e||null==i.return||i.return()}finally{if(t)throw r}}return null},relatedItems:function(){var e;return e={},Object(c["a"])(e,"matcher",this.allItems.find(function(e){return"settings"==e.componentName})),Object(c["a"])(e,"settings",this.allItems.find(function(e){return"matcher"==e.componentName})),e},busy:function(){return this.busyWorker||this.busyInput},busyColor:function(){return this.busyWorker||!this.workerReady?this.$vuetify.theme.accent:this.$vuetify.theme.error},logo:function(){return I.a}},methods:{itemClicked:function(e){e.func&&e.func()},relatedItem:function(e){return this.relatedItems[e]}}},x=_,k=r("6544"),S=r.n(k),D=r("8336"),T=r("ce7e6"),O=r("132d"),V=r("a722"),A=r("8860"),C=r("ba95"),R=r("40fe"),j=r("5d23"),$=r("f774"),P=r("9910"),F=r("71d9"),N=r("2a7f"),M=r("706c"),E=Object(y["a"])(x,o,u,!1,null,"c5608228",null);E.options.__file="Navbar.vue";var B=E.exports;S()(E,{VBtn:D["a"],VDivider:T["a"],VIcon:O["a"],VLayout:V["a"],VList:A["a"],VListTile:C["a"],VListTileAction:R["a"],VListTileContent:j["a"],VListTileTitle:j["b"],VNavigationDrawer:$["a"],VSpacer:P["a"],VToolbar:F["a"],VToolbarItems:N["a"],VToolbarSideIcon:M["a"],VToolbarTitle:N["b"]});r("a481"),r("f559");var L=r("d225"),q=r("b0b4"),U=r("67bb"),z=r.n(U),W=z()(),K=z()(),G=function(){function e(t){if(Object(L["a"])(this,e),t!=K)throw"Cannot construct Singleton!";this._infoOn=function(){return!0},this._errorOn=function(){return!0},this._assertOn=function(){return!0},this._externOn=function(){return!0},this._consoleStdLog=console.log,this._consoleStdInfo=console.info,this._consoleStdError=console.error,this._consoleStdAssert=console.assert,console.log=this.log.bind(this),console.info=this.info.bind(this),console.error=this.error.bind(this),console.assert=this.assert.bind(this)}return Object(q["a"])(e,[{key:"log",value:function(){if(this._userInfoFn){var e=this.userInfo.apply(this,arguments);e&&this._userInfoFn(e)}if(this._otherLogErrorFn&&this._errorOn()){var t=this.externErrorMessage.apply(this,arguments);t&&this.logOtherError(t)}this._externOn()&&this.isExtern.apply(this,arguments)?(this._consoleStdLog.apply(this,arguments),this.logOther.apply(this,arguments)):this._infoOn()&&(this._consoleStdLog.apply(this,arguments),this.logOther.apply(this,arguments))}},{key:"error",value:function(){this._errorOn()&&(!this._externOn()&&this.isExtern.apply(this,arguments)||(this._consoleStdError.apply(this,arguments),this.logOtherError.apply(this,arguments)))}},{key:"assert",value:function(){this._assertOn()&&(!this._externOn()&&this.isExtern.apply(this,arguments)||(this._consoleStdAssert.apply(this,arguments),this.logOther.apply(this,arguments)))}},{key:"info",value:function(){this._externOn()&&this.isExtern.apply(this,arguments)?(this._consoleStdInfo.apply(this,arguments),this.logOther.apply(this,arguments)):this._infoOn()&&(this._consoleStdInfo.apply(this,arguments),this.logOther.apply(this,arguments))}},{key:"isExtern",value:function(){return arguments.length>0&&"opencv"==arguments[0]}},{key:"userInfo",value:function(){if(0==arguments.length)return null;for(var e="",t=0;t<arguments.length;++t)e?e+=" "+arguments[t]:"string"==typeof arguments[t]&&arguments[t].startsWith("user-info ")&&(e=arguments[t].replace("user-info ",""));return e}},{key:"externErrorMessage",value:function(){if(0==arguments.length)return null;for(var e="",t=0;t<arguments.length;++t)e?e+=" "+arguments[t]:"string"==typeof arguments[t]&&arguments[t].startsWith("user-error ")&&(e=arguments[t].replace("user-error ",""));return e}},{key:"logOther",value:function(){if(this._otherLogFn){var e="",t=!0,r=!1,a=void 0;try{for(var i,n=m()(arguments);!(t=(i=n.next()).done);t=!0){var s=i.value;e+=s+" "}}catch(o){r=!0,a=o}finally{try{t||null==n.return||n.return()}finally{if(r)throw a}}this._otherLogFn(e)}}},{key:"logOtherError",value:function(){if(this._otherLogErrorFn){var e="",t=!0,r=!1,a=void 0;try{for(var i,n=m()(arguments);!(t=(i=n.next()).done);t=!0){var s=i.value;e+=s+" "}}catch(o){r=!0,a=o}finally{try{t||null==n.return||n.return()}finally{if(r)throw a}}this._otherLogErrorFn(e)}}}],[{key:"init",value:function(t,r,a,i,n,s,o){this[W]||(this[W]=new e(K)),this[W]._infoOn=t,this[W]._errorOn=r,this[W]._assertOn=a,this[W]._externOn=i,this[W]._otherLogFn=n,this[W]._otherLogErrorFn=s,this[W]._userInfoFn=o}}]),e}(),Y=r("a4bb"),H=r.n(Y),X=r("15b8"),J=r.n(X),Z=J()({other:{id:1001,name:"Other"},sift:{id:1002,name:"Sift"},surf:{id:1003,name:"Surf"},orb:{id:1004,name:"Orb"},brisk:{id:1005,name:"Brisk"},kaze:{id:1006,name:"Kaze"},akaze:{id:1007,name:"Akaze"},basic:{id:1008,name:"Basic"},compare:{id:1009,name:"Compare"},matchFilter:{id:1010,name:"Match Filter"},logging:{id:1011,name:"Logging"},stitching:{id:1012,name:"Stitching"},stitcherCommon:{id:1013,name:"Common"},stitcherOrientation:{id:1014,name:"Orientation"},stitcherProjection:{id:1015,name:"Projection"},multiStitcher:{id:1016,name:"Multi Stitcher"},multiStitcherCamera:{id:1017,name:"Camera"},multiStitcherSeams:{id:1018,name:"Seams"},multiStitcherImage:{id:1019,name:"Image"},multiStitcherStitchOrder:{id:1020,name:"Experimental"},multiStitcherMemory:{id:1021,name:"Memory"},multiStitcherConfidence:{id:1022,name:"Confidence"},main:{id:1023,name:"Main"},imageInput:{id:1024,name:"Image Input"}}),Q=200,ee=201,te=202,re=203,ae=301,ie=302,ne=303,se=304,oe=305,ue=583,ce=591,le=577,me=610,de=810,pe=J()({imageCapInput:{id:11,name:"Input images image cap",groupId:Z.imageInput.id},imageCap:{id:10,name:"Image cap for detector",groupId:Z.imageInput.id},openCvType:{id:de,name:"OpenCV type",groupId:Z.main.id},openCvType_fast:{id:811,name:"Fast",groupId:de},openCvType_small:{id:812,name:"Small",groupId:de},sift_featuresN:{id:20,name:"Max feature count",groupId:Z.sift.id},sift_octaveLayersN:{id:21,name:"Number of octave layers",groupId:Z.sift.id},sift_contrastThresh:{id:22,name:"Contrast threshold",groupId:Z.sift.id},sift_edgeThresh:{id:23,name:"Edge threshold",groupId:Z.sift.id},sift_sigma:{id:24,name:"Sigma",groupId:Z.sift.id},surf_hessianThresh:{id:30,name:"Hessian threshold",groupId:Z.surf.id},surf_octavesN:{id:31,name:"Number of octaves",groupId:Z.surf.id},surf_octaveLayersN:{id:32,name:"Number of octave layers",groupId:Z.surf.id},surf_extended:{id:33,name:"64/128 bit descriptor",groupId:Z.surf.id},orb_featuresN:{id:40,name:"Max feature count",groupId:Z.orb.id},orb_scale:{id:41,name:"Scale",groupId:Z.orb.id},orb_levelsN:{id:42,name:"Number of levels",groupId:Z.orb.id},orb_edgeThresh:{id:43,name:"Edge threshold",groupId:Z.orb.id},orb_patchSize:{id:44,name:"Patch size",groupId:Z.orb.id},brisk_thresh:{id:50,name:"Threshold",groupId:Z.brisk.id},brisk_octavesN:{id:51,name:"Number of octaves",groupId:Z.brisk.id},brisk_patternScale:{id:52,name:"Pattern scale",groupId:Z.brisk.id},kaze_thresh:{id:53,name:"Threshold",groupId:Z.kaze.id},kaze_octavesN:{id:54,name:"Number of octaves",groupId:Z.kaze.id},kaze_octaveLayersN:{id:55,name:"Number of octave layers",groupId:Z.kaze.id},akaze_thresh:{id:56,name:"Threshold",groupId:Z.akaze.id},akaze_octavesN:{id:57,name:"Number of octaves",groupId:Z.akaze.id},akaze_octaveLayersN:{id:58,name:"Number of octave layers",groupId:Z.akaze.id},detType_sift:{id:60,name:"Sift",groupId:Q},detType_surf:{id:61,name:"Surf",groupId:Q},detType_orb:{id:62,name:"Orb",groupId:Q},detType_brisk:{id:63,name:"Brisk",groupId:Q},detType_kaze:{id:64,name:"Kaze",groupId:Q},detType_akaze:{id:65,name:"Akaze",groupId:Q},desType_sift:{id:80,name:"Sift",groupId:ee},desType_surf:{id:81,name:"Surf",groupId:ee},desType_orb:{id:82,name:"Orb",groupId:ee},desType_brisk:{id:83,name:"Brisk",groupId:ee},desType_freak:{id:84,name:"Freak",groupId:ee},desType_kaze:{id:85,name:"Kaze",groupId:ee},desType_akaze:{id:86,name:"Akaze",groupId:ee},matcherType_flann:{id:100,name:"Flann",groupId:te},matcherType_bfhamming:{id:101,name:"Brute force hamming",groupId:te},matcherType_bfhamming2:{id:102,name:"Brute force hamming 2",groupId:te},matcherType_auto:{id:103,name:"Auto",groupId:te},transformFinderType_ransac:{id:120,name:"Ransac",groupId:re},transformFinderType_rho:{id:121,name:"Rho",groupId:re},transformFinderType_lmeds:{id:122,name:"Lmeds",groupId:re},detType:{id:Q,name:"Detector",groupId:Z.basic.id},desType:{id:ee,name:"Descriptor",groupId:Z.basic.id},matcherType:{id:te,name:"Matcher",groupId:Z.basic.id},transformFinderType:{id:re,name:"Transform finder",groupId:Z.basic.id},compareDetTypes:{id:ae,name:"Choose detectors",groupId:Z.compare.id},compareImageType:{id:ie,name:"Choose image",groupId:Z.compare.id},imageFirst:{id:130,name:"First image",groupId:ie},imageSecond:{id:131,name:"Second image",groupId:ie},matchFilterSpreadAuto:{id:140,name:"Spread factor automatic",groupId:Z.matchFilter.id},matchFilterSpreadFactor:{id:141,name:"Spread factor",groupId:Z.matchFilter.id,disabledIfId:140},matchFilterMinMatchesToRetain:{id:142,name:"Min match count",groupId:Z.matchFilter.id},matchFilterMaxMatchesToRetain:{id:143,name:"Max match count",groupId:Z.matchFilter.id},floodFillTolerance:{id:150,name:"Flood fill tolerance",groupId:Z.other.id},alignSelectionOverlay:{id:151,name:"Overlay selection",groupId:Z.other.id},logInfoEnabled:{id:152,name:"Verbose logging",groupId:Z.logging.id},logErrorEnabled:{id:153,name:"Log errors",groupId:Z.logging.id},logAssertEnabled:{id:154,name:"Log assertions",groupId:Z.logging.id},logExternEnabled:{id:155,name:"Log extern messages",groupId:Z.logging.id},stitch_projection:{id:ne,name:"Surface projection 1",groupId:Z.stitcherProjection.id},stitch_projection2:{id:se,name:"Surface projection 2",groupId:Z.stitcherProjection.id},stitch_seamBlend:{id:501,name:"Seam blend",groupId:Z.stitcherCommon.id},stitch_colorTransfer:{id:502,name:"Color transfer",groupId:Z.stitcherCommon.id},stitch_fieldOfView1:{id:511,name:"Field of view 1",groupId:Z.stitcherOrientation.id},stitch_yaw1:{id:513,name:"Yaw 1",groupId:Z.stitcherOrientation.id},stitch_pitch1:{id:514,name:"Pitch 1",groupId:Z.stitcherOrientation.id},stitch_fieldOfView2:{id:521,name:"Field of view 2",groupId:Z.stitcherOrientation.id},stitch_yaw2:{id:523,name:"Yaw 2",groupId:Z.stitcherOrientation.id},stitch_pitch2:{id:524,name:"Pitch 2",groupId:Z.stitcherOrientation.id},stitch_yaw2Auto:{id:525,name:"Yaw 2 auto",groupId:null},stitch_pitch2Auto:{id:526,name:"Pitch 2 auto",groupId:null},stitch_projectionTypeNone:{id:561,name:"None",groupId:ne,groupId2:se,groupId3:oe},stitch_projectionTypeSpherical:{id:553,name:"Spherical",groupId:ne,groupId2:se,groupId3:oe},stitch_projectionTypeCylindrical:{id:552,name:"Cylindrical",groupId:ne,groupId2:se,groupId3:oe},stitch_projectionTypeMercator:{id:559,name:"Mercator ",groupId:ne,groupId2:se,groupId3:oe},stitch_projectionTypeTransverseMercator:{id:560,name:"Transverse Mercator",groupId:ne,groupId2:se,groupId3:oe},stitch_projectionTypeFisheye:{id:554,name:"Fisheye",groupId:ne,groupId2:se,groupId3:oe},stitch_projectionTypePlane:{id:550,name:"Plane",groupId:ne,groupId2:se,groupId3:oe},stitch_projectionTypeAffine:{id:551,name:"Affine",groupId:ne,groupId2:se,groupId3:oe},stitch_projectionTypeStereographic:{id:555,name:"Stereographic",groupId:ne,groupId2:se,groupId3:oe},stitch_projectionTypeRectilinear:{id:556,name:"Rectilinear",groupId:ne,groupId2:se,groupId3:oe},stitch_projectionTypeRectilinearPortrait:{id:557,name:"Rectilinear portrait",groupId:ne,groupId2:se,groupId3:oe},stitch_projectionTypePanini:{id:558,name:"Panini",groupId:ne,groupId2:se,groupId3:oe},stitch_projectionTypeRectilinearA2B1:{id:562,name:"Rectilinear A2B1",groupId:ne,groupId2:se,groupId3:oe},stitch_projectionTypeRectilinearPortraitA2B1:{id:563,name:"Rectilinear p. A2B1",groupId:ne,groupId2:se,groupId3:oe},stitch_projectionTypePaniniA2B1:{id:564,name:"Panini A2B1",groupId:ne,groupId2:se,groupId3:oe},stitch_projectionTypePaniniPortraitA2B1:{id:565,name:"Panini portrait A2B1",groupId:ne,groupId2:se,groupId3:oe},bat_none:{id:701,name:"None",groupId:ue},bat_ray:{id:702,name:"Ray",groupId:ue},bat_rayBlacklist:{id:703,name:"Ray blacklist",groupId:ue},bat_rayConfidenceStep:{id:704,name:"Ray step confidence",groupId:ue},bat_rayMinTiles:{id:705,name:"Ray min. tiles",groupId:ue},bat_reproj:{id:706,name:"Reprojection",groupId:ue},bat_reprojCap200:{id:707,name:"Reproj. cap 200",groupId:ue},bat_reprojMinTiles:{id:708,name:"Reproj. min. tiles",groupId:ue},bat_reprojNoCam:{id:709,name:"Reproj. nce",groupId:ue},bat_reprojNoCamCap200:{id:710,name:"Reproj. nce 200",groupId:ue},waveCorrectionType_A:{id:611,name:"Auto",groupId:me},waveCorrectionType_N:{id:612,name:"None",groupId:me},waveCorrectionType_H:{id:613,name:"Horizontal",groupId:me},waveCorrectionType_V:{id:614,name:"Vertical",groupId:me},blendType_none:{id:574,name:"None",groupId:ce},blendType_multiBand:{id:575,name:"Multiband",groupId:ce},blendType_feather:{id:576,name:"Feather",groupId:ce},seamFinderType_Vornoi:{id:578,name:"Vornoi",groupId:le},seamFinderType_Graphcut:{id:579,name:"Graphcut (slow)",groupId:le},multiStitch_projectionType:{id:oe,name:"Surface projection",groupId:Z.multiStitcherCamera.id},multiStitch_bundleAdjust:{id:ue,name:"Bundle adjustement type",groupId:Z.multiStitcherCamera.id},multiStitch_waveCorrection:{id:me,name:"Wave correction",groupId:Z.multiStitcherCamera.id},multiStitch_camEstimate:{id:582,name:"Cam estimation",groupId:Z.multiStitcherCamera.id},multiStitch_maxRectangle:{id:603,name:"Crop to max rect",groupId:Z.multiStitcherImage.id},multiStitch_exposureCompensator:{id:590,name:"Exp compens. (slow)",groupId:Z.multiStitcherImage.id},multiStitch_colorTransfer:{id:586,name:"Color transfer",groupId:Z.multiStitcherImage.id},multiStitch_seamBlend:{id:585,name:"Seam blend",groupId:Z.multiStitcherSeams.id},multiStitch_blendStrength:{id:592,name:"Blend strength",groupId:Z.multiStitcherSeams.id,enabledIfId:585},multiStitch_seamFinderType:{id:le,name:"Seam finder",groupId:Z.multiStitcherSeams.id},multiStitch_warpFirst:{id:580,name:"Warp first",groupId:Z.multiStitcherStitchOrder.id},multiStitch_calcCenterImage:{id:588,name:"Estimate start image",groupId:Z.multiStitcherStitchOrder.id,enabledIfId:580},multiStitch_rectifyPerspective:{id:581,name:"Rectify perspective",groupId:Z.multiStitcherStitchOrder.id},multiStitch_rectifyStretch:{id:593,name:"Rectify stretch",groupId:Z.multiStitcherStitchOrder.id,enabledIfId:581},multiStitch_confidenceThresh:{id:589,name:"Thresh stitching",groupId:Z.multiStitcherConfidence.id},multiStitch_inputImagesMatchReach:{id:720,name:"Image match reach",groupId:Z.multiStitcherConfidence.id},multiStitch_preserveAlphaChannelValue:{id:600,name:"Preserve Alpha Channel",groupId:Z.multiStitcherMemory.id},multiStitch_disposeInputImages:{id:598,name:"Dispose input before stitching",groupId:Z.multiStitcherMemory.id},multiStitch_limitResultPreview:{id:596,name:"Max result view size",groupId:Z.multiStitcherMemory.id},multiStitch_limitInputView:{id:597,name:"Max input view size",groupId:Z.multiStitcherMemory.id},multiStitch_limitLiveStitchingPreview:{id:599,name:"Max temp result size",groupId:Z.multiStitcherMemory.id},multiStitch_liveUpdateCycle:{id:601,name:"Live update cycle",groupId:Z.multiStitcherMemory.id}}),ge=J()([{id:pe.sift_featuresN.id,text:"The number of best features to retain (may include location duplicates). The features are ranked by their scores (measured in SIFT algorithm as the local contrast). Value 0 => Automatic."},{id:pe.sift_octaveLayersN.id,text:"The number of layers in each octave. 3 is the value used in D. Lowe paper. The number of octaves is computed automatically from the image resolution."},{id:pe.sift_contrastThresh.id,text:"The contrast threshold used to filter out weak features in semi-uniform (low-contrast) regions. The larger the threshold, the less features are produced by the detector."},{id:pe.sift_edgeThresh.id,text:"The threshold used to filter out edge-like features. Note that the its meaning is different from the contrastThreshold, i.e. the larger the edgeThreshold, the less features are filtered out (more features are retained)."},{id:pe.sift_sigma.id,text:"The sigma of the Gaussian applied to the input image at the octave. If your image is captured with a weak camera with soft lenses, you might want to reduce the number."},{id:pe.surf_hessianThresh.id,text:"Threshold for hessian keypoint detector."},{id:pe.surf_octavesN.id,text:"Number of pyramid octaves the keypoint detector will use."},{id:pe.surf_octaveLayersN.id,text:"Number of octave layers within each octave."},{id:pe.surf_extended.id,text:"On - use extended 128-element descriptors, off - use 64-element descriptors."},{id:pe.orb_featuresN.id,text:"The maximum number of features to retain."},{id:pe.orb_scale.id,text:"Pyramid decimation ratio, greater than 1. scaleFactor==2 means the classical pyramid, where each next level has 4x less pixels than the previous, but such a big scale factor will degrade feature matching scores dramatically. On the other hand, too close to 1 scale factor will mean that to cover certain scale range you will need more pyramid levels and so the speed will suffer."},{id:pe.orb_levelsN.id,text:"The number of pyramid levels."},{id:pe.orb_edgeThresh.id,text:"This is size of the border where the features are not detected. It should NaN"},{id:pe.orb_patchSize.id,text:"size of the patch used by the oriented BRIEF descriptor. Of course, on smaller pyramid layers the perceived image area covered by a feature will be larger."},{id:pe.brisk_thresh.id,text:"AGAST detection threshold score."},{id:pe.brisk_octavesN.id,text:"Detection octaves. Use 0 to do single scale."},{id:pe.brisk_patternScale.id,text:"Apply this scale to the pattern used for sampling the neighbourhood of a keypoint."},{id:pe.kaze_thresh.id,text:"Detector response threshold to accept point."},{id:pe.kaze_octavesN.id,text:"Maximum octave evolution of the image."},{id:pe.kaze_octaveLayersN.id,text:"Default number of sublevels per scale level."},{id:pe.akaze_thresh.id,text:"Detector response threshold to accept point."},{id:pe.akaze_octavesN.id,text:"Maximum octave evolution of the image."},{id:pe.akaze_octaveLayersN.id,text:"Default number of sublevels per scale level."},{id:pe.matchFilterSpreadAuto.id,text:"If enabled, the spread factor will be chosen automatically."},{id:pe.matchFilterSpreadFactor.id,text:"When two detected features are compared, a match distance is calculated. The larger this distance, the less similar the features are. The spread factor is a value to influence how large the distance between two features can be, while the features are still considered to be a good match."},{id:pe.matchFilterMinMatchesToRetain.id,text:"The minimum number of matches to retain (if possible). These matches are then used to align the image to the template image (calculation of the homography matrix)."},{id:pe.matchFilterMaxMatchesToRetain.id,text:"The maximum number of matches to retain. These matches are then used to align the image to the template image (calculation of the homography matrix)."},{id:pe.floodFillTolerance.id,text:"Tolerance value for the flood fill algorithm. After matching two images,  and selecting one or multiple points in an input image, a flood fill image  can be calculated via the select menu."},{id:pe.alignSelectionOverlay.id,text:"Overlay the aligned selection onto the template image."},{id:pe.logInfoEnabled.id,text:"Enabled or disable verbose console logging."},{id:pe.logErrorEnabled.id,text:"Enabled or disable logging of errors."},{id:pe.logAssertEnabled.id,text:"Enabled or disable logging of assertions."},{id:pe.logExternEnabled.id,text:"Enabled or disable logging of extern messages."},{id:pe.imageCap.id,text:"The maxium number of pixels for feature detection. If an image is larger it will be resized before the feature detection runs. This has an impact on the amount of time feature detection consumes."},{id:pe.imageCapInput.id,text:"The maxium size of input images in pixels"},{id:pe.stitch_projection.id,text:"Surface projection for template image."},{id:pe.stitch_projection2.id,text:"Surface projection for image to align."},{id:pe.stitch_seamBlend.id,text:"Blend seam between images."},{id:pe.stitch_colorTransfer.id,text:"Try to adjust the colors of the image to align to the colors of the templte image. Does not work for black and white images."},{id:pe.stitch_fieldOfView1.id,text:"Field of view in the degrees of the template image. Leave empty to use default value or data from image meta data if available."},{id:pe.stitch_yaw1.id,text:"Horizontal orientation of template image in degrees. Leave empty to use default value."},{id:pe.stitch_pitch1.id,text:"Vertical orientation of template image in degrees. Leave empty to use default value."},{id:pe.stitch_fieldOfView2.id,text:"Field of view in the degrees of the image to align. Leave empty to use default value or data from image meta data if available."},{id:pe.stitch_yaw2.id,text:"Horizontal orientation of the image to align in degrees. Leave empty to use default value."},{id:pe.stitch_pitch2.id,text:"Vertical orientation of the image to align in degrees. Leave empty to use default value."},{id:pe.stitch_yaw2Auto.id,text:"Unused."},{id:pe.stitch_pitch2Auto.id,text:"Unused."},{id:pe.multiStitch_projectionType.id,text:"Surface projection."},{id:pe.multiStitch_bundleAdjust.id,text:"Bundle adjustement type. Automatically refines initial camera parameters."},{id:pe.multiStitch_camEstimate.id,text:"Tries to guess camera paramters (focal length and rotation)Rotation parameters are only used if bundle adjustement is enabled."},{id:pe.multiStitch_waveCorrection.id,text:"Tries to straighten a curved panorama/horizon."},{id:pe.multiStitch_colorTransfer.id,text:"Tries to adjust the colors of the images with the purpose that all images have the same color tone. The first image in the stitching pipeline is used as template. This usually does not work with with black and white images."},{id:pe.multiStitch_calcCenterImage.id,text:"Calculate a center image and start stitching from there."},{id:pe.multiStitch_confidenceThresh.id,text:"When calculating a mapping between two images, a confidence value indicates how good the mapping is. Mappings with a confidence value lower than this value are dismissed."},{id:pe.multiStitch_limitResultPreview.id,text:'To save memory, the display stitched result image may be shown only in a reduced resolution. The full resolution image can still be saved via the "save image button".'},{id:pe.multiStitch_limitInputView.id,text:"To save memory, the displayed input images may be resized and displayed with a lower resolution. This has no influence on the final stitching result."},{id:pe.multiStitch_disposeInputImages.id,text:"To save memory, before the stitching process is started, all input images are disposed and only a small preview is kept. This has no influence on the final stitching result. If the stitching process is restarted with the same images though, the images will have to be reloaded (this is done automatically)."},{id:pe.multiStitch_limitLiveStitchingPreview.id,text:"To save memory and increase performance, the preview during stitching can be reduces in size.This has no influence on the final stitching result."},{id:pe.multiStitch_preserveAlphaChannelValue.id,text:"To save memory while blending, preserving of alpha channel values can be disabled.The final stitching result is only influeces if images containing non opaque areas are stitched together."},{id:pe.multiStitch_inputImagesMatchReach.id,text:"Considers the order of input images. Two images are only considered for a match if the index distance is lower or equal than this value. A value of 0 is interpreted as infinite value. Example: The input image at position 3 and the input images at position 7 have an index distance of 4."}]),he=function(){function e(){Object(L["a"])(this,e)}return Object(q["a"])(e,null,[{key:"_getParam",value:function(e){var t=H()(pe).find(function(t){return pe[t].id==e});if(!t)throw new Error("No param with id ".concat(e," exists"));return pe[t]}},{key:"getParamName",value:function(e){return this._getParam(e).name}},{key:"getParamGroupId",value:function(e){return this._getParam(e).groupId}},{key:"getParamText",value:function(e){var t=ge.find(function(t){return t.id==e});return t?t.text:""}},{key:"getParamEnabledIfId",value:function(e){var t=this._getParam(e);return t&&t.enabledIfId?t.enabledIfId:null}},{key:"getParamDisabledIfId",value:function(e){var t=this._getParam(e);return t&&t.disabledIfId?t.disabledIfId:null}}]),e}(),fe=J()({discrete:1,multiple:2,range:3,rangeSquareRoot:4,number:5,bool:6,numberAuto:7}),ye={components:{appNavbar:B},data:function(){return{link:"https://github.com/latsic/imgalign"}},created:function(){var e=this;this.$store.dispatch("settings/init"),G.init(function(){return e.$store.getters["settings/param"](pe.logInfoEnabled.id)},function(){return e.$store.getters["settings/param"](pe.logErrorEnabled.id)},function(){return e.$store.getters["settings/param"](pe.logAssertEnabled.id)},function(){return e.$store.getters["settings/param"](pe.logExternEnabled.id)},function(t){return e.$store.commit("logs/addMessage",t)},function(t){return e.$store.commit("logs/addErrorMessage",t)},function(t){return e.$store.commit("worker/currentActionInfo",t)})},computed:{busyInput:function(){return this.$store.getters["input/busyAny"]||this.$store.getters["multiInput/busy"]||this.$store.getters["multiInput/busyLoading"]}}},ve=ye,be=(r("034f"),r("7496")),we=r("a523"),Ie=r("549c"),_e=r("0e8f"),xe=Object(y["a"])(ve,n,s,!1,null,null,null);xe.options.__file="App.vue";var ke=xe.exports;S()(xe,{VApp:be["a"],VContainer:we["a"],VContent:Ie["a"],VFlex:_e["a"],VLayout:V["a"]});var Se=r("8c4f"),De=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("app-view-layout",{attrs:{title:"Settings"}},[r("template",{slot:"rightElem"},[r("div",{staticClass:"caption set-default-action",class:{"set-default-action-enabled":!e.$store.getters["settings/equalsDefault"]},style:{"white-space":"nowrap",color:e.$store.getters["settings/equalsDefault"]?e.$vuetify.theme.secondary:e.$vuetify.theme.primary,"padding-right":"0.2rem"},on:{click:function(t){e.$store.getters["settings/equalsDefault"]||e.$store.dispatch("settings/default")}}},[r("strong",[e._v("▶ Set Default")])])]),r("app-main-settings",{attrs:{params:e.params(e.groupKeyMainSettings),openCvReady:e.$store.getters["worker/ready"],openCvLoading:e.$store.getters["worker/busyLoad"]},on:{changed:e.paramChanged,"load-opencv":function(t){e.$store.dispatch("worker/reload")}}}),r("app-view-spacer",{attrs:{"show-line":!1}}),r("app-view-title",{attrs:{title:"Images input"}}),r("app-image-input-settings",{attrs:{params:e.params(e.groupKeyImageInputSettings)},on:{changed:e.paramChanged}}),r("app-view-spacer",{attrs:{"show-line":!1}}),r("app-view-title",{attrs:{title:"Feature detection/matching"}}),r("app-basic-settings",{attrs:{params:e.params(e.groupKeyBasicSettings)},on:{change:e.paramChanged}}),r("app-view-spacer",{attrs:{"show-line":!1}}),r("app-view-title",{attrs:{title:"Advanced detector/descriptor"}}),r("v-tabs",{attrs:{value:e.$store.getters["settings/activeTabIndexDetector"]||0,light:"",height:"30px",color:"#eeeeee","slider-color":"secondary"},on:{change:function(t){return e.$store.dispatch("settings/activeTabIndexDetector",t)}}},[e._l(e.groupKeysDetectorSettings,function(t,a){return r("v-tab",{key:a,attrs:{ripple:""}},[e._v("\n      "+e._s(e.paramGroupName(t))+"\n    ")])}),e._l(e.groupKeysDetectorSettings,function(t,a){return r("v-tab-item",{key:a,attrs:{lazy:""}},[r("app-detector-settings",{attrs:{params:e.params(t)},on:{changed:e.paramChanged}})],1)})],2),r("app-view-spacer",{attrs:{"show-line":!1}}),r("app-view-title",{attrs:{title:"Advanced match filter"}}),r("app-match-filter",{attrs:{params:e.params(e.groupKeyMatchFilter)},on:{changed:e.paramChanged}}),r("app-view-spacer",{attrs:{"show-line":!1}}),r("app-view-title",{attrs:{title:"Matcher selection settings"}}),r("app-other-settings",{attrs:{params:e.params(e.groupKeyOtherSettings)},on:{changed:e.paramChanged}}),r("app-view-spacer",{attrs:{"show-line":!1}}),r("app-view-title",{attrs:{title:"Logging settings"}}),r("app-log-settings",{attrs:{params:e.params(e.groupKeyLogSettings)},on:{changed:e.logParamChanged}})],2)},Te=[],Oe=(r("20d6"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-layout",{attrs:{"align-center":"","justify-center":""}},[r("v-flex",{attrs:{xs11:"",sm11:"",md11:"",lg10:"",xl10:""}},[e.title?r("app-view-title",{attrs:{title:e.title}},[r("template",{slot:"leftElem"},[e._t("leftElem")],2),r("template",{slot:"rightElem"},[e._t("rightElem")],2)],2):e._e(),e._t("default")],2)],1)}),Ve=[],Ae=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-layout",{attrs:{"justify-space-between":"","align-center":""}},[r("v-layout",{attrs:{"align-center":"","justify-start":""}},[r("h3",{staticClass:"text-xs-left"},[e._v("\n        "+e._s(e.title)+"\n      ")]),r("div",[e._t("leftElem")],2)]),r("div",{style:{position:"relative"}},[r("div",{style:{position:"absolute",top:"0",left:"0",transform:"translate(-100%, -50%)"}},[e._t("rightElem")],2)])],1),r("app-view-spacer",{attrs:{mtop:"0"}})],1)},Ce=[],Re=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{style:{"border-top":"1px solid "+e.lineColor,"margin-top":e.mtop,"margin-bottom":e.mbottom}})},je=[],$e={props:{mtop:{type:String,default:"1rem"},mbottom:{type:String,default:"1rem"},showLine:{type:Boolean,default:!0}},computed:{lineColor:function(){return this.showLine?this.$vuetify.theme.secondary:"#00000000"}}},Pe=$e,Fe=Object(y["a"])(Pe,Re,je,!1,null,"281e50ac",null);Fe.options.__file="ViewSpacer.vue";var Ne=Fe.exports,Me={components:{appViewSpacer:Ne},props:{title:{type:String,required:!0}}},Ee=Me,Be=Object(y["a"])(Ee,Ae,Ce,!1,null,"44617d17",null);Be.options.__file="ViewTitle.vue";var Le=Be.exports;S()(Be,{VLayout:V["a"]});var qe={components:{appViewTitle:Le},props:{title:{type:String,default:null}}},Ue=qe,ze=Object(y["a"])(Ue,Oe,Ve,!1,null,null,null);ze.options.__file="ViewLayout.vue";var We=ze.exports;S()(ze,{VFlex:_e["a"],VLayout:V["a"]});var Ke=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-layout",{attrs:{row:"","justify-space-around":"",wrap:"","align-center":""}},e._l(e.params,function(t){return r("v-flex",{key:t.id,attrs:{xs12:"",sm6:"","pa-2":""}},[r("app-select",{attrs:{param:t},on:{change:e.changed}})],1)}),1)},Ge=[],Ye=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.canRender?r("v-select",e._b({style:{margin:"0",padding:"0"},attrs:{placeholder:e.paramName(),items:e.paramMapped(),value:e.paramValue(),hint:e.paramName(),"persistent-hint":"","single-line":"","item-text":"text","item-value":"value",outline:e.outline},on:{change:e.changed},scopedSlots:e._u([{key:"selection",fn:function(t){var a=t.item,i=t.index;return[0===i?r("span",[e._v("\n      "+e._s(a.text)+"\n    ")]):1===i?r("span",[e._v("\n      , "+e._s(a.text)+"\n    ")]):3===e.paramValue().length?r("span",{staticClass:"caption"},[e._v("\n       ( +1 other )\n    ")]):i===e.paramValue().length-1?r("span",{staticClass:"caption"},[e._v("\n       , ( + "+e._s(e.paramValue().length-2)+" other )\n    ")]):e._e()]}}])},"v-select",e.additionalSettings(),!1)):e._e()},He=[],Xe=(r("28a5"),r("6b54"),r("ac6a"),{props:{param:{type:Object,required:!0},outline:{type:Boolean,default:!1}},computed:{canRender:function(){return this.param.type==fe.discrete||this.param.type==fe.multiple}},methods:{paramMapped:function(){return this.param.values.map(function(e){return{text:e.name,value:e.id}})},changed:function(e){this.param.type==fe.multiple?this.$emit("change",{id:this.param.id,value:e.toString()}):this.$emit("change",{id:this.param.id,value:e})},paramName:function(){return he.getParamName(this.param.id)},paramValue:function(){return this.param.type==fe.discrete?{text:he.getParamName(this.param.value),value:this.param.value}:this.paramValueMultiple()},paramValueMultiple:function(){if(0==this.param.value.length)return[];var e=this.param.value.length>1?this.param.value.split(","):[this.param.value];return e.map(function(e){return{text:he.getParamName(+e),value:+e}})},additionalSettings:function(){return{multiple:this.param.type==fe.multiple}}}}),Je=Xe,Ze=r("b56d"),Qe=Object(y["a"])(Je,Ye,He,!1,null,"0ba088b3",null);Qe.options.__file="Select.vue";var et=Qe.exports;S()(Qe,{VSelect:Ze["a"]});var tt={components:{AppSelect:et},props:{params:{type:Array,required:!0}},methods:{changed:function(e){this.$emit("change",e)}}},rt=tt,at=Object(y["a"])(rt,Ke,Ge,!1,null,"ead104d0",null);at.options.__file="BasicSettings.vue";var it=at.exports;S()(at,{VFlex:_e["a"],VLayout:V["a"]});var nt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-layout",{attrs:{row:"","justify-start":"",wrap:"","align-baseline":""}},e._l(e.params,function(t){return r("v-flex",{key:t.id,attrs:{xs12:"",sm6:"","pa-2":""}},[t.type==e.valueTypes.number?r("v-text-field",{attrs:{name:t.id,label:e.paramName(t.id),value:t.value,rules:[e.rules.required],type:"number",hint:e.paramText(t.id)},on:{change:function(r){return e.changed(t.id,r)}}}):e._e(),t.type==e.valueTypes.bool?r("v-switch",{attrs:{value:t.value>0,"input-value":t.value>0,label:e.paramName(t.id),hint:e.paramText(t.id)},on:{change:function(r){return e.changed(t.id,r?1:0)}}}):e._e()],1)}),1)},st=[],ot=(r("c5f6"),{props:{params:{type:Array,required:!0}},data:function(){return{rules:{required:function(e){return e.toString().length>0&&!isNaN(Number(e))||"Required"}}}},computed:{valueTypes:function(){return fe}},methods:{paramName:function(e){return he.getParamName(e)},paramText:function(e){return he.getParamText(e)},changed:function(e,t){var r=Number(t);isNaN(r)||this.$emit("changed",{id:e,value:r})}}}),ut=ot,ct=r("b73d"),lt=r("2677"),mt=Object(y["a"])(ut,nt,st,!1,null,"122b81b0",null);mt.options.__file="DetectorSettings.vue";var dt=mt.exports;S()(mt,{VFlex:_e["a"],VLayout:V["a"],VSwitch:ct["a"],VTextField:lt["a"]});var pt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-layout",{attrs:{row:"","justify-start":"",wrap:"","align-baseline":""}},e._l(e.params,function(t){return r("v-flex",{key:t.id,attrs:{xs12:"",sm6:"","pa-2":""}},[t.type==e.valueTypes.number?r("v-text-field",{attrs:{name:t.id,label:e.paramName(t.id),value:t.value,rules:[e.rules.required],type:"number",hint:e.paramText(t.id),disabled:e.isDisabled(t)},on:{change:function(r){return e.changed(t.id,r)}}}):e._e(),t.type==e.valueTypes.bool?r("v-switch",{attrs:{value:t.value>0,"input-value":t.value>0,label:e.paramName(t.id),hint:e.paramText(t.id)},on:{change:function(r){return e.changed(t.id,r?1:0)}}}):e._e()],1)}),1)},gt=[],ht={props:{params:{type:Array,required:!0}},data:function(){return{rules:{required:function(e){return e.toString().length>0&&!isNaN(Number(e))||"Required"}}}},computed:{valueTypes:function(){return fe}},methods:{isDisabled:function(e){var t=he.getParamDisabledIfId(e.id);if(!t)return!1;var r=!0,a=!1,i=void 0;try{for(var n,s=m()(this.params);!(r=(n=s.next()).done);r=!0){var o=n.value;if(o.id==t)return o.value>0}}catch(u){a=!0,i=u}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return!1},paramName:function(e){return he.getParamName(e)},paramText:function(e){return he.getParamText(e)},changed:function(e,t){var r=Number(t);isNaN(r)||this.$emit("changed",{id:e,value:r})}}},ft=ht,yt=Object(y["a"])(ft,pt,gt,!1,null,"36d9ffd8",null);yt.options.__file="MatchFilter.vue";var vt=yt.exports;S()(yt,{VFlex:_e["a"],VLayout:V["a"],VSwitch:ct["a"],VTextField:lt["a"]});var bt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-layout",{attrs:{row:"","justify-start":"",wrap:"","align-baseline":""}},e._l(e.params,function(t){return r("v-flex",{key:t.id,attrs:{xs12:"",sm6:"","pa-2":""}},[t.type==e.valueTypes.range?r("v-slider",{style:{"margin-top":"0","margin-bottom":"0"},attrs:{"always-dirty":"",value:t.value,hint:e.paramName(t.id)+": "+t.value+" px","persistent-hint":"",max:t.range.max,min:t.range.min,step:1},on:{change:function(r){return e.$emit("changed",{id:t.id,value:r})}}}):e._e(),t.type==e.valueTypes.bool?r("v-switch",{attrs:{value:e.switchValue(t),"input-value":e.switchValue(t),label:e.paramName(t.id),hint:e.paramText(t.id)},on:{change:function(r){return e.$emit("changed",{id:t.id,value:r?1:0})}}}):e._e()],1)}),1)},wt=[],It={props:{params:{type:Array,required:!0}},computed:{valueTypes:function(){return fe}},methods:{paramName:function(e){return he.getParamName(e)},paramText:function(e){return he.getParamText(e)},switchValue:function(e){return e.value>0}}},_t=It,xt=r("ba0d"),kt=Object(y["a"])(_t,bt,wt,!1,null,"089a1386",null);kt.options.__file="OtherSettings.vue";var St=kt.exports;S()(kt,{VFlex:_e["a"],VLayout:V["a"],VSlider:xt["a"],VSwitch:ct["a"]});var Dt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-layout",{attrs:{row:"","justify-start":"",wrap:"","align-baseline":""}},e._l(e.params,function(t){return r("v-flex",{key:t.id,attrs:{xs12:"",sm6:""}},[t.type==e.valueTypes.bool?r("v-switch",{attrs:{value:e.switchValue(t),"input-value":e.switchValue(t),label:e.paramName(t.id),hint:e.paramText(t.id)},on:{change:function(r){return e.$emit("changed",{id:t.id,value:r?1:0})}}}):e._e()],1)}),1)},Tt=[],Ot={props:{params:{type:Array,required:!0}},computed:{valueTypes:function(){return fe}},methods:{paramName:function(e){return he.getParamName(e)},paramText:function(e){return he.getParamText(e)},switchValue:function(e){return e.value>0}}},Vt=Ot,At=Object(y["a"])(Vt,Dt,Tt,!1,null,"09e7faf5",null);At.options.__file="LogSettings.vue";var Ct=At.exports;S()(At,{VFlex:_e["a"],VLayout:V["a"],VSwitch:ct["a"]});var Rt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-layout",{attrs:{row:"","justify-start":"",wrap:"","align-baseline":""}},e._l(e.params,function(t){return r("v-flex",{key:t.id,attrs:{xs12:"",sm6:"","pa-2":""}},[t.type==e.valueTypes.discrete?r("app-select-action",{attrs:{param:t,"action-disabled":e.openCvLoading},on:{"select-change":function(t){return e.$emit("changed",t)},"action-click":function(t){e.$emit("load-opencv")}}}):e._e(),t.type==e.valueTypes.rangeSquareRoot?r("v-slider",{style:{"margin-top":"0","margin-bottom":"0"},attrs:{"always-dirty":"",value:e.sliderValueSqrt(t.value),hint:e.paramName(t.id)+": "+t.value+" px","persistent-hint":"",max:e.sliderValueSqrt(t.range.max),min:e.sliderValueSqrt(t.range.min),step:20},on:{change:function(r){return e.$emit("changed",{id:t.id,value:r*r})}}}):e._e()],1)}),1)},jt=[],$t=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-layout",[r("app-select",{attrs:{param:e.param},on:{change:function(t){return e.$emit("select-change",t)}}}),r("v-btn",{attrs:{icon:"",disabled:e.actionDisabled,color:"primary lighten-1",small:""},on:{click:function(t){e.$emit("action-click")}}},[r("v-icon",[e._v("cached")])],1)],1)},Pt=[],Ft={components:{AppSelect:et},props:{param:{type:Object,required:!0},actionDisabled:{type:Boolean,default:!1}}},Nt=Ft,Mt=Object(y["a"])(Nt,$t,Pt,!1,null,"67f3b442",null);Mt.options.__file="SelectAction.vue";var Et=Mt.exports;S()(Mt,{VBtn:D["a"],VIcon:O["a"],VLayout:V["a"]});var Bt={components:{AppSelectAction:Et},props:{params:{type:Array,required:!0},openCvReady:{type:Boolean,required:!0},openCvLoading:{type:Boolean,required:!0}},computed:{valueTypes:function(){return fe}},methods:{paramName:function(e){return he.getParamName(e)},paramText:function(e){return he.getParamText(e)},sliderValueSqrt:function(e){return Math.round(Math.sqrt(e))}}},Lt=Bt,qt=Object(y["a"])(Lt,Rt,jt,!1,null,"51bee110",null);qt.options.__file="MainSettings.vue";var Ut=qt.exports;S()(qt,{VFlex:_e["a"],VLayout:V["a"],VSlider:xt["a"]});var zt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-layout",{attrs:{row:"","justify-start":"",wrap:"","align-baseline":""}},e._l(e.params,function(t){return r("v-flex",{key:t.id,attrs:{xs12:"",sm6:"","pa-2":""}},[t.type==e.valueTypes.rangeSquareRoot?r("v-slider",{style:{"margin-top":"0","margin-bottom":"0"},attrs:{"always-dirty":"",value:e.sliderValueSqrt(t.value),hint:e.paramName(t.id)+": "+t.value+" px","persistent-hint":"",max:e.sliderValueSqrt(t.range.max),min:e.sliderValueSqrt(t.range.min),step:20},on:{change:function(r){return e.$emit("changed",{id:t.id,value:r*r})}}}):e._e()],1)}),1)},Wt=[],Kt={props:{params:{type:Array,required:!0}},computed:{valueTypes:function(){return fe}},methods:{paramName:function(e){return he.getParamName(e)},sliderValueSqrt:function(e){return Math.round(Math.sqrt(e))}}},Gt=Kt,Yt=Object(y["a"])(Gt,zt,Wt,!1,null,"0373c35b",null);Yt.options.__file="ImageInputSettings.vue";var Ht=Yt.exports;S()(Yt,{VFlex:_e["a"],VLayout:V["a"],VSlider:xt["a"]});var Xt={components:{AppViewLayout:We,AppViewSpacer:Ne,AppViewTitle:Le,AppBasicSettings:it,AppDetectorSettings:dt,AppMatchFilter:vt,AppOtherSettings:St,AppLogSettings:Ct,AppMainSettings:Ut,AppImageInputSettings:Ht},data:function(){return{groupKeysDetectorSettings:["sift","surf","orb","brisk","kaze","akaze"],groupKeyOtherSettings:"other",groupKeyBasicSettings:"basic",groupKeyMatchFilter:"matchFilter",groupKeyLogSettings:"logging",groupKeyStitchSettings:"stitching",groupKeyMainSettings:"main",groupKeyImageInputSettings:"imageInput",activeTabIndexDetector:0}},created:function(){this.setInitialTabIndex()},computed:{settings:function(){return this.$store.getters["settings/settings"]}},methods:{params:function(e){return this.settings.paramsByGroupKey(e)},tabChanged:function(e){this.activeTabIndexDetector=e},setInitialTabIndex:function(){if(null===this.$store.getters["settings/activeTabIndexDetector"]){var e=this.$store.getters["settings/getCurrentDetTypeGroupKey"],t=this.groupKeysDetectorSettings.findIndex(function(t){return t==e});t>=0&&this.$store.dispatch("settings/activeTabIndexDetector",t)}},paramChanged:function(e){this.$store.dispatch("settings/param",e),e.id==pe.alignSelectionOverlay.id&&this.$store.dispatch("worker/requestImage"),this.$store.dispatch("worker/multiStitchResetWorkerData")},logParamChanged:function(e){this.$store.dispatch("settings/param",e)},paramGroupName:function(e){return Z[e].name}}},Jt=Xt,Zt=(r("62e0"),r("71a3")),Qt=r("c671"),er=r("fe57"),tr=Object(y["a"])(Jt,De,Te,!1,null,"448a9544",null);tr.options.__file="Settings.vue";var rr=tr.exports;S()(tr,{VTab:Zt["a"],VTabItem:Qt["a"],VTabs:er["a"]});var ar=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("app-view-layout",{attrs:{title:"What does this application do?"}},[r("div",[r("p",{staticClass:"text-xs-left"},[e._v("\n      A "),r("strong",[e._v("webapplication")]),e._v(" to "),r("strong",[e._v("join, stitch or align")]),e._v(" overlapping images.\n      It can be used to create "),r("strong",[e._v("panoramas")]),e._v(" or to "),r("strong",[e._v("align images")]),e._v(", for example forms which have not been scanned properly.\n    ")]),r("p",{staticClass:"text-xs-left"},[e._v("\n      The main technologies used are "),r("a",{attrs:{href:"https://vuejs.org/"}},[r("strong",[e._v("Vue")])]),e._v(" and "),r("a",{attrs:{href:"https://opencv.org/"}},[r("strong",[e._v("OpenCV")])]),e._v(".\n    ")]),r("p",{staticClass:"text-xs-left"},[r("strong",[e._v("Features:")]),e._v(" Surface projection, feature detection, feature matching, bundle adjustement, wave correction, color transfer, seam detection and multiband blending.\n    ")]),r("p",{staticClass:"text-xs-left"},[e._v("\n      The core algorithms are taken from OpenCV (modules\n      "),r("a",{attrs:{href:"https://github.com/opencv/opencv/tree/master/modules/features2d"}},[e._v("Feature2D")]),e._v(" and\n      "),r("a",{attrs:{href:"https://github.com/opencv/opencv/tree/master/modules/stitching"}},[e._v("Stitching")]),e._v(" mainly)\n      and have been adjusted where needed. A customized version of OpenCV\n      has then been compiled to "),r("strong",[e._v("wasm")]),e._v(". To ensure a non blocking UI, all OpenCV related functions run via a "),r("strong",[e._v("webworker")]),e._v(".\n    ")]),r("p",{staticClass:"text-xs-left"},[r("strong",[e._v("Pros and cons:")]),e._v(" As image stitching can be quite "),r("strong",[e._v("memory and cpu intensive")]),e._v(", there are some limitations\n      on the amount or size of images which can be stitched together, especially on mobile devices.\n      On the plus side, basic stitching functionality is available on almost any\n      device which can run a browser. There is no need to download a professional stitching software.\n      The application is "),r("strong",[e._v("fully functional offline")]),e._v(" as well.\n    ")]),r("img",{attrs:{src:e.infoImage,alt:"Info Stitching",width:"100%"}})])])},ir=[],nr=r("207f"),sr=r.n(nr),or={components:{AppViewLayout:We},computed:{infoImage:function(){return sr.a}}},ur=or,cr=(r("2c77"),Object(y["a"])(ur,ar,ir,!1,null,"5fb28541",null));cr.options.__file="Info.vue";var lr=cr.exports,mr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("app-view-layout",{attrs:{title:"Matcher"}},[r("template",{slot:"rightElem"},[r("div",{style:{"padding-right":"0.2rem"}},[r("span",{style:{"white-space":"nowrap"}},[e._v("\n        detector: "),r("strong",[e._v(e._s(e.detTypeName)+" ")])])])]),r("div",[r("app-action-bar",{attrs:{compute:e.match,"compute-success":e.$store.getters["worker/results/success"](e.matchName),"worker-ready":e.$store.getters["worker/ready"],"worker-busy-compute":e.$store.getters["worker/busyCompute"],"worker-busy-image":e.$store.getters["worker/busyImage"],"worker-action-info":e.$store.getters["worker/currentActionInfo"],"worker-action-info-error":e.$store.getters["logs/currentErrorMessage"],"input-busy-image":e.$store.getters["input/busyFixedImage"]||e.$store.getters["input/busyMovingImage"],"fail-text":e.errorText,"action-text":"Match!","result-valid":e.$store.getters["worker/results/imageDataValid"](e.matchName),inputButtonsTitle:"Template image / align image"},on:{"delete-result":e.deleteResult,"load-default-images":e.loadDefaultImages}}),e.resultValid?r("v-layout",{attrs:{row:"",wrap:"","align-center":""}},[r("v-flex",{attrs:{xs6:"","pr-3":"","pb-2":""}},[r("v-select",{attrs:{placeholder:"Display Type",items:e.outputImageTypes,value:e.$store.getters["worker/results/matcherImageType"],disabled:e.$store.getters["worker/busy"],"single-line":"","hide-details":"",outline:"",dense:""},on:{change:e.imageSelectionChanged}})],1),r("v-flex",{attrs:{xs6:"","pl-3":"","pb-2":""}},[e.blendSliderVisible?r("v-slider",{staticClass:"slider",style:{"border-color":e.$vuetify.theme.accent},attrs:{"always-dirty":"",label:"Blend","inverse-label":"","hide-details":"",max:"1",min:"0",step:"0.01",disabled:e.$store.getters["worker/busy"],value:e.$store.getters["worker/results/matcherImageBlend"]},on:{change:e.blendValueChanged}}):e._e()],1),r("v-flex",[r("app-image-result",{attrs:{"image-url":e.$store.getters["worker/results/imageDataUrl"](e.matchName),"image-name":e.matchName}})],1)],1):e._e(),e.resultValid?r("app-view-spacer"):e._e(),r("app-input-images",{attrs:{polygons:e.$store.getters["input/polygons"]},on:{addPolygonPoint:e.addPolygonPt}})],1)],2)},dr=[],pr=(r("96cf"),r("3b8d")),gr=r("db0c"),hr=r.n(gr),fr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",[r("v-layout",{attrs:{"text-xs-left":"",caption:"","justify-space-between":"","pr-2":"","align-center":""}},[r("span",{style:{position:"relative"}}),e.workerReady?e.workerBusyCompute||e.workerBusyImage&&!e.showStatusInfo&&e.currentComputeTime&&e.workerActionInfoMessage?r("span",{style:{color:e.workerActionInfoError?e.$vuetify.theme.error:e.$vuetify.theme.primary}},[e._v("\n        "+e._s(e.timeStr(e.currentComputeTime)+", "+e.workerActionInfoMessage)+"\n      ")]):(e.inputBusyImage||e.resultValid)&&!e.showStatusInfo&&e.transitionDone&&e.workerActionInfoMessage?r("span",{style:{color:e.workerActionInfoError?e.$vuetify.theme.error:e.$vuetify.theme.primary}},[e._v("\n        "+e._s(e.workerActionInfoMessage)+" ...\n      ")]):e.resultValid&&!e.showStatusInfo&&e.transitionDone?r("span",[r("span",{style:{color:e.$vuetify.theme.error,cursor:"pointer"},on:{click:function(t){e.$emit("delete-result")}}},[r("strong",[e._v("▶ Clear image")])]),e.enableSaveImage?r("span",{style:{color:e.$vuetify.theme.primary,cursor:e.workerBusyImage?"wait":"pointer","padding-left":"1rem","padding-right":"0.2rem",opacity:e.workerBusyImage?"0.5":"1.0"},on:{click:function(t){e.workerBusyImage||e.$emit("save-result")}}},[r("strong",[e._v("▶ Save image")])]):e._e()]):e._e():r("span",{style:{color:e.$vuetify.theme.primary}},[e._v("\n        Loading OpenCV "+e._s(e.timeStr(e.currentLoadingTime))+"\n      ")]),r("transition",{attrs:{name:"status-info"},on:{"after-enter":e.afterEnter,"after-leave":e.afterLeave}},[e.showStatusInfo&&e.workerActionInfoError&&1===e.computeSuccess?r("span",{style:{color:e.$vuetify.theme.error}},[r("strong",[e._v(e._s(e.workerActionInfoError)+", time "+e._s(e.timeStr(e.computeTimeTotal)))])]):e.showStatusInfo&&1===e.computeSuccess?r("span",{style:{color:e.$vuetify.theme.success}},[r("strong",[e._v("Success, time "+e._s(e.timeStr(e.computeTimeTotal)))])]):e.showStatusInfo&&2===e.computeSuccess?r("span",{style:{color:e.$vuetify.theme.error}},[r("strong",[e._v("Low confidence result, time "+e._s(e.timeStr(e.computeTimeTotal)))])]):e.showStatusInfo&&0===e.computeSuccess?r("span",{style:{color:e.$vuetify.theme.error}},[r("strong",[e._v(e._s(e.failText))])]):e.showStatusInfo&&e.workerErrorMessage?r("span",{style:{color:e.$vuetify.theme.error}},[r("strong",[e._v(e._s(e.workerErrorMessage))])]):e._e()])],1),r("v-layout",{attrs:{row:"",wrap:"","align-center":""}},[r("v-flex",{attrs:{"d-flex":""}},[e.multiple?r("v-layout",[r("app-upload-button",{key:"multiStitch",style:{padding:"0 0.2rem 0 0"},attrs:{"unique-id":!0,title:"Images ...",disabled:e.workerBusy||e.inputBusyImage,accept:"image/*",multiple:e.multiple,small:"","file-changed-callback":function(t){return e.onMultiFileChanged(t)}},on:{"file-selection-started":function(t){e.$store.commit("multiInput/busyLoading",!0)},"file-selection-ended":function(t){e.$store.commit("multiInput/busyLoading",!1)}}}),r("v-btn",{style:{padding:"0 0.2rem 0 0",margin:"0","text-transform":"none !important"},attrs:{small:"",color:"primary",disabled:e.deleteDisabled},on:{click:function(t){e.$emit("delete-click")}}},[e._v("\n            Delete\n          ")])],1):r("v-layout",e._l(e.$store.getters["input/allImageNames"],function(t,a){return r("app-upload-button",{key:t,style:{padding:"0 0.2rem 0 0"},attrs:{"unique-id":!0,title:a+1+" ...",disabled:e.workerBusy||e.inputBusyImage,accept:"image/*",multiple:e.multiple,small:"","file-changed-callback":function(r){return e.onFileChanged(t,r)}},on:{"file-selection-started":function(r){e.$store.commit("input/busy",{name:t,value:!0})},"file-selection-ended":function(r){e.$store.commit("input/busy",{name:t,value:!1})}}})}),1)],1),r("v-flex",[r("v-layout",{attrs:{"justify-end":"","align-center":""}},[r("v-btn",{style:{"text-transform":"none !important",position:"relative"},attrs:{color:e.workerBusyCompute&&null!=e.kill?"error":"primary",disabled:e.computeButtonDisabled,small:""},on:{click:function(t){e.workerBusyCompute&&null!=e.kill?e.runKill():e.runCompute()}}},[e._v("\n            "+e._s(e.workerBusyCompute&&null!=e.kill?"Abort":e.actionText)+"\n          ")])],1)],1)],1),r("app-view-spacer",{attrs:{mtop:"0.5rem"}})],1)])},yr=[],vr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"upload-btn"},[r("input",{attrs:{id:e.id,type:"file",name:e.name,accept:e.accept,multiple:e.isMultiple},domProps:{value:e.value},on:{change:e.fileChanged,click:e.fileSelectionStarted,focus:e.inputFocus}}),r("label",{class:"v-btn "+e.classes+e.color+" upload-btn",style:{padding:"0",margin:"0","text-transform":"none !important"},attrs:{for:e.id}},[e._t("icon-left"),e._v("\n    "+e._s(e.icon?"":e.title)+"\n    "),e._t("icon")],2)])},br=[],wr=(r("f386"),r("4917"),z()()),Ir=z()(),_r=function(){function e(t){if(Object(L["a"])(this,e),t!=Ir)throw"Cannot construct Singleton!";this._deviceOS=e.deviceOS(),this._renderingEngine=e.renderingEngine()}return Object(q["a"])(e,[{key:"isGeckoOnAndroid",value:function(){return"android"==this._deviceOS&&"gecko"==this._renderingEngine}}],[{key:"deviceOS",value:function(){var e=navigator.userAgent;return e.match(/Android/i)?"android":e.match(/webOS/i)?"webos":e.match(/iPhone/i)?"iphone":e.match(/iPod/i)?"ipod":e.match(/iPad/i)?"ipad":e.match(/Windows Phone/i)?"windows phone":e.match(/SymbianOS/i)?"symbian":e.match(/RIM/i)||e.match(/BB/i)?"blackberry":""}},{key:"renderingEngine",value:function(){var e=navigator.userAgent;return e.match(/trident/i)?"trident":e.match(/webkit/i)?"webkit":e.match(/gecko/i)?"gecko":void 0}},{key:"instance",get:function(){return this[wr]||(this[wr]=new e(Ir)),this[wr]}}]),e}(),xr={props:{accept:{default:"*",type:String},block:{default:!1,type:Boolean},depressed:{default:!1,type:Boolean},fileChangedCallback:{default:void 0,type:Function},color:{default:"primary",type:String},disabled:{default:!1,type:Boolean},flat:{default:!1,type:Boolean},hover:{default:!0,type:Boolean},icon:{default:!1,type:Boolean},large:{default:!1,type:Boolean},loading:{default:!1,type:Boolean},multiple:{default:!1,type:Boolean},name:{default:"uploadFile",type:String},outline:{default:!1,type:Boolean},ripple:{default:!0,type:Boolean},round:{default:!1,type:Boolean},small:{default:!1,type:Boolean},title:{default:"Upload",type:String},uniqueId:{default:!1,type:Boolean}},computed:{id:function(){return this.uniqueId?"".concat(this._uid,"uploadFile"):"uploadFile"},classes:function(){var e={"v-btn--block":this.block,"v-btn--flat":this.flat,"upload-btn-hover":this.hover,"v-btn--icon":this.icon,"v-btn--large":this.large,"v-btn--loading":this.loading,"v-btn--outline":this.outline,"v-btn--round":this.round,"v-btn--small":this.small,"v-btn--disabled":this.disabled,"v-btn--depressed":this.depressed},t="";for(var r in e)e[r]&&(t+="".concat(r," "));return t},isMultiple:function(){return this.multiple&&!_r.instance.isGeckoOnAndroid()}},data:function(){return{value:"",fileChangedCalled:!1,inputClicked:!1}},methods:{fileChanged:function(e){this.fileChangedCalled=!0,this.fileSelectionStarted(),e&&this.fileChangedCallback&&(e.target.files?this.multiple&&!this.isMultiple&&e.target.files[0]?this.fileChangedCallback([e.target.files[0]]):this.isMultiple?this.fileChangedCallback(e.target.files):!this.multiple&&e.target.files[0]?this.fileChangedCallback(e.target.files[0]):this.fileChangedCallback(null):this.fileChangedCallback(null),this.value=""),this.fileSelectionEnded()},fileSelectionStarted:function(){this.inputClicked=!0,_r.instance.isGeckoOnAndroid()||this.$emit("file-selection-started")},fileSelectionEnded:function(){_r.instance.isGeckoOnAndroid()||(this.$emit("file-selection-ended"),this.fileChangedCalled=!1)},inputFocus:function(){var e=this;_r.instance.isGeckoOnAndroid()||this.inputClicked&&(this.inputClicked=!1,setTimeout(function(){e.fileChangedCalled||e.fileSelectionEnded()},4e3))}},beforeDestroy:function(){_r.instance.isGeckoOnAndroid()||this.$emit("file-selection-ended")}},kr=xr,Sr=(r("fcd5"),Object(y["a"])(kr,vr,br,!1,null,"64068d92",null));Sr.options.__file="UploadButton.vue";var Dr=Sr.exports,Tr={components:{AppUploadButton:Dr,AppViewSpacer:Ne},props:{compute:{type:Function,required:!0},kill:{type:Function,default:null},computeSuccess:{validator:function(e){return-1!==[0,1,2,null].indexOf(e)},required:!0},workerReady:{type:Boolean,required:!0},workerBusyCompute:{type:Boolean,required:!0},workerBusyImage:{type:Boolean,required:!0},workerActionInfo:{type:String,default:""},workerActionInfoError:{type:String,required:!0},workerlastCompletedActionTime:{type:Number,default:0},inputBusyImage:{type:Boolean,required:!0},failText:{type:String,default:"No match found!"},actionText:{type:String,default:"Match!"},actionButtonDisabledCondition:{type:Boolean,default:!1},resultValid:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},deleteDisabled:{type:Boolean,default:!1},enableSaveImage:{type:Boolean,default:!1},inputButtonsTitle:{type:String,default:""}},created:function(){this.startIntervalCurrentLoadingTime()},data:function(){return{showStatusInfo:!1,transitionDone:!0,computeTimeTotal:0,killCalled:!1}},computed:{workerErrorMessage:function(){var e=this.$store.getters["worker/error"];return e?e.message||"Error!":null},workerActionInfoMessage:function(){var e=this.workerActionInfoError?this.workerActionInfoError:this.workerActionInfo;return!e&&this.inputBusyImage?"Loading image/s":e&&e.length>50?e.substring(0,50):e},workerBusy:function(){return this.workerBusyCompute||this.workerBusyImage},computeButtonDisabled:function(){return this.actionButtonDisabledCondition||this.showStatusInfo||!this.workerReady||!this.multiple&&!this.$store.getters["input/allImageDataValid"]||this.multiple&&this.$store.getters["multiInput/imageCount"]<=1||this.workerBusyCompute&&null==this.kill||this.multiple&&this.inputBusyImage},currentComputeTime:function(){return this.$store.getters["worker/currentComputeTime"]},currentLoadingTime:function(){return this.$store.getters["worker/currentLoadingTime"]}},methods:{onFileChanged:function(e,t){this.$store.dispatch("input/imageFile",{name:e,file:t})},onMultiFileChanged:function(e){this.$emit("multi-input-files-changed",e)},afterEnter:function(){this.showStatusInfo=!1,this.transitionDone=!1},afterLeave:function(){this.transitionDone=!0,this.setCurrentComputeTime(null)},runKill:function(){this.killCalled=!0,this.kill()},runCompute:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(){var t,r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.killCalled=!1,this.showStatusInfo=!1,this.startIntervalCurrentComputeTime(),t=new Date,e.next=6,this.compute();case 6:this.computeTimeTotal=new Date-t,this.killCalled||(this.showStatusInfo=!0,setTimeout(function(){r.showStatusInfo=!1},1e4));case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),startIntervalCurrentComputeTime:function(){var e=this,t=new Date;if(this.setCurrentComputeTime(0),!this.showStatusInfo)var r=setInterval(function(){e.setCurrentComputeTime(new Date-t),(e.showStatusInfo||e.killCalled)&&(clearInterval(r),e.killCalled&&(e.killCalled=!1))},100)},startIntervalCurrentLoadingTime:function(){var e=this;if(!this.currentLoadingTime){var t=new Date;if(this.setCurrentLoadingTime(0),!this.workerReady)var r=setInterval(function(){e.setCurrentLoadingTime(new Date-t),e.workerReady&&(clearInterval(r),e.setCurrentLoadingTime(null))},150)}},timeStr:function(e){if(e<=0)return"";var t=Math.floor(e/6e4),r=e/1e3-60*t;return t>=1?"".concat(t," m ").concat(Math.floor(r)," s"):"".concat(r>10?r.toFixed(1):r.toFixed(2)," s")},setCurrentComputeTime:function(e){this.$store.commit("worker/currentComputeTime",e)},setCurrentLoadingTime:function(e){this.$store.commit("worker/currentLoadingTime",e)}}},Or=Tr,Vr=(r("5437"),Object(y["a"])(Or,fr,yr,!1,null,"57fd829c",null));Vr.options.__file="ActionBar.vue";var Ar=Vr.exports;S()(Vr,{VBtn:D["a"],VFlex:_e["a"],VLayout:V["a"]});var Cr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-layout",{attrs:{row:"","justify-space-around":"",wrap:"","align-start":""}},e._l(e.imageNames,function(t){return r("v-flex",{key:t,attrs:{xs12:"",sm6:"","pa-2":""}},[r("v-layout",{attrs:{"justify-center":""}},[r("div",{style:{position:"relative",border:e.$store.getters["input/imageDataValid"](t)?"1px solid "+e.$vuetify.theme.secondary:null,margin:"",padding:"0.3rem"}},[r("img",{ref:t,refInFor:!0,staticClass:"transparent-pattern",class:{"drag-over-image-invalid":e.dragInfo.isInsideImage[t],"drag-over-image-maybevalid":e.dragInfo.mayContainImageData[t],"drag-over-image-valid":e.dragInfo.containsImageData[t]},style:{cursor:"crosshair",display:"block","max-width":"100%","max-height":"400px",width:"auto",height:"auto"},attrs:{id:t,src:e.$store.getters["input/imageDataUrl"](t)},on:{"!click":function(r){return function(r){return e.addPoint(r,t)}(r)},mousedown:function(e){return e.stopPropagation(),function(e){e.preventDefault()}(e)},dragenter:function(r){return r.preventDefault(),function(r){return e.dragEnter(t,r)}(r)},dragleave:function(r){return e.dragLeave(t,r)},dragover:function(r){return r.preventDefault(),function(r){return e.dragOver(t,r)}(r)},drop:function(r){return r.preventDefault(),function(r){return e.dragDrop(t,r)}(r)}}}),e.imageRef(t)&&e.polygons[t]&&e.polygons[t].pts.length>0?r("app-polygon",{ref:t+"polygon",refInFor:!0,attrs:{width:e.imageWidth(t),height:e.imageHeight(t),polygon:e.polygonScaled(t)}}):e._e()],1)])],1)}),1)},Rr=[],jr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("canvas",{ref:"canvas",style:{position:"absolute",transform:"translate(-50%, -100%)",padding:e.padding,"pointer-events":"none"},attrs:{width:e.width,height:e.height}})},$r=[],Pr=(r("6c7b"),15),Fr=J()({pathColor:"#ff9999ff",pathColor1:"#000000ff",pathColor2:"#ffffffff",pathWidth:2,pathWidth1:4,pathWidth2:2,ptColor:"#5555ffff",ptColor1:"#000000ff",ptColor2:"#ffffffff",ptStartColor:"#ff5555ff",ptStartColor1:"#ffffffff",ptStartColor2:"#000000ff",fillColor:"#0000ff44",ptRadius:3,ptRadius1:4,ptRadius2:2}),Nr={props:{polygon:{type:Object,required:!0},width:{type:Number,required:!0},height:{type:Number,required:!0},padding:{type:String,default:"0"}},mounted:function(){this.clearRect({tl:{x:0,y:0},w:this.width,h:this.height}),this.drawPath()},beforeUpdate:function(){this.lastBoundingBox&&this.clearRect(this.lastBoundingBox),this.lastBoundingBox=this.bounds(),this.drawPath(),this.polygon.isClosed()||this.drawPts()},computed:{pts:function(){return this.polygon?this.polygon.pts:[]}},data:function(){return{lastBoundingBox:null}},methods:{ctx:function(){if(this.$refs["canvas"].getContext)return this.$refs["canvas"].getContext("2d")},clearRect:function(e){if(e){var t=this.ctx();if(!t)return;t.clearRect(e.tl.x,e.tl.y,e.w,e.h)}},drawPts:function(){var e=this.ctx();if(e)for(var t=0;t<this.pts.length;++t){var r=0==t?Fr.ptStartColor1:Fr.ptColor1,a=0==t?Fr.ptStartColor2:Fr.ptColor2;e.fillStyle=r,e.fillRect(this.pts[t].x-Fr.ptRadius1,this.pts[t].y-Fr.ptRadius1,2*Fr.ptRadius1,2*Fr.ptRadius1),e.fillStyle=a,e.fillRect(this.pts[t].x-Fr.ptRadius2,this.pts[t].y-Fr.ptRadius2,2*Fr.ptRadius2,2*Fr.ptRadius2)}},drawPath:function(){if(!(this.pts.length<2)){var e=this.ctx();if(e){var t=this.polygon.isClosed();e.strokeStyle=Fr.pathColor,e.lineWidth=Fr.pathWidth,e.beginPath(),e.moveTo(this.pts[0].x,this.pts[0].y);for(var r=1;r<this.pts.length;++r)e.lineTo(this.pts[r].x,this.pts[r].y),e.strokeStyle=Fr.pathColor1,e.lineWidth=Fr.pathWidth1,e.stroke(),e.strokeStyle=Fr.pathColor2,e.lineWidth=Fr.pathWidth2,e.stroke();t&&(e.fillStyle=Fr.fillColor,e.fill())}}},bounds:function(){if(0==this.pts.length)return{tl:{x:0,y:0},w:0,h:0};var e=this.polygon.bbox,t=e.tl,r=e.br;return t.x=t.x-Fr.ptRadius1>=0?t.x-Fr.ptRadius1:0,t.y=t.y-Fr.ptRadius1>=0?t.y-Fr.ptRadius1:0,r.x=r.x+Fr.ptRadius1<=this.width?r.x+Fr.ptRadius1:this.width,r.y=r.y+Fr.ptRadius1<=this.height?r.y+Fr.ptRadius1:this.height,{tl:t,w:r.x-t.x,h:r.y-t.y}}}},Mr=Nr,Er=Object(y["a"])(Mr,jr,$r,!1,null,"14bea751",null);Er.options.__file="Polygon.vue";var Br=Er.exports,Lr=function(){function e(t){if(Object(L["a"])(this,e),!t||!t.dataTransfer)throw new Error("Invalid drag event");this.dragEvent=t}return Object(q["a"])(e,[{key:"mayContainImageData",get:function(){return this.dragEvent.dataTransfer.types.some(function(e){return"Files"==e||"text/html"==e||"URL"==e||"text/plain"==e})}},{key:"containsImageData",get:function(){return this.imageFile||this.imageUrlBase64||this.imageTextBase64}},{key:"imageFile",get:function(){if(!this.dragEvent.dataTransfer.files||0==this.dragEvent.dataTransfer.files.length)return null;var e=this.dragEvent.dataTransfer.files[0];return"image/png"==e.type||"image/jpeg"==e.type?e:null}},{key:"imageUrlRemote",get:function(){var e=this.dragEvent.dataTransfer.getData("text/html")||this.dragEvent.dataTransfer.getData("URL");if(!e)return null;var t=/<img.+src=(?:"|')(.+?(\.jpg|\.png))(?:"|')(?:.+?)>/,r=t.exec(e);return r&&3==r.length?r[1]:null}},{key:"imageUrlBase64",get:function(){var e=this.dragEvent.dataTransfer.getData("text/html")||this.dragEvent.dataTransfer.getData("URL");if(!e)return null;var t=/src="(data:image\/([a-zA-Z]*);base64,([^"]*))"/,r=t.exec(e);return r&&4==r.length?r[1]:null}},{key:"imageTextBase64",get:function(){var e=this.dragEvent.dataTransfer.getData("text/plain");if(!e)return null;var t=/(data:image\/([a-zA-Z]*);base64,([^"]*))/,r=t.exec(e);return r&&4==r.length?r[1]:null}},{key:"fieldOfView",get:function(){var e=this.dragEvent.dataTransfer.getData("number/fieldOfView");return e&&(e=Number(e)),e&&!isNaN(e)?e:null}},{key:"projected",get:function(){var e=this.dragEvent.dataTransfer.getData("number/projected");return e&&(e=Number(e)),e&&!isNaN(e)?e:null}}]),e}(),qr=(r("34ef"),r("bc3a")),Ur=r.n(qr),zr=function(){function e(t){Object(L["a"])(this,e),this._imageUrl=t}return Object(q["a"])(e,[{key:"imageBase64",get:function(){return Ur.a.get(this._imageUrl,{responseType:"arraybuffer"}).then(function(e){return"data:".concat(e.headers["content-type"],";base64,").concat(btoa(String.fromCharCode.apply(String,Object(d["a"])(new Uint8Array(e.data)))))})}}]),e}(),Wr="fixed",Kr="moving",Gr="result",Yr="compare",Hr="stitch",Xr="multiStitch",Jr=0,Zr={components:{AppPolygon:Br},props:{polygons:{type:Object,required:!0}},data:function(){return{polysNeedUpdate:{},dragInfo:{isInsideImage:{},mayContainImageData:{},containsImageData:{}}}},computed:{imageNames:function(){return this.$store.getters["input/allImageNames"]}},methods:{poylgonRefName:function(e){return e+"polygon"},imageRef:function(e){return this.$refs[e]?this.$refs[e][Jr]:null},polyRef:function(e){return this.$refs[this.poylgonRefName(e)]?this.$refs[this.poylgonRefName(e)][Jr]:null},addPoint:function(e,t){if(this.imageRef(t)){var r={x:e.offsetX,y:e.offsetY},a=this.imageRef(t).naturalWidth/this.imageRef(t).width;this.$emit("addPolygonPoint",t,{x:r.x*a,y:r.y*a}),this.polysNeedUpdate[t]=!0}},imageWidth:function(e){return this.imageRef(e)&&this.imageRef(e).width?this.imageRef(e).width:0},imageHeight:function(e){return this.imageRef(e)&&this.imageRef(e).height?this.imageRef(e).height:0},polygonScaled:function(e){return this.imageRef(e)&&this.polygons[e]?this.polygons[e].scaledCopy(this.imageRef(e).width/this.imageRef(e).naturalWidth):null},dragEnter:function(e,t){this.dragInfo.isInsideImage[e]=!0,this.dragInfo.mayContainImageData[e]=new Lr(t).mayContainImageData,this.dragInfo.containsImageData[e]=new Lr(t).containsImageData},dragLeave:function(e){this.dragInfo.isInsideImage[e]=!1,this.dragInfo.mayContainImageData[e]=!1,this.dragInfo.containsImageData[e]=!1},dragOver:function(){},dragDrop:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t,r){var a,i,n,s,o,u;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.dragInfo.isInsideImage[t]=!1,this.dragInfo.mayContainImageData[t]=!1,this.dragInfo.containsImageData[t]=!1,a=new Lr(r),i=a.imageFile,!i){e.next=9;break}this.$store.dispatch("input/imageFile",{name:t,file:i}),e.next=28;break;case 9:if(n=a.imageUrlBase64,!n||t!=Wr&&a.projected){e.next=14;break}this.$store.dispatch("input/imageUrlBase64",{name:t,url:n,fieldOfView:a.fieldOfView,projected:a.projected}),e.next=28;break;case 14:if(s=a.imageUrlRemote,!s){e.next=28;break}return o=new zr(s),e.prev=17,e.next=20,o.imageBase64;case 20:u=e.sent,this.$store.dispatch("input/imageUrlBase64",{name:t,url:u}),o.imageBase64,e.next=28;break;case 25:e.prev=25,e.t0=e["catch"](17),console.log("[InputImages][dragDrop][Error]",e.t0);case 28:case"end":return e.stop()}},e,this,[[17,25]])}));function t(t,r){return e.apply(this,arguments)}return t}()},updated:function(){var e=!0,t=!1,r=void 0;try{for(var a,i=m()(this.imageNames);!(e=(a=i.next()).done);e=!0){var n=a.value;this.polyRef(n)&&this.polysNeedUpdate[n]&&(this.polyRef(n).$forceUpdate(),this.polysNeedUpdate[n]=!1)}}catch(s){t=!0,r=s}finally{try{e||null==i.return||i.return()}finally{if(t)throw r}}},created:function(){var e=!0,t=!1,r=void 0;try{for(var a,i=m()(this.imageNames);!(e=(a=i.next()).done);e=!0){var n=a.value;this.$set(this.polysNeedUpdate,n,!0),this.$set(this.dragInfo.isInsideImage,n,!1),this.$set(this.dragInfo.mayContainImageData,n,!1),this.$set(this.dragInfo.containsImageData,n,!1)}}catch(s){t=!0,r=s}finally{try{e||null==i.return||i.return()}finally{if(t)throw r}}},mounted:function(){var e=this;window&&!this.resizeListener&&(this.resizeListener=window.addEventListener("resize",function(){var t=!0,r=!1,a=void 0;try{for(var i,n=m()(e.imageNames);!(t=(i=n.next()).done);t=!0){var s=i.value;e.polysNeedUpdate[s]=!0,e.$forceUpdate()}}catch(o){r=!0,a=o}finally{try{t||null==n.return||n.return()}finally{if(r)throw a}}}));var t=!0,r=!1,a=void 0;try{for(var i,n=m()(this.imageNames);!(t=(i=n.next()).done);t=!0){var s=i.value;this.polysNeedUpdate[s]&&this.$forceUpdate()}}catch(o){r=!0,a=o}finally{try{t||null==n.return||n.return()}finally{if(r)throw a}}},beforeDestroy:function(){window&&this.resizeListener&&(window.removeEventListener(this.resizeListener),this.resizeListener=null)}},Qr=Zr,ea=(r("d39f"),Object(y["a"])(Qr,Cr,Rr,!1,null,null,null));ea.options.__file="InputImages.vue";var ta=ea.exports;S()(ea,{VFlex:_e["a"],VLayout:V["a"]});var ra=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{ref:"mainDiv"},[r("div",{style:{border:"1px solid "+e.$vuetify.theme.secondary,padding:"0.3rem"}},[r("img",{ref:e.imageName,staticClass:"transparent-pattern",class:e.imgClasses,style:{display:"block","max-width":"100%","max-height":"50vh",width:"auto",height:"auto",margin:"auto",padding:"0"},attrs:{id:e.imageName,src:e.imageUrl,draggable:"true"},on:{click:function(t){return t.stopPropagation(),e.showUnscaledIf(t)},load:function(t){e.canShowDialog=e.isImageScaled()},dragstart:e.dragStart,dragover:function(e){e.preventDefault()},dragend:function(e){e.preventDefault()}}})]),r("v-dialog",{ref:e.dialog.name,attrs:{attach:e.$refs.mainDiv,persistent:"",stlye:{cursor:"move"},"content-class":"transparent-pattern"},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;e.showDialog=!1}},model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}},[r("img",{ref:e.dialog.imageName,staticClass:"transparent-pattern",attrs:{id:e.dialog.imageName,src:e.imageUrl,stlye:{cursor:"move",display:"block"}},on:{mousedown:function(t){return"button"in t||!e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?"button"in t&&0!==t.button?null:(t.stopPropagation(),e.startDrag(t)):null},touchstart:function(t){return t.stopPropagation(),e.startDrag(t)}}})])],1)},aa=[],ia={props:{imageName:{type:String,required:!0},imageUrl:{validator:function(){return!0},required:!0},projected:{type:Boolean,default:!1},fieldOfView:{type:Number,default:0},canDrag:{type:Boolean,default:!0}},computed:{imgClasses:function(){return{"cursor-drag-zoom":this.canShowDialog&&this.canDrag,"cursor-drag":!this.canShowDialog&&this.canDrag,"cursor-zoom-in":this.canShowDialog&&!this.canDrag}}},data:function(){return{showDialog:!1,canShowDialog:!1,htmlStyleOverflowY:null,clickPos:{x:null,y:null},dialog:{name:"dialog_000a",imageName:this.imageName+"D",startPos:{x:null,y:null},dims:{w:null,h:null},scrollInfo:{w:null,h:null,lMax:null,lStart:null,tMax:null,tStart:null},innerDialog:function(e){return e[this.name].$refs.dialog},hideScrollbars:function(e){"hidden"!=this.innerDialog(e).style.overflow&&(this.innerDialog(e).style.overflow="hidden")},setMoveCursor:function(e){this.innerDialog(e).style.cursor="move"},dragMode:function(){return null!=this.startPos.x},stop:function(){this.startPos.x=null},start:function(e,t,r){console.assert(this.innerDialog(r),"Inner dialog must not be null"),this.startPos.x=e,this.startPos.y=t,this.dims.w=this.innerDialog(r).clientWidth,this.dims.h=this.innerDialog(r).clientHeight,this.scrollInfo.w=r[this.imageName].scrollWidth,this.scrollInfo.h=r[this.imageName].scrollHeight,this.scrollInfo.lMax=this.scrollInfo.w-this.dims.w,this.scrollInfo.tMax=this.scrollInfo.h-this.dims.h,this.scrollInfo.lStart=this.innerDialog(r).scrollLeft,this.scrollInfo.tStart=this.innerDialog(r).scrollTop,this.moved=!1},move:function(e,t,r){if(this.dragMode()){(Math.abs(this.startPos.x-e)>2||Math.abs(this.startPos.y-t)>2)&&(this.moved=!0);var a=this.scrollInfo.lStart+this.startPos.x-e;a<this.scrollInfo.lMax&&(this.innerDialog(r).scrollLeft=a);var i=this.scrollInfo.tStart+this.startPos.y-t;i<this.scrollInfo.tMax&&(this.innerDialog(r).scrollTop=i)}},init:function(e,t,r){var a=this.innerDialog(r).clientWidth,i=this.innerDialog(r).clientHeight,n=r[this.imageName].scrollWidth,s=r[this.imageName].scrollHeight,o=n-a,u=s-i,c=e-a/2,l=t-i/2;this.innerDialog(r).scrollLeft=c<o?c:o,this.innerDialog(r).scrollTop=l<u?l:u}}}},methods:{showUnscaledIf:function(e){if(this.canShowDialog){this.showDialog=!0;var t=this.scaleFactor();t>1&&(this.clickPos.x=t*(e.layerX-e.target.offsetLeft),this.clickPos.y=t*(e.layerY-e.target.offsetTop))}},isImageScaled:function(){return this.$refs&&this.$refs[this.imageName]&&(this.$refs[this.imageName].naturalWidth>this.$refs[this.imageName].width||this.$refs[this.imageName].naturalHeight>this.$refs[this.imageName].height)},scaleFactor:function(){return this.isImageScaled()?this.$refs[this.imageName].naturalWidth/this.$refs[this.imageName].width:1},startDrag:function(e){var t;e.preventDefault(),(t=this.dialog).start.apply(t,Object(d["a"])(this.coords(e)).concat([this.$refs])),this.addListeners()},endDrag:function(){this.removeAllDialogListeners(),this.dialog.dragMode()&&!this.dialog.moved&&(this.showDialog=!1),this.dialog.stop()},addListeners:function(){var e=this;window&&(this.mousemoveListener||(this.mousemoveListener=window.addEventListener("mousemove",function(t){var r;return(r=e.dialog).move.apply(r,Object(d["a"])(e.coords(t)).concat([e.$refs]))})),this.touchmoveListener||(this.touchmoveListener=window.addEventListener("touchmove",function(t){var r;return(r=e.dialog).move.apply(r,Object(d["a"])(e.coords(t)).concat([e.$refs]))})),this.mouseupListener||(this.mouseupListener=window.addEventListener("mouseup",this.endDrag)),this.touchendListener||(this.touchendListener=window.addEventListener("touchend",this.endDrag)))},removeAllDialogListeners:function(){window&&(this.mousemoveListener&&(window.removeEventListener(this.mousemoveListener),this.mousemoveListener=null),this.mouseupListener&&(window.removeEventListener(this.mouseupListener),this.mouseupListener=null),this.touchmoveListener&&(window.removeEventListener(this.touchmoveListener),this.mousemoveListener=null),this.touchendListener&&(window.removeEventListener(this.touchendListener),this.touchendListener=null))},coords:function(e){return e.touches&&e.touches.length>0?[e.touches[0].clientX,e.touches[0].clientY]:[e.clientX,e.clientY]},dragStart:function(e){e.dataTransfer.setData("text/plain",this.imageUrl),e.dataTransfer.setData("number/projected",this.projected?1:0),e.dataTransfer.setData("number/fieldOfView",this.fieldOfView)}},mounted:function(){var e=this;window&&!this.resizeListener&&(this.resizeListener=window.addEventListener("resize",function(){e.canShowDialog=e.isImageScaled(),!e.canShowDialog&&e.showDialog&&(e.showDialog=!1)}))},beforeUpdate:function(){this.showDialog?(this.htmlStyleOverflowY=document.documentElement.style.overflowY,document.documentElement.style.overflowY="auto"):(document.documentElement.style.overflowY=this.htmlStyleOverflowY,document.documentElement.classList.contains("overflow-y-hidden")&&document.documentElement.classList.remove("overflow-y-hidden"))},updated:function(){this.showDialog&&(this.dialog.hideScrollbars(this.$refs),this.dialog.setMoveCursor(this.$refs),null!=this.clickPos.x&&null!=this.clickPos.y&&(this.dialog.init(this.clickPos.x,this.clickPos.y,this.$refs),this.clickPos.x=null,this.clickPos.y=null))},beforeDestroy:function(){this.removeAllDialogListeners(),window&&this.resizeListener&&(window.removeEventListener(this.resizeListener),this.resizeListener=null)}},na=ia,sa=(r("08f9"),r("169a")),oa=Object(y["a"])(na,ra,aa,!1,null,"5eed89ac",null);oa.options.__file="ImageResult.vue";var ua=oa.exports;S()(oa,{VDialog:sa["a"]});var ca=J()({aligned:"Aligned",blended:"Blended",stitched:"Stitched",stitchedWithKeyPoints:"Stitched key points",sideBySideGood:"Side by side good matches",sideBySideGoodInliers:"Side by side inlier matches",selectionImage1:"Align selection image 1",selectionImage2:"Align selection image 2",keyPointsGoodFixed:"Matched key points image 1",keyPointsGoodMoving:"Matched Key points image 2",keyPointsInlierFixed:"Inlier key points image 1",keyPointsInlierMoving:"Inlier key points image 2"}),la=(ca.aligned,r("268c")),ma=r.n(la),da=r("ec32"),pa=r.n(da),ga={components:{AppViewLayout:We,AppViewSpacer:Ne,AppActionBar:Ar,AppInputImages:ta,AppImageResult:ua},created:function(){this.$store.dispatch("input/init",{url1:ma.a,url2:pa.a}),this.$store.dispatch("worker/load")},computed:{matcherImageTypes:function(){return ca},matcherImageType:function(){return this.$store.getters["worker/results/matcherImageType"]},matchName:function(){return Gr},resultValid:function(){return this.$store.getters["worker/results/imageDataValid"](Gr)},errorText:function(){var e=this.$store.getters["worker/error"];return e&&e.message?e.message:"No match found!"},detTypeName:function(){return he.getParamName(this.$store.getters["settings/param"](pe.detType.id))},outputImageTypes:function(){return hr()(this.matcherImageTypes)},blendSliderVisible:function(){return this.matcherImageType==this.matcherImageTypes.blended||this.matcherImageType==this.matcherImageTypes.stitched||this.matcherImageType==this.matcherImageTypes.stitchedWithKeyPoints||this.matcherImageType==this.matcherImageTypes.selectionImage1||this.matcherImageType==this.matcherImageTypes.selectionImage2},pathPtsFixedImage:function(){return this.$store.getters["input/pathPtsFixedImage"]},pathPtsMovingImage:function(){return this.$store.getters["input/pathPtsMovingImage"]}},data:function(){return{blendValue:.5}},watch:{pathPtsFixedImage:function(){this.matcherImageType==this.matcherImageTypes.selectionImage1&&this.requestImageIf()},pathPtsMovingImage:function(){this.matcherImageType==this.matcherImageTypes.selectionImage2&&this.requestImageIf()}},methods:{match:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.assert(this.$store.getters["input/imageDataValid"](Wr)&&this.$store.getters["input/imageDataValid"](Kr),"Invalid InputData in Matcher.match"),e.next=3,this.$store.dispatch("worker/computeAlignedImage",{fixedImage:this.$store.getters["input/imageData"](Wr),movingImage:this.$store.getters["input/imageData"](Kr),fixedImagePolygonPts:this.$store.getters["input/polygonClosedPts"](Wr),movingImagePolygonPts:this.$store.getters["input/polygonClosedPts"](Kr),settings:this.$store.getters["settings/settings"]});case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),deleteResult:function(){this.$store.commit("worker/results/imageData",{name:Gr,imageData:null}),this.$store.dispatch("worker/resetWorkerData")},loadDefaultImages:function(){this.$store.dispatch("input/loadDefaultImages",{url1:ma.a,url2:pa.a}),this.$store.dispatch("worker/resetWorkerData")},imageSelectionChanged:function(e){this.$store.commit("worker/results/matcherImageType",e),this.$store.dispatch("worker/requestImage")},blendValueChanged:function(e){this.$store.commit("worker/results/matcherImageBlend",e),this.$store.dispatch("worker/requestImage")},addPolygonPt:function(e,t){var r=this.$store.getters["settings/param"](pe.floodFillTolerance.id);this.$store.commit("input/addPolygonPt",{name:e,pt:t,floodFillTolerance:r})},requestImageIf:function(){this.matcherImageType!=this.matcherImageTypes.selectionImage1&&this.matcherImageType!=this.matcherImageTypes.selectionImage2||this.$store.dispatch("worker/requestImage")}}},ha=ga,fa=(r("e591"),Object(y["a"])(ha,mr,dr,!1,null,"475d3bef",null));fa.options.__file="Matcher.vue";var ya=fa.exports;S()(fa,{VFlex:_e["a"],VLayout:V["a"],VSelect:Ze["a"],VSlider:xt["a"]});var va=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("app-view-layout",{attrs:{title:"Compare feature detectors"}},[r("app-action-bar",{attrs:{compute:e.compare,"compute-success":e.$store.getters["worker/results/success"](e.compareName),"worker-ready":e.$store.getters["worker/ready"],"worker-busy-compute":e.$store.getters["worker/busyCompute"],"worker-busy-image":e.$store.getters["worker/busyImage"],"worker-action-info":e.$store.getters["worker/currentActionInfo"],"worker-action-info-error":e.$store.getters["logs/currentErrorMessage"],"input-busy-image":e.$store.getters["input/busyFixedImage"]||e.$store.getters["input/busyMovingImage"],"fail-text":e.errorText,"action-text":"Compare!","action-button-disabled-condition":0==e.detTypeValues.length,"result-valid":e.$store.getters["worker/results/imageDataValid"](e.compareName),inputButtonsTitle:"First image / second image"},on:{"delete-result":e.deleteResult,"load-default-images":e.loadDefaultImages}}),r("app-compare",{attrs:{params:e.settings.paramsByGroupKey("compare")},on:{change:e.changed}}),e.resultValid?r("v-layout",{attrs:{row:"",wrap:"","align-baseline":"","justify-center":""}},[r("app-image-result",{attrs:{"image-url":e.$store.getters["worker/results/imageDataUrl"](e.compareName),"image-name":e.compareName}})],1):e._e(),e.$store.getters["worker/results/imageDataValid"](e.compareName)?r("v-layout",{attrs:{"justify-space-around":""}},e._l(e.resultInfos,function(t,a){return r("v-flex",{key:a},[e._v("\n      "+e._s(t)+"\n    ")])}),1):e._e(),r("app-view-spacer"),r("app-input-images",{attrs:{polygons:e.$store.getters["input/polygons"]},on:{addPolygonPoint:function(t,r){return e.$store.commit("input/addPolygonPt",{name:t,pt:r})}}})],1)},ba=[],wa=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-layout",[r("v-layout",{attrs:{row:"","justify-space-around":"",wrap:"","align-baseline":""}},e._l(e.params,function(t){return r("v-flex",{key:t.id,attrs:{xs6:"",sm6:"","pa-2":""}},[r("app-select",{attrs:{param:t},on:{change:e.changed}})],1)}),1)],1)},Ia=[],_a={components:{AppSelect:et},props:{params:{type:Array,required:!0}},methods:{changed:function(e){this.$emit("change",e)}}},xa=_a,ka=Object(y["a"])(xa,wa,Ia,!1,null,"4d192cd8",null);ka.options.__file="Compare.vue";var Sa=ka.exports;S()(ka,{VFlex:_e["a"],VLayout:V["a"]});var Da={components:{AppViewLayout:We,AppViewSpacer:Ne,AppCompare:Sa,AppActionBar:Ar,AppInputImages:ta,AppImageResult:ua},created:function(){this.$store.dispatch("input/init"),this.$store.dispatch("worker/load")},computed:{settings:function(){return this.$store.getters["settings/settings"]},resultInfos:function(){var e=this.$store.getters["worker/results/settings"](Yr),t=e.getParamValueNamesById(pe.compareDetTypes.id),r=0,a=!0,i=!1,n=void 0;try{for(var s,o=m()(this.$store.getters["worker/results/compareTimeUsedPerDet"]);!(a=(s=o.next()).done);a=!0){var u=s.value;t[r++]+=" / ".concat(u," ms")}}catch(f){i=!0,n=f}finally{try{a||null==o.return||o.return()}finally{if(i)throw n}}r=0;var c=!0,l=!1,d=void 0;try{for(var p,g=m()(this.$store.getters["worker/results/compareKeyPointsCountPerDet"]);!(c=(p=g.next()).done);c=!0){var h=p.value;t[r++]+=" / ".concat(h," pts")}}catch(f){l=!0,d=f}finally{try{c||null==g.return||g.return()}finally{if(l)throw d}}return t},detTypeValues:function(){return this.settings.getParamValuesById(pe.compareDetTypes.id)},imageType:function(){return this.settings.getParamValueById(pe.compareImageType.id)},compareName:function(){return Yr},resultValid:function(){return this.$store.getters["worker/results/imageDataValid"](Yr)},errorText:function(){var e=this.$store.getters["worker/error"];return e&&e.message?e.message:"Unknown error"}},methods:{compare:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.assert(this.$store.getters["input/imageDataValid"](Wr)&&this.$store.getters["input/imageDataValid"](Kr),"Invalid InputData in Matcher.match"),e.next=3,this.$store.dispatch("worker/computeCompareImage",{fixedImage:this.$store.getters["input/imageData"](Wr),movingImage:this.$store.getters["input/imageData"](Kr),fixedImagePolygonPts:this.$store.getters["input/polygonClosedPts"](Wr),movingImagePolygonPts:this.$store.getters["input/polygonClosedPts"](Kr),settings:this.settings});case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),deleteResult:function(){this.$store.commit("worker/results/imageData",{name:Yr,imageData:null}),this.$store.dispatch("worker/resetWorkerData")},loadDefaultImages:function(){this.$store.dispatch("input/loadDefaultImages"),this.$store.dispatch("worker/resetWorkerData")},changed:function(e){this.$store.dispatch("settings/param",e)}}},Ta=Da,Oa=Object(y["a"])(Ta,va,ba,!1,null,"7abebdec",null);Oa.options.__file="Comparer.vue";var Va=Oa.exports;S()(Oa,{VFlex:_e["a"],VLayout:V["a"]});var Aa=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("app-view-layout",{attrs:{title:"Stitcher"}},[r("template",{slot:"rightElem"},[r("div",{style:{"padding-right":"0.2rem"}},[r("span",{style:{"white-space":"nowrap"}},[e._v("\n        detector: "),r("strong",[e._v(e._s(e.detTypeName)+" ")])])])]),r("template",{slot:"leftElem"},[r("div",{style:{"padding-right":"0.2rem","padding-left":"1rem",color:e.$vuetify.theme.primary,cursor:"pointer"},on:{click:e.switchSettingsDisplay}},[r("span",{style:{"white-space":"nowrap"}},[e.$store.getters["settings/stitcherSettingsOn"]?r("strong",[e._v("▲ Settings")]):r("strong",[e._v("▼ Settings")])])])]),r("div",[r("app-action-bar",{attrs:{compute:e.stitch,"compute-success":e.$store.getters["worker/results/success"](e.stitchName),"worker-ready":e.$store.getters["worker/ready"],"worker-busy-compute":e.$store.getters["worker/busyCompute"],"worker-busy-image":e.$store.getters["worker/busyImage"],"worker-action-info":e.$store.getters["worker/currentActionInfo"],"worker-action-info-error":e.$store.getters["logs/currentErrorMessage"],"input-busy-image":e.$store.getters["input/busyFixedImage"]||e.$store.getters["input/busyMovingImage"],"fail-text":e.errorText,"action-text":"Stitch!","result-valid":e.$store.getters["worker/results/imageDataValid"](e.stitchName),inputButtonsTitle:"First image / second image"},on:{"delete-result":e.deleteResult,"load-default-images":e.loadDefaultImages}}),e.$store.getters["settings/stitcherSettingsOn"]?r("div",[r("v-tabs",{attrs:{value:e.$store.getters["settings/activeTabIndexStitcher"]||0,height:"30px","show-arrows":"",color:"#eeeeee"},on:{change:function(t){return e.$store.dispatch("settings/activeTabIndexStitcher",t)}}},[e._l(e.groupKeysStitcherSettings,function(t,a){return r("v-tab",{key:a,attrs:{ripple:""}},[e._v("\n          "+e._s(e.paramGroupName(t))+"\n        ")])}),e._l(e.groupKeysStitcherSettings,function(t,a){return r("v-tab-item",{key:a,attrs:{lazy:""}},["stitcherCommon"==t?r("app-stitcher-common-settings",{attrs:{params:e.params(t)},on:{change:e.paramChanged}}):"stitcherOrientation"==t?r("app-stitcher-orientation-settings",{attrs:{params:e.params(t),fieldOfViewInitial1:e.fieldOfViewInitialValue1,fieldOfViewInitial2:e.fieldOfViewInitialValue2,getParamById:function(t){return e.$store.getters["settings/settings"].getParamById(t)}},on:{change:e.paramChanged}}):"stitcherProjection"==t?r("app-stitcher-projection-settings",{attrs:{params:e.params(t),settings:e.$store.getters["settings/setttings"]},on:{change:e.paramChanged}}):e._e()],1)})],2),r("app-view-spacer",{attrs:{mtop:"0px"}})],1):e._e(),e.resultValid?r("v-layout",{attrs:{"justify-center":""}},[r("app-image-result",{attrs:{"image-url":e.$store.getters["worker/results/imageDataUrl"](e.stitchName),"image-name":e.stitchName,projected:e.$store.getters["worker/results/stitcherProjected"],"field-of-view":e.$store.getters["worker/results/stitcherFieldOfView"]}})],1):e._e(),r("app-input-images",{attrs:{polygons:e.$store.getters["input/polygons"]},on:{addPolygonPoint:e.addPolygonPt}})],1)],2)},Ca=[],Ra=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-layout",{attrs:{row:"","justify-start":"",wrap:"","align-baseline":""}},e._l(e.params,function(t){return r("v-flex",{key:t.id,attrs:{xs6:"",sm6:"","pa-2":""}},[t.type==e.valueTypes.bool?r("v-switch",{staticClass:"switch-text-small",style:{margin:"0",padding:"0"},attrs:{value:t.value>0,"input-value":t.value>0,label:e.paramName(t.id),"hide-details":""},on:{change:function(r){return e.changed(t.id,r?1:0)}}}):e._e()],1)}),1)},ja=[],$a={props:{params:{type:Array,required:!0}},data:function(){return{}},computed:{valueTypes:function(){return fe}},methods:{paramName:function(e){return he.getParamName(e)},changed:function(e,t){var r=Number(t);isNaN(r)||this.$emit("change",{id:e,value:r})}}},Pa=$a,Fa=(r("46b7"),Object(y["a"])(Pa,Ra,ja,!1,null,"6a70bccd",null));Fa.options.__file="StitcherCommonSettings.vue";var Na=Fa.exports;S()(Fa,{VFlex:_e["a"],VLayout:V["a"],VSwitch:ct["a"]});var Ma=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-layout",{attrs:{row:"","justify-start":"",wrap:"","align-baseline":""}},e._l(e.getParamsMapped(!1),function(t){return r("v-flex",{key:t.param.id,attrs:{xs4:"",sm4:"","pa-2":""}},[r("v-text-field",{attrs:{name:t.param.id,label:e.paramName(t.param.id),placeholder:t.placeHolder(),value:t.getValue(),type:"number",hint:e.paramText(t.param.id)},on:{change:function(r){return e.changed(t,r)}}})],1)}),1)},Ea=[],Ba=function(){function e(t,r,a){Object(L["a"])(this,e),this.param=t,this.paramFlag=r,this.defaultValueExternFn=a,this.value=t.value,this.detect=!!(r&&r.value>0)}return Object(q["a"])(e,[{key:"setValue",value:function(e,t){if(this.value=e,e||0===e)return t({id:this.param.id,value:+e}),void(this.paramFlag&&t({id:this.paramFlag.id,value:0}));if(this.defaultValueExternFn){var r=this.defaultValueExternFn();(0===r||r)&&t({id:this.param.id,value:+r})}else t({id:this.param.id,value:this.param.defaultValue}),this.paramFlag&&t({id:this.paramFlag.id,value:1})}},{key:"getValue",value:function(){return this.value}},{key:"placeHolder",value:function(){var e=this.defaultValueExternFn?this.defaultValueExternFn():null;return e?"meta: "+e:this.paramFlag&&this.paramFlag.value>0?"compute":this.param.defaultValue+""}}]),e}(),La={components:{},props:{params:{type:Array,required:!0},fieldOfViewInitial1:{type:Number,default:null},fieldOfViewInitial2:{type:Number,default:null},getParamById:{type:Function,required:!0}},data:function(){return{rules:{numberOrEmpty:function(e){return 0==e.toString().length||!isNaN(Number(e))||"Number or empty"},required:function(e){return e.toString().length>0&&!isNaN(Number(e))||"Required"}},paramsMapped:[]}},watch:{fieldOfViewInitial1:function(){this.calcParamsMapped()},fieldOfViewInitial2:function(){this.calcParamsMapped()}},computed:{valueTypes:function(){return fe}},methods:{paramName:function(e){return he.getParamName(e)},paramText:function(e){return he.getParamText(e)},changed:function(e,t){var r=this;e.setValue(t,function(e){return r.$emit("change",e)})},calcParamsMapped:function(){var e=this;this.paramsMapped=[];var t=!0,r=!1,a=void 0;try{for(var i,n=function(){var t=i.value;if(t.type!=fe.numberAuto)return"continue";var r=null;t.id==pe.stitch_fieldOfView1.id?r=e.fieldOfViewInitial1:t.id==pe.stitch_fieldOfView2.id&&(r=e.fieldOfViewInitial2);var a=t.flagId?e.getParamById(t.flagId):null;e.paramsMapped.push(new Ba(t,a,r?function(){return r}:null))},s=m()(this.params);!(t=(i=s.next()).done);t=!0)n()}catch(o){r=!0,a=o}finally{try{t||null==s.return||s.return()}finally{if(r)throw a}}return this.paramsMapped},getParamsMapped:function(e){return(e||0==this.paramsMapped.length)&&this.calcParamsMapped(),this.paramsMapped}}},qa=La,Ua=(r("c81e"),Object(y["a"])(qa,Ma,Ea,!1,null,"6002a20c",null));Ua.options.__file="StitcherOrientationSettings.vue";var za=Ua.exports;S()(Ua,{VFlex:_e["a"],VLayout:V["a"],VTextField:lt["a"]});var Wa=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-layout",{attrs:{row:"","justify-start":"",wrap:"","align-baseline":""}},e._l(e.params,function(t){return r("v-flex",{key:t.id,attrs:{xs6:"",sm6:"","pa-2":""}},[t.type==e.valueTypes.discrete?r("app-select",{attrs:{param:t},on:{change:e.changedDiscrete}}):e._e()],1)}),1)},Ka=[],Ga={components:{AppSelect:et},props:{params:{type:Array,required:!0}},data:function(){return{}},computed:{valueTypes:function(){return fe}},methods:{changedDiscrete:function(e){this.$emit("change",e)}}},Ya=Ga,Ha=(r("5044"),Object(y["a"])(Ya,Wa,Ka,!1,null,"494c9c5f",null));Ha.options.__file="StitcherProjectionSettings.vue";var Xa=Ha.exports;S()(Ha,{VFlex:_e["a"],VLayout:V["a"]});var Ja={components:{AppViewLayout:We,AppViewSpacer:Ne,AppActionBar:Ar,AppInputImages:ta,AppImageResult:ua,AppStitcherCommonSettings:Na,AppStitcherOrientationSettings:za,AppStitcherProjectionSettings:Xa},created:function(){this.$store.dispatch("input/init"),this.$store.dispatch("worker/load")},computed:{stitchName:function(){return Hr},resultValid:function(){return this.$store.getters["worker/results/imageDataValid"](Hr)},errorText:function(){var e=this.$store.getters["worker/error"];return e&&e.message?e.message:"No match found!"},detTypeName:function(){return he.getParamName(this.$store.getters["settings/param"](pe.detType.id))},pathPtsFixedImage:function(){return this.$store.getters["input/pathPtsFixedImage"]},pathPtsMovingImage:function(){return this.$store.getters["input/pathPtsMovingImage"]},fieldOfViewInitialValue1:function(){return this.$store.getters["input/imageFieldOfView"](Wr)},fieldOfViewInitialValue2:function(){return this.$store.getters["input/imageFieldOfView"](Kr)}},data:function(){return{settingsOn:!1,groupKeysStitcherSettings:["stitcherCommon","stitcherOrientation","stitcherProjection"]}},methods:{stitch:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("worker/computeStitchedImage",{fixedImage:this.$store.getters["input/imageData"](Wr),movingImage:this.$store.getters["input/imageData"](Kr),fixedImagePolygonPts:this.$store.getters["input/polygonClosedPts"](Wr),movingImagePolygonPts:this.$store.getters["input/polygonClosedPts"](Kr),settings:this.$store.getters["settings/settings"]});case 2:if(!this.$store.getters["worker/results/success"](Hr)){e.next=5;break}return e.next=5,this.$store.dispatch("worker/displayStitchedImage");case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),deleteResult:function(){this.$store.commit("worker/results/imageData",{name:Hr,imageData:null}),this.$store.dispatch("worker/resetWorkerData")},loadDefaultImages:function(){this.$store.dispatch("input/loadDefaultImages"),this.$store.dispatch("worker/resetWorkerData")},addPolygonPt:function(e,t){var r=this.$store.getters["settings/param"](pe.floodFillTolerance.id);this.$store.commit("input/addPolygonPt",{name:e,pt:t,floodFillTolerance:r})},params:function(e){return this.$store.getters["settings/settings"].paramsByGroupKey(e)},paramGroupName:function(e){return Z[e].name},paramChanged:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("settings/param",t);case 2:if(this.$store.getters["worker/results/imageDataValid"](Hr)){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,this.$store.dispatch("worker/displayStitchedImage");case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),switchSettingsDisplay:function(){this.$store.getters["settings/stitcherSettingsOn"]?this.$store.dispatch("settings/stitcherSettingsOn",!1):this.$store.dispatch("settings/stitcherSettingsOn",!0)}}},Za=Ja,Qa=(r("084f"),Object(y["a"])(Za,Aa,Ca,!1,null,"8ea8ac12",null));Qa.options.__file="Stitcher.vue";var ei=Qa.exports;S()(Qa,{VLayout:V["a"],VTab:Zt["a"],VTabItem:Qt["a"],VTabs:er["a"]});var ti=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("app-view-layout",{attrs:{title:"Multistitcher"}},[r("template",{slot:"rightElem"},[r("div",{style:{"padding-right":"0.2rem"}},[r("span",{style:{"white-space":"nowrap"}},[e._v("\n        detector: "),r("strong",[e._v(e._s(e.detTypeName)+" ")])])])]),r("template",{slot:"leftElem"},[r("div",{style:{"padding-right":"0.2rem","padding-left":"1rem",color:e.$vuetify.theme.primary,cursor:"pointer"},on:{click:e.switchSettingsDisplay}},[r("span",{style:{"white-space":"nowrap"}},[e.$store.getters["settings/multiStitcherSettingsOn"]?r("strong",[e._v("▲ Settings")]):r("strong",[e._v("▼ Settings")])])])]),r("div",[r("app-action-bar",{attrs:{compute:e.multiStitch,kill:function(){return e.$store.dispatch("worker/reload")},"compute-success":e.$store.getters["worker/results/success"](e.multiStitchName),"worker-ready":e.$store.getters["worker/ready"],"worker-busy-compute":e.$store.getters["worker/busyCompute"],"worker-busy-image":e.$store.getters["worker/busyImage"],"worker-action-info":e.$store.getters["worker/currentActionInfo"],"worker-action-info-error":e.$store.getters["logs/currentErrorMessage"],"input-busy-image":e.$store.getters["multiInput/busy"]||e.$store.getters["multiInput/busyLoading"],"fail-text":e.errorText,"action-text":"Stitch!","result-valid":e.$store.getters["worker/results/imageDataValid"](e.multiStitchName),multiple:!0,"delete-disabled":0==e.$store.getters["multiInput/imageCount"],"enable-save-image":!0,inputButtonsTitle:"Choose input"},on:{"delete-result":e.deleteResult,"delete-click":e.deleteAllOrSelectedInputImages,"save-result":e.saveImage,"multi-input-files-changed":e.multiInputFilesChanged,"load-default-images":e.loadDefaultImages}}),e.$store.getters["settings/multiStitcherSettingsOn"]?r("div",[r("v-tabs",{attrs:{value:e.$store.getters["settings/activeTabIndexMultiStitcher"]||0,height:"30px",color:"#eeeeee","slider-color":"secondary"},on:{change:function(t){return e.$store.dispatch("settings/activeTabIndexMultiStitcher",t)}}},[e._l(e.groupKeysMultiStitcherSettings,function(t,a){return r("v-tab",{key:a,attrs:{ripple:""}},[e._v("\n          "+e._s(e.paramGroupName(t))+"\n        ")])}),e._l(e.groupKeysMultiStitcherSettings,function(t,a){return r("v-tab-item",{key:a,attrs:{lazy:""}},["multiStitcherCamera"==t?r("app-multi-stitcher-camera-settings",{attrs:{params:e.params(t),showFieldOfView:!e.camEstimationOn,enableFieldOfView:e.selectedIndices.length>0,fieldOfView:e.fieldOfView,fieldOfViewDefaultValue:e.fieldOfViewDefaultValue},on:{change:e.paramChanged,fieldOfViewChange:e.setFieldOfView}}):e._e(),"multiStitcherSeams"==t?r("app-multi-stitcher-seams-settings",{attrs:{params:e.params(t)},on:{change:e.paramChanged}}):e._e(),"multiStitcherImage"==t?r("app-multi-stitcher-image-settings",{attrs:{params:e.params(t)},on:{change:e.paramChanged}}):e._e(),"multiStitcherConfidence"==t?r("app-multi-stitcher-confidence-settings",{attrs:{params:e.params(t)},on:{change:e.paramChanged}}):e._e(),"multiStitcherMemory"==t?r("app-multi-stitcher-memory-settings",{attrs:{params:e.params(t)},on:{change:e.paramChanged}}):e._e(),"multiStitcherStitchOrder"==t?r("app-multi-stitcher-stitch-settings",{attrs:{params:e.params(t)},on:{change:e.paramChanged}}):e._e()],1)})],2),r("app-view-spacer",{attrs:{mtop:"0px"}})],1):e._e(),e.resultValid?r("v-layout",{attrs:{"justify-center":""}},[r("app-image-result",{attrs:{"image-url":e.$store.getters["worker/results/imageDataUrl"](e.multiStitchName),"image-name":e.multiStitchName,canDrag:!1}})],1):e._e(),r("app-multi-input-images",{attrs:{imageUrlArray:e.$store.getters["multiInput/imageDataUrlsArray"],imageKeyArray:e.$store.getters["multiInput/imageDataKeyArray"],fieldOfViewArray:e.$store.getters["multiInput/imageFieldOfViewArray"],indicesSelected:e.$store.getters["multiInput/indicesSelected"]},on:{imageClicked:function(t){return e.$store.commit("multiInput/imageClicked",t)},swap:e.swapImagesInputImages}})],1)],2)},ri=[],ai=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("transition",{attrs:{name:"images-all"}},[e.imageUrlArray.length>0?r("div",{style:{width:"100%",border:"1px solid #00000055","background-color":"#f6f6f6",padding:"0.1rem 0.1rem","margin-top":"1rem"}},[r("transition-group",{style:{display:"grid","grid-template-columns":"repeat(auto-fill, "+e.gridCellWidth+"%)","grid-template-rows":"auto",margin:"0 auto",width:"100%"},attrs:{tag:"div",name:"images-list-items"}},e._l(e.imageUrlArray,function(t,a){return r("div",{key:e.imageKeyArray[a],style:{outline:e.$store.getters["multiInput/imageDataValid"](a)?e.borderLineWidth(a)+" solid "+e.borderColor(a):null,margin:"3px",display:"flex","align-items":"center","justify-content":"center"},on:{click:function(t){t.stopPropagation(),e.imageClicked(a)},drop:function(t){return t.preventDefault(),function(t){return e.dragDrop(t,a)}(t)},dragover:function(e){e.preventDefault()},dragend:function(e){e.preventDefault()},dragenter:function(e){e.preventDefault()}}},[r("div",{style:{padding:"0.3rem","background-color":"#ffffff"}},[r("div",{style:{position:"relative"}},[r("img",{ref:a+"",refInFor:!0,staticClass:"transparent-pattern",style:{display:"block","max-width":"100%","max-height":"100%",width:"auto",height:"auto"},attrs:{id:a+"",src:t},on:{dragstart:function(t){return e.dragStart(t,a)},dragover:function(e){e.preventDefault()},dragend:function(e){e.preventDefault()}}}),r("div",{style:{position:"absolute",bottom:"0px",right:"0px",color:e.$vuetify.theme.primary,transform:"translateY(0%) translateX(0%)","background-color":e.$vuetify.theme.accent,padding:"0.1rem 0.3rem",margin:"0 0.2rem 0.2rem 0"}},[r("strong",[e._v(e._s(a))])])])])])}),0)],1):e._e()])},ii=[],ni={props:{imageUrlArray:{type:Array,required:!0},imageKeyArray:{type:Array,required:!0},fieldOfViewArray:{type:Array,required:!0},indicesSelected:{type:Array,required:!0}},computed:{gridCellWidth:function(){return"xs"==this.$vuetify.breakpoint.name?50:"sm"==this.$vuetify.breakpoint.name?33.3333333:25}},methods:{imageClicked:function(e){this.$emit("imageClicked",e)},borderColor:function(e){return this.indicesSelected.some(function(t){return t==e})?this.$vuetify.theme.error:this.$vuetify.theme.secondary},borderLineWidth:function(e){return this.indicesSelected.some(function(t){return t==e})?"2px":"1px"},dragStart:function(e,t){e.dataTransfer.setData("number/indexFrom",t)},dragDrop:function(e,t){var r=e.dataTransfer.getData("number/indexFrom");r&&(r=Number(r)),isNaN(r)||this.$emit("swap",{indexFrom:r,indexTo:t})}}},si=ni,oi=(r("7c24"),Object(y["a"])(si,ai,ii,!1,null,"0ad41ba8",null));oi.options.__file="MultiInputImages.vue";var ui=oi.exports,ci=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-layout",{attrs:{row:"","justify-start":"",wrap:"","align-baseline":""}},[e._l(e.params,function(t){return r("v-flex",{key:t.id,attrs:{xs6:"",sm6:"","pa-2":""}},[t.type==e.valueTypes.bool?r("v-switch",{staticClass:"switch-text-small",style:{margin:"0",padding:"0"},attrs:{value:t.value>0,"input-value":t.value>0,label:e.paramName(t.id),disabled:e.isDisabled(t),"hide-details":""},on:{change:function(r){return e.changed(t.id,r?1:0)}}}):e._e(),t.type==e.valueTypes.discrete?r("app-select",{attrs:{param:t},on:{change:e.changedDiscrete}}):e._e(),t.type==e.valueTypes.range?r("v-slider",e._b({style:{"margin-top":"0","margin-bottom":"0"},attrs:{"always-dirty":"",value:t.value,max:t.range.max,min:t.range.min,step:.01,disabled:e.isDisabled(t)},on:{change:function(r){return e.$emit("change",{id:t.id,value:r})}}},"v-slider",e.additionalSliderAttributes(t),!1)):e._e()],1)}),e.showFieldOfView?r("v-flex",{attrs:{xs6:"",sm6:"","pa-2":""}},[r("v-text-field",{attrs:{name:"fieldOfView",label:"Field of view",hint:"Select input images","persistent-hint":"",placeholder:e.fieldOfViewDefaultValue,value:e.showFieldOfView&&e.enableFieldOfView?e.fieldOfView:"",type:"number",disabled:!e.enableFieldOfView},on:{change:function(t){return e.fieldOfViewChanged(t)}}})],1):e._e()],2)},li=[],mi={components:{AppSelect:et},props:{params:{type:Array,required:!0},showFieldOfView:{type:Boolean,default:!1},enableFieldOfView:{type:Boolean,default:!1},fieldOfView:{type:String,default:null},fieldOfViewDefaultValue:{type:String,default:"45"}},data:function(){return{}},computed:{valueTypes:function(){return fe}},methods:{paramName:function(e){return he.getParamName(e)},changedDiscrete:function(e){this.$emit("change",e)},changed:function(e,t){var r=Number(t);isNaN(r)||this.$emit("change",{id:e,value:r})},fieldOfViewChanged:function(e){this.$emit("fieldOfViewChange",e)},isDisabled:function(e){var t=he.getParamEnabledIfId(e.id);if(!t)return!1;var r=!0,a=!1,i=void 0;try{for(var n,s=m()(this.params);!(r=(n=s.next()).done);r=!0){var o=n.value;if(o.id==t)return 0==o.value}}catch(u){a=!0,i=u}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return!1},additionalSliderAttributes:function(e){return"xs"==this.$vuetify.breakpoint.name?{hint:"".concat(this.paramName(e.id)," ").concat(e.value),"persistent-hint":!0,label:"","hide-details":!1}:{label:"".concat(this.paramName(e.id)," ").concat(e.value),"persistent-hint":!1,hint:null,"hide-details":!0}}}},di=mi,pi=(r("6303"),Object(y["a"])(di,ci,li,!1,null,"57531e52",null));pi.options.__file="MultiStitcherCameraSettings.vue";var gi=pi.exports;S()(pi,{VFlex:_e["a"],VLayout:V["a"],VSlider:xt["a"],VSwitch:ct["a"],VTextField:lt["a"]});var hi=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-layout",{attrs:{row:"","justify-start":"",wrap:"","align-center":""}},e._l(e.params,function(t){return r("v-flex",{key:t.id,attrs:{xs6:"",sm6:"","pa-2":""}},[t.type==e.valueTypes.bool?r("v-switch",{staticClass:"switch-text-small",style:{margin:"0",padding:"0"},attrs:{value:t.value>0,"input-value":t.value>0,label:e.paramName(t.id),disabled:e.isDisabled(t),"hide-details":""},on:{change:function(r){return e.changed(t.id,r?1:0)}}}):e._e()],1)}),1)},fi=[],yi={props:{params:{type:Array,required:!0}},computed:{valueTypes:function(){return fe}},methods:{paramName:function(e){return he.getParamName(e)},changed:function(e,t){var r=Number(t);isNaN(r)||this.$emit("change",{id:e,value:r})},isDisabled:function(e){var t=he.getParamEnabledIfId(e.id);if(!t)return!1;var r=!0,a=!1,i=void 0;try{for(var n,s=m()(this.params);!(r=(n=s.next()).done);r=!0){var o=n.value;if(o.id==t)return 0==o.value}}catch(u){a=!0,i=u}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return!1}}},vi=yi,bi=(r("f1ae"),Object(y["a"])(vi,hi,fi,!1,null,"7dacd4cd",null));bi.options.__file="MultiStitcherImageSettings.vue";var wi=bi.exports;S()(bi,{VFlex:_e["a"],VLayout:V["a"],VSwitch:ct["a"]});var Ii=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-layout",{attrs:{row:"","justify-start":"",wrap:"","align-baseline":""}},e._l(e.params,function(t){return r("v-flex",{key:t.id,attrs:{xs6:"",sm6:"","pa-2":""}},[t.type==e.valueTypes.bool?r("v-switch",{staticClass:"switch-text-small",style:{margin:"0",padding:"0"},attrs:{value:t.value>0,"input-value":t.value>0,label:e.paramName(t.id),disabled:e.isDisabled(t),"hide-details":""},on:{change:function(r){return e.changed(t.id,r?1:0)}}}):e._e()],1)}),1)},_i=[],xi={props:{params:{type:Array,required:!0}},data:function(){return{}},computed:{valueTypes:function(){return fe}},methods:{paramName:function(e){return he.getParamName(e)},changed:function(e,t){var r=Number(t);isNaN(r)||this.$emit("change",{id:e,value:r})},isDisabled:function(e){var t=he.getParamEnabledIfId(e.id);if(!t)return!1;var r=!0,a=!1,i=void 0;try{for(var n,s=m()(this.params);!(r=(n=s.next()).done);r=!0){var o=n.value;if(o.id==t)return 0==o.value}}catch(u){a=!0,i=u}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return!1}}},ki=xi,Si=(r("d01a"),Object(y["a"])(ki,Ii,_i,!1,null,"614804c8",null));Si.options.__file="MultiStitcherStitchSettings.vue";var Di=Si.exports;S()(Si,{VFlex:_e["a"],VLayout:V["a"],VSwitch:ct["a"]});var Ti=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-layout",{attrs:{row:"","justify-start":"",wrap:"","align-center":""}},e._l(e.params,function(t){return r("v-flex",{key:t.id,attrs:{xs6:"",sm6:"","pa-2":""}},[t.type==e.valueTypes.bool?r("v-switch",{staticClass:"switch-text-small",style:{margin:"0",padding:"0"},attrs:{value:t.value>0,"input-value":t.value>0,label:e.paramName(t.id),"hide-details":""},on:{change:function(r){return e.changed(t.id,r?1:0)}}}):e._e(),t.type==e.valueTypes.range?r("v-slider",e._b({style:{"margin-top":"0","margin-bottom":"0"},attrs:{"always-dirty":"",value:t.value,max:t.range.max,min:t.range.min,step:1,disabled:e.isDisabled(t)},on:{change:function(r){return e.$emit("change",{id:t.id,value:r})}}},"v-slider",e.additionalSliderAttributes(t),!1)):e._e(),t.type==e.valueTypes.discrete?r("app-select",{attrs:{param:t},on:{change:e.changedDiscrete}}):e._e()],1)}),1)},Oi=[],Vi={components:{AppSelect:et},props:{params:{type:Array,required:!0}},data:function(){return{}},computed:{valueTypes:function(){return fe}},methods:{paramName:function(e){return he.getParamName(e)},changed:function(e,t){var r=Number(t);isNaN(r)||this.$emit("change",{id:e,value:r})},changedDiscrete:function(e){this.$emit("change",e)},isDisabled:function(e){var t=he.getParamEnabledIfId(e.id);if(!t)return!1;var r=!0,a=!1,i=void 0;try{for(var n,s=m()(this.params);!(r=(n=s.next()).done);r=!0){var o=n.value;if(o.id==t)return 0==o.value}}catch(u){a=!0,i=u}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return!1},additionalSliderAttributes:function(e){return"xs"==this.$vuetify.breakpoint.name?{hint:"".concat(this.paramName(e.id),": ").concat(e.value),"persistent-hint":!0,label:"","hide-details":!1}:{label:"".concat(this.paramName(e.id),": ").concat(e.value),"persistent-hint":!1,hint:null,"hide-details":!0}}}},Ai=Vi,Ci=(r("ac87"),Object(y["a"])(Ai,Ti,Oi,!1,null,"574dd5ac",null));Ci.options.__file="MultiStitcherSeamsSettings.vue";var Ri=Ci.exports;S()(Ci,{VFlex:_e["a"],VLayout:V["a"],VSlider:xt["a"],VSwitch:ct["a"]});var ji=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-layout",{attrs:{row:"","justify-start":"",wrap:"","align-center":""}},e._l(e.params,function(t){return r("v-flex",{key:t.id,attrs:{xs6:"",sm6:"","pa-2":""}},[t.type==e.valueTypes.bool?r("v-switch",{staticClass:"switch-text-small",style:{margin:"0",padding:"0"},attrs:{value:t.value>0,"input-value":t.value>0,label:e.paramName(t.id),"hide-details":""},on:{change:function(r){return e.changed(t.id,r?1:0)}}}):e._e(),t.type==e.valueTypes.rangeSquareRoot?r("v-slider",e._b({style:{"margin-top":"0","margin-bottom":"0"},attrs:{"always-dirty":"",value:e.sliderValueSqrt(t.value),max:e.sliderValueSqrt(t.range.max),min:e.sliderValueSqrt(t.range.min),step:20},on:{change:function(r){return e.$emit("change",{id:t.id,value:r*r})}}},"v-slider",e.additionalSliderAttributes(t,"px"),!1)):e._e(),t.type==e.valueTypes.range?r("v-slider",e._b({style:{"margin-top":"0","margin-bottom":"0"},attrs:{"always-dirty":"",value:t.value,max:t.range.max,min:t.range.min,step:1},on:{change:function(r){return e.$emit("change",{id:t.id,value:r})}}},"v-slider",e.additionalSliderAttributes(t,""),!1)):e._e()],1)}),1)},$i=[],Pi={props:{params:{type:Array,required:!0}},data:function(){return{}},computed:{valueTypes:function(){return fe}},methods:{paramName:function(e){return he.getParamName(e)},changed:function(e,t){var r=Number(t);isNaN(r)||this.$emit("change",{id:e,value:r})},additionalSliderAttributes:function(e,t){return{hint:"".concat(this.paramName(e.id),": ").concat(e.value).concat(t?" "+t:""),"persistent-hint":!0,label:"","hide-details":!1}},sliderValueSqrt:function(e){return Math.round(Math.sqrt(e))}}},Fi=Pi,Ni=(r("9c9a"),Object(y["a"])(Fi,ji,$i,!1,null,"3aecced2",null));Ni.options.__file="MultiStitcherMemorySettings.vue";var Mi=Ni.exports;S()(Ni,{VFlex:_e["a"],VLayout:V["a"],VSlider:xt["a"],VSwitch:ct["a"]});var Ei=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-layout",{attrs:{row:"","justify-start":"",wrap:"","align-center":""}},e._l(e.params,function(t){return r("v-flex",{key:t.id,attrs:{xs6:"",sm6:"","pa-2":""}},[t.type==e.valueTypes.bool?r("v-switch",{staticClass:"switch-text-small",style:{margin:"0",padding:"0"},attrs:{value:t.value>0,"input-value":t.value>0,label:e.paramName(t.id),disabled:e.isDisabled(t),"hide-details":""},on:{change:function(r){return e.changed(t.id,r?1:0)}}}):e._e(),t.type==e.valueTypes.range?r("v-slider",e._b({style:{"margin-top":"0","margin-bottom":"0"},attrs:{"always-dirty":"",value:e.sliderValue(t),max:t.range.max,min:t.range.min,step:t.step?t.step:"0.01",disabled:e.isDisabled(t)},on:{change:function(r){return e.sliderChanged(t,r)}}},"v-slider",e.additionalSliderAttributes(t),!1)):e._e()],1)}),1)},Bi=[],Li={props:{params:{type:Array,required:!0}},data:function(){return{}},computed:{valueTypes:function(){return fe}},methods:{paramName:function(e){return he.getParamName(e)},changed:function(e,t){var r=Number(t);isNaN(r)||this.$emit("change",{id:e,value:r})},isDisabled:function(e){var t=he.getParamEnabledIfId(e.id);if(!t)return!1;var r=!0,a=!1,i=void 0;try{for(var n,s=m()(this.params);!(r=(n=s.next()).done);r=!0){var o=n.value;if(o.id==t)return 0==o.value}}catch(u){a=!0,i=u}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return!1},additionalSliderAttributes:function(e){var t=e.value===e.range.maxReplace?"> ".concat(e.range.max):e.value;return"xs"==this.$vuetify.breakpoint.name?{hint:"".concat(this.paramName(e.id),": ").concat(t),"persistent-hint":!0,label:"","hide-details":!1}:{label:"".concat(this.paramName(e.id),": ").concat(t),"persistent-hint":!1,hint:null,"hide-details":!0}},sliderValue:function(e){return void 0!=e.range.maxReplace&&e.value==e.range.maxReplace?e.range.max:e.value},sliderChanged:function(e,t){var r=t;void 0!=e.range.maxReplace&&t==e.range.max&&(r=e.range.maxReplace),this.$emit("change",{id:e.id,value:r})}}},qi=Li,Ui=(r("1106"),Object(y["a"])(qi,Ei,Bi,!1,null,"9fbe5e80",null));Ui.options.__file="MultiStitcherConfidenceSettings.vue";var zi=Ui.exports;S()(Ui,{VFlex:_e["a"],VLayout:V["a"],VSlider:xt["a"],VSwitch:ct["a"]});var Wi={components:{AppViewLayout:We,AppViewSpacer:Ne,AppActionBar:Ar,AppImageResult:ua,AppMultiInputImages:ui,AppMultiStitcherImageSettings:wi,AppMultiStitcherCameraSettings:gi,AppMultiStitcherStitchSettings:Di,AppMultiStitcherSeamsSettings:Ri,AppMultiStitcherMemorySettings:Mi,AppMultiStitcherConfidenceSettings:zi},created:function(){this.$store.dispatch("multiInput/init"),this.$store.dispatch("worker/load")},computed:{multiStitchName:function(){return Xr},selectedIndices:function(){return this.$store.getters["multiInput/indicesSelected"]},fieldOfView:function(){return this.selectedIndices.length>0?this.$store.getters["multiInput/imageFieldOfView"](this.selectedIndices[0])+"":""},fieldOfViewDefaultValue:function(){return this.selectedIndices.length>0?this.$store.getters["multiInput/imageFieldOfViewInitial"](this.selectedIndices[0])+"":""},resultValid:function(){return this.$store.getters["worker/results/imageDataValid"](Xr)},errorText:function(){var e=this.$store.getters["worker/error"];return e&&e.message?e.message:"No match found!"},detTypeName:function(){return he.getParamName(this.$store.getters["settings/param"](pe.detType.id))},camEstimationOn:function(){return this.$store.getters["settings/param"](pe.multiStitch_camEstimate.id)}},data:function(){return{settingsOn:!1,groupKeysMultiStitcherSettings:["multiStitcherCamera","multiStitcherSeams","multiStitcherImage","multiStitcherConfidence","multiStitcherMemory","multiStitcherStitchOrder"]}},methods:{multiStitch:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("multiInput/reloadFilesFromDiscIf");case 2:return e.next=4,this.$store.dispatch("worker/computeMultiStitchImageInSteps",{images:this.$store.getters["multiInput/imageDataArray"],fieldsOfView:this.$store.getters["multiInput/imageFieldOfViewArray"],settings:this.$store.getters["settings/settings"]});case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),deleteWorkerData:function(){this.$store.dispatch("worker/multiStitchResetWorkerData")},deleteResult:function(){this.$store.commit("worker/results/imageData",{name:Xr,imageData:null})},loadDefaultImages:function(){this.$store.dispatch("multiInput/loadDefaultImages"),this.deleteWorkerData()},deleteAllOrSelectedInputImages:function(){this.$store.dispatch("multiInput/removeAllOrSelected"),this.deleteWorkerData()},swapImagesInputImages:function(e){var t=e.indexFrom,r=e.indexTo;this.$store.commit("multiInput/swap",{indexFrom:t,indexTo:r}),this.deleteWorkerData()},saveImage:function(){this.$store.dispatch("worker/saveResultImage",{name:Xr,imageFileName:"MultiStitcherImage.png"})},multiInputFilesChanged:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.deleteWorkerData(),e.next=3,this.$store.dispatch("multiInput/imageFiles",t);case 3:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),params:function(e){return this.$store.getters["settings/settings"].paramsByGroupKey(e)},paramGroupName:function(e){return Z[e].name},switchSettingsDisplay:function(){this.$store.getters["settings/multiStitcherSettingsOn"]?this.$store.dispatch("settings/multiStitcherSettingsOn",!1):this.$store.dispatch("settings/multiStitcherSettingsOn",!0)},paramChanged:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("settings/param",t);case 2:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),setFieldOfView:function(e){var t=this;this.selectedIndices.forEach(function(r){e?t.$store.commit("multiInput/imageFieldOfViewUpdate",{index:r,fieldOfView:+e}):t.$store.commit("multiInput/imageFieldOfViewUpdate",{index:r,fieldOfView:t.$store.getters["multiInput/imageFieldOfViewInitial"](r)})})}}},Ki=Wi,Gi=Object(y["a"])(Ki,ti,ri,!1,null,null,null);Gi.options.__file="MultiStitcher.vue";var Yi=Gi.exports;S()(Gi,{VLayout:V["a"],VTab:Zt["a"],VTabItem:Qt["a"],VTabs:er["a"]});var Hi=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("app-view-layout",{attrs:{title:"Latest log messages"}},[e._l(e.$store.getters["logs/errorMessages"].slice().reverse(),function(t,a){return r("div",{key:a,style:{margin:"0",padding:"0","font-size":"0.7em","text-align":"left",color:e.$vuetify.theme.error},attrs:{"v-text":t}},[e._v("\n    "+e._s(t)+"\n  ")])}),e.$store.getters["logs/errorMessages"].length>0?r("app-view-spacer"):e._e(),e._l(e.$store.getters["logs/messages"].slice().reverse(),function(t,a){return r("div",{key:a+"error",style:{margin:"0",padding:"0","font-size":"0.7em","text-align":"left",color:a%2==0?e.$vuetify.theme.secondary:e.$vuetify.theme.primary},attrs:{"v-text":t}},[e._v("\n    "+e._s(t)+"\n  ")])})],2)},Xi=[],Ji={components:{AppViewSpacer:Ne,AppViewLayout:We}},Zi=Ji,Qi=Object(y["a"])(Zi,Hi,Xi,!1,null,"c5c2c2ba",null);Qi.options.__file="LogOutput.vue";var en=Qi.exports;a["a"].use(Se["a"]);var tn,rn,an,nn,sn,on,un,cn=new Se["a"]({mode:"history",base:"/",routes:[{path:"/index.html",redirect:{name:"multistitcher"}},{path:"/",redirect:{name:"info"}},{path:"/settings",name:"settings",component:rr},{path:"/info",name:"info",component:lr},{path:"/matcher",name:"matcher",component:ya},{path:"/comparer",name:"comparer",component:Va},{path:"/stitcher",name:"stitcher",component:ei},{path:"/multistitcher",name:"multistitcher",component:Yi},{path:"/logoutput",name:"logoutput",component:en}]}),ln=r("2f62"),mn=r("795b"),dn=r.n(mn),pn=function(){function e(){Object(L["a"])(this,e)}return Object(q["a"])(e,null,[{key:"imageDataFromImageSrc",value:function(e){var t=new Date,r=document.createElement("canvas");r.width=e.width,r.height=e.height;var a=r.getContext("2d");a.drawImage(e,0,0,e.width,e.height);var i=a.getImageData(0,0,r.width,r.height);return console.log("[imageDataFromImageSrc][time][ms]",new Date-t),i}},{key:"imageSrcFromImageData",value:function(e){var t=new Date,r=document.createElement("canvas"),a=r.getContext("2d");r.width=e.width,r.height=e.height,a.putImageData(e,0,0);var i=r.toDataURL();return console.log("[imageSrcFromImageData][toDataURL][time][ms]",new Date-t),i}},{key:"imageBlobFromImageData",value:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t){var r,a,i,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=new Date,a=document.createElement("canvas"),i=a.getContext("2d"),a.width=t.width,a.height=t.height,i.putImageData(t,0,0),e.next=8,new dn.a(function(e){try{a.toBlob(function(t){return e(t)},"image/png",1)}catch(t){console.log("[imageBlobFromImageData][toBlob][Error]",t),e(null)}});case 8:return n=e.sent,console.log("[imageBlobFromImageData][toBlob][time][ms]",new Date-r),e.abrupt("return",n);case 11:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),gn=r("6f45"),hn=function(){function e(){Object(L["a"])(this,e)}return Object(q["a"])(e,null,[{key:"getFieldOfViewAsync",value:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new dn.a(function(e){gn["getData"](t,function(){var t=this,r=gn["getTag"](this,"FocalLengthIn35mmFilm");if(r){var a=Number(r);if(!isNaN(a)){var i=function(){var e=gn["getTag"](t,"ImageWidth"),r=gn["getTag"](t,"ImageHeight"),a=gn["getTag"](t,"PixelXDimension"),i=gn["getTag"](t,"PixelYDimension");if(a&&(e=a),i&&(r=i),!e||!r)return null;var n=Number(e);if(isNaN(n))return null;var s=Number(r);return isNaN(s)?null:e/r};if(a){var n=6300/(Math.PI*a),s=i();return s&&s<1&&(n*=s),void e(Math.round(n))}}}e(null)})}));case 1:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),fn=r("5c22"),yn=r.n(fn),vn=r("5fba"),bn=r.n(vn),wn=r("60f8"),In=r.n(wn),_n=r("8bd2"),xn=r.n(_n),kn=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Object(L["a"])(this,e),this._pts=t}return Object(q["a"])(e,[{key:"addPt",value:function(e){this._pts.push(e)}},{key:"addPtAndCloseIf",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.pts.length<3)this.addPt(e);else{var r=this.pts[0],a=r.x,i=r.y;Math.pow(Math.abs(a-e.x),2)+Math.pow(Math.abs(i-e.y),2)<Math.pow(t,2)?this.addPt({x:a,y:i}):this.addPt(e)}}},{key:"isClosed",value:function(){return this.pts.length>3&&this.pts[0].x==this.pts[this.pts.length-1].x&&this.pts[0].y==this.pts[this.pts.length-1].y}},{key:"clear",value:function(){this._pts=[]}},{key:"scaledCopy",value:function(t){var r=new e,a=!0,i=!1,n=void 0;try{for(var s,o=m()(this.pts);!(a=(s=o.next()).done);a=!0){var u=s.value;r.addPt({x:u.x*t,y:u.y*t})}}catch(c){i=!0,n=c}finally{try{a||null==o.return||o.return()}finally{if(i)throw n}}return r}},{key:"pts",get:function(){return this._pts}},{key:"bbox",get:function(){for(var e={x:xn.a,y:xn.a},t={x:In.a,y:In.a},r=0;r<this.pts.length;++r){var a=this.pts[r];a.x<e.x&&(e.x=a.x),a.x>t.x&&(t.x=a.x),a.y<e.y&&(e.y=a.y),a.y>t.y&&(t.y=a.y)}return{tl:e,br:t}}}]),e}();function Sn(e,t,r){e.commit("imageFieldOfView",{name:t,fieldOfView:r}),t==Wr?e.dispatch("settings/param",{id:pe.stitch_fieldOfView1.id,value:r},{root:!0}):t==Kr&&e.dispatch("settings/param",{id:pe.stitch_fieldOfView2.id,value:r},{root:!0})}function Dn(e,t,r){e.commit("imageProjected",{name:t,projected:r}),r&&(t==Wr?e.dispatch("settings/param",{id:pe.stitch_projection.id,value:pe.stitch_projectionTypeNone.id},{root:!0}):t==Kr&&e.dispatch("settings/param",{id:pe.stitch_projection2.id,value:pe.stitch_projectionTypeNone.id},{root:!0}))}var Tn,On={imageData:(tn={},Object(c["a"])(tn,Wr,null),Object(c["a"])(tn,Kr,null),tn),imageDataUrls:(rn={},Object(c["a"])(rn,Wr,null),Object(c["a"])(rn,Kr,null),rn),imageFieldOfView:(an={},Object(c["a"])(an,Wr,null),Object(c["a"])(an,Kr,null),an),imageProjected:(nn={},Object(c["a"])(nn,Wr,!1),Object(c["a"])(nn,Kr,!1),nn),polygons:(sn={},Object(c["a"])(sn,Wr,new kn),Object(c["a"])(sn,Kr,new kn),sn),floodFillTolerances:(on={},Object(c["a"])(on,Wr,[]),Object(c["a"])(on,Kr,[]),on),busy:(un={},Object(c["a"])(un,Wr,!1),Object(c["a"])(un,Kr,!1),un)},Vn={imageData:function(e){return function(t){return e.imageData[t]}},imageDataUrl:function(e,t){return function(r){return t["imageDataValid"](r)?e.imageDataUrls[r]:null}},imageDataValid:function(e){return function(t){return e.imageData[t]&&e.imageData[t].width>0&&e.imageData[t].height>0}},allImageDataValid:function(e,t){return t["imageDataValid"](Wr)&&t["imageDataValid"](Kr)},allImageNames:function(){return[Wr,Kr]},imageFieldOfView:function(e){return function(t){return e.imageFieldOfView[t]}},imageProjected:function(e){return function(t){return e.imageProjected[t]}},polygons:function(e){return e.polygons},polygon:function(e){return function(t){return e.polygons[t]}},polygonClosedPts:function(e){return function(t){var r=e.polygons[t];return r.isClosed()?r.pts:[]}},polygonClosedPtsFixedImage:function(e){return e.polygons[Wr].isClosed()?e.polygons[Wr].pts:[]},polygonClosedPtsMovingImage:function(e){return e.polygons[Kr].isClosed()?e.polygons[Kr].pts:[]},pt:function(e){return function(t){var r=e.polygons[t].pts.length;return 0==r||e.polygons[t].isClosed()?null:e.polygons[t].pts[r-1]}},ptFixedImage:function(e){var t=e.polygons[Wr].pts.length;return 0==t||e.polygons[Wr].isClosed()?null:e.polygons[Wr].pts[t-1]},ptMovingImage:function(e){var t=e.polygons[Kr].pts.length;return 0==t||e.polygons[Kr].isClosed()?null:e.polygons[Kr].pts[t-1]},pathPts:function(e){return function(t){return 0==e.polygons[t].pts.length?[]:e.polygons[t].isClosed()?e.polygons[t].pts.slice(1):e.polygons[t].pts}},pathPtsFixedImage:function(e){var t=e.polygons[Wr];return 0==t.pts.length?[]:t.isClosed()?t.pts.slice(1):t.pts},pathPtsMovingImage:function(e){var t=e.polygons[Kr];return 0==t.pts.length?[]:t.isClosed()?t.pts.slice(1):t.pts},floodFillTolerances:function(e){return function(t){return 0==e.floodFillTolerances[t].length?[]:e.polygons[t].isClosed()?e.floodFillTolerances[t].slice(1):e.floodFillTolerances[t]}},busy:function(e){return function(t){return e.busy[t]}},busyFixedImage:function(e){return e.busy[Wr]},busyMovingImage:function(e){return e.busy[Kr]},busyAny:function(e){return e.busy[Wr]||e.busy[Kr]}},An={imageData:function(e,t){var r=t.name,a=t.imageData;e.imageData[r]=a},_imageDataUrl:function(e,t){var r=t.name,a=t.imageDataUrl;e.imageDataUrls[r]=a},imageFieldOfView:function(e,t){var r=t.name,a=t.fieldOfView;e.imageFieldOfView[r]=a},imageProjected:function(e,t){var r=t.name,a=t.projected;e.imageProjected[r]=a},addPolygonPt:function(e,t){var r=t.name,a=t.pt,i=t.floodFillTolerance;e.polygons[r].isClosed()?(e.polygons[r]=new kn,e.floodFillTolerances[r]=[]):(e.polygons[r].addPtAndCloseIf(a,Pr),e.floodFillTolerances[r].push(i||0===i?i:10))},resetPolygon:function(e,t){e.polygons[t]=new kn,e.floodFillTolerances[t]=[]},busy:function(e,t){var r=t.name,a=t.value;e.busy[r]=a}},Cn={loadDefaultImages:function(e,t){for(var r=[{name:Wr,dataUrl:t?t.url1:yn.a},{name:Kr,dataUrl:t?t.url2:bn.a}],a=function(){var t=r[i],a=t.name,n=t.dataUrl,s=new Image;s.onload=function(){try{var t=pn.imageDataFromImageSrc(s);e.dispatch("imageData",{name:a,imageData:t,doResizeIf:!1}),s.onload=null}finally{e.commit("busy",{name:a,value:!1})}},n&&(s.src=n,e.commit("busy",{name:a,value:!0}))},i=0;i<r.length;i++)a()},init:function(e,t){e.getters["imageDataValid"](Wr)||e.getters["imageDataValid"](Kr)||e.dispatch("loadDefaultImages",t)},imageData:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t,r){var a,i,n,s,o,u,c,l,m,d,p;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.commit,i=t.dispatch,n=t.rootGetters,s=r.name,o=r.imageData,u=r.doResizeIf,c=void 0===u||u,!(c&&o&&n["worker/ready"])){e.next=12;break}if(l=n["settings/param"](pe.imageCapInput.id),!(o.width*o.height>l)){e.next=12;break}if(m=Math.sqrt(l/(o.width*o.height)),d=Math.floor(o.height*m),p=Math.floor(o.width*m),!n["worker/ready"]){e.next=11;break}return e.next=11,i("worker/setInputImageResized",{imageName:s,imageDataSrc:o,width:p,height:d},{root:!0});case 11:return e.abrupt("return");case 12:a("imageData",{name:s,imageData:o}),i("_imageDataUrl",{name:s,imageData:o}),a("resetPolygon",s),a("imageFieldOfView",{name:s,fieldOfView:null}),a("imageProjected",{name:s,projected:!1}),n["worker/ready"]&&(i("worker/resetWorkerData",null,{root:!0}),a("worker/results/imageData",{name:Gr,imageData:null},{root:!0}),a("worker/results/imageData",{name:Yr,imageData:null},{root:!0}),a("worker/results/imageData",{name:Hr,imageData:null},{root:!0}));case 18:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}(),_imageDataUrl:function(e,t){var r=e.commit,a=t.name,i=t.imageData;r("_imageDataUrl",i?{name:a,imageDataUrl:pn.imageSrcFromImageData(i)}:{name:a,imageDataUrl:null})},imageFile:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t,r){var a,i,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a=r.name,i=r.file,n=new Image,n.onload=Object(pr["a"])(regeneratorRuntime.mark(function e(){var r,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,r=pn.imageDataFromImageSrc(n),e.next=4,t.dispatch("imageData",{name:a,imageData:r});case 4:return e.next=6,hn.getFieldOfViewAsync(n);case 6:i=e.sent,i&&Sn(t,a,i),n.onload=null;case 9:return e.prev=9,t.commit("busy",{name:a,value:!1}),e.finish(9);case 12:case"end":return e.stop()}},e,this,[[0,,9,12]])})),i&&(t.commit("busy",{name:a,value:!0}),n.src=URL.createObjectURL(i));case 4:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}(),imageUrlBase64:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t,r){var a,i,n,s,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a=r.name,i=r.url,n=r.fieldOfView,s=r.projected,o=new Image,o.onload=Object(pr["a"])(regeneratorRuntime.mark(function e(){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,r=pn.imageDataFromImageSrc(o),e.next=4,t.dispatch("imageData",{name:a,imageData:r});case 4:if(n){e.next=8;break}return e.next=7,hn.getFieldOfViewAsync(o);case 7:n=e.sent;case 8:n&&Sn(t,a,n),s&&Dn(t,a,s),o.onload=null;case 11:return e.prev=11,t.commit("busy",{name:a,value:!1}),e.finish(11);case 14:case"end":return e.stop()}},e,this,[[0,,11,14]])})),i&&(t.commit("busy",{name:a,value:!0}),o.src=i);case 4:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}()},Rn={namespaced:!0,state:On,getters:Vn,mutations:An,actions:Cn},jn=r("3eaf"),$n=r.n(jn),Pn=r("f627"),Fn=r.n(Pn),Nn=r("dce7"),Mn=r.n(Nn),En={imageDataArray:[],imageDataKeysArray:[],imageDataUrlsArray:[],imageFileArray:[],imageFieldOfViewArray:[],imageFieldOfViewInitialArray:[],busy:!1,busyLoading:!1,indicesSelected:[],initCalled:!1},Bn={imageDataArray:function(e){return e.imageDataArray},imageDataKeyArray:function(e){return e.imageDataKeysArray},imageDataUrlsArray:function(e){return e.imageDataUrlsArray},imageFileArray:function(e){return e.imageFileArray},imageFieldOfViewArray:function(e){return e.imageFieldOfViewArray},busy:function(e){return e.busy},busyLoading:function(e){return e.busyLoading},indicesSelected:function(e){return e.indicesSelected},imageFieldOfView:function(e){return function(t){return e.imageFieldOfViewArray[t]}},imageFieldOfViewInitial:function(e){return function(t){return e.imageFieldOfViewInitialArray[t]}},imageDataValid:function(e){return function(t){return e.imageDataArray.length>t&&e.imageDataArray[t]&&e.imageDataArray[t].width>0&&e.imageDataArray[t].height>0||e.imageFileArray.length>t&&e.imageFileArray[t]}},imageCount:function(e){return e.imageDataArray.length},initCalled:function(e){return e.initCalled}},Ln={imageDataArray:function(e,t){e.imageDataArray=t},imageData:function(e,t){e.imageDataArray.push(t),e.imageDataKeysArray.push(Math.random())},_imageDataUrl:function(e,t){e.imageDataUrlsArray.push(t)},_imageFile:function(e,t){e.imageFileArray.push(t)},imageFieldOfView:function(e,t){e.imageFieldOfViewArray.push(t)},imageFieldOfViewInitial:function(e,t){e.imageFieldOfViewInitialArray.push(t)},imageDataUrlsArray:function(e,t){e.imageDataUrlsArray=t},imageFieldOfViewUpdate:function(e,t){var r=t.index,a=t.fieldOfView;e.imageFieldOfViewArray.splice(r,1,a)},imageClicked:function(e,t){if(-1!=t){var r=e.indicesSelected.findIndex(function(e){return e==t});-1==r?e.indicesSelected.push(t):e.indicesSelected.splice(r,1)}else e.indicesSelected=[]},busy:function(e,t){e.busy=t},busyLoading:function(e,t){e.busyLoading=t},swap:function(e,t){var r=t.indexFrom,a=t.indexTo,i=e.imageDataArray[a],n=e.imageDataKeysArray[a],s=e.imageDataUrlsArray[a],o=e.imageFileArray[a],u=e.imageFieldOfViewArray[a],c=e.imageFieldOfViewInitialArray[a];e.imageDataArray.splice(a,1,e.imageDataArray[r]),e.imageDataKeysArray.splice(a,1,e.imageDataKeysArray[r]),e.imageDataUrlsArray.splice(a,1,e.imageDataUrlsArray[r]),e.imageFileArray.splice(a,1,e.imageFileArray[r]),e.imageFieldOfViewArray.splice(a,1,e.imageFieldOfViewArray[r]),e.imageFieldOfViewInitialArray.splice(a,1,e.imageFieldOfViewInitialArray[r]),e.imageDataArray.splice(r,1,i),e.imageDataKeysArray.splice(r,1,n),e.imageDataUrlsArray.splice(r,1,s),e.imageFileArray.splice(r,1,o),e.imageFieldOfViewArray.splice(r,1,u),e.imageFieldOfViewInitialArray.splice(r,1,c)},removeSelected:function(e){e.imageDataArray=e.imageDataArray.filter(function(t,r){return!e.indicesSelected.some(function(e){return e==r})}),e.imageDataKeysArray=e.imageDataKeysArray.filter(function(t,r){return!e.indicesSelected.some(function(e){return e==r})}),e.imageDataUrlsArray=e.imageDataUrlsArray.filter(function(t,r){return!e.indicesSelected.some(function(e){return e==r})}),e.imageFileArray=e.imageFileArray.filter(function(t,r){return!e.indicesSelected.some(function(e){return e==r})}),e.imageFieldOfViewArray=e.imageFieldOfViewArray.filter(function(t,r){return!e.indicesSelected.some(function(e){return e==r})}),e.imageFieldOfViewInitialArray=e.imageFieldOfViewInitialArray.filter(function(t,r){return!e.indicesSelected.some(function(e){return e==r})}),e.indicesSelected=[]},removeAll:function(e){e.imageDataArray=[],e.imageDataKeysArray=[],e.imageDataUrlsArray=[],e.imageFileArray=[],e.imageFieldOfViewArray=[],e.imageFieldOfViewInitialArray=[],e.indicesSelected=[]},freeImageData:function(e){var t=e.imageDataArray.length;e.imageDataArray=[],e.imageDataArray=new Array(t).fill(null)},initCalled:function(e){e.initCalled=!0}},qn={loadDefaultImages:function(e){var t=e.getters["imageDataArray"];t&&t.length>0&&e.commit("removeAll");for(var r=[$n.a,Fn.a,Mn.a],a=function(){var t=r[i],a=new Image;a.onload=function(){try{var t=pn.imageDataFromImageSrc(a);e.commit("imageData",t),e.commit("_imageDataUrl",pn.imageSrcFromImageData(t)),e.commit("imageFieldOfView",45),e.commit("imageFieldOfViewInitial",45),a.onload=null}finally{e.commit("busy",!1)}},t&&(a.src=t,e.commit("busy",!0))},i=0;i<r.length;i++)a()},init:function(e){e.getters["initCalled"]||e.commit("initCalled")},imageData:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t,r){var a,i,n,s,o,u,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.commit,i=t.dispatch,n=t.rootGetters,!r||!n["worker/ready"]){e.next=11;break}if(s=n["settings/param"](pe.imageCapInput.id),!(r.width*r.height>s)){e.next=11;break}if(o=Math.sqrt(s/(r.width*r.height)),u=Math.floor(r.height*o),c=Math.floor(r.width*o),!n["worker/ready"]){e.next=10;break}return e.next=10,i("worker/setMultiInputImageResized",{imageDataSrc:r,width:c,height:u},{root:!0});case 10:return e.abrupt("return");case 11:return a("imageData",r),e.next=14,i("imageDataUrl",r);case 14:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}(),imageDataUrl:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t,r){var a,i,n,s,o,u,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.commit,i=t.dispatch,n=t.rootGetters,r){e.next=4;break}return a("_imageDataUrl",null),e.abrupt("return");case 4:if(s=n["settings/param"](pe.multiStitch_limitInputView.id),!(r.width*r.height>s)){e.next=13;break}if(o=Math.sqrt(s/(r.width*r.height)),u=Math.floor(r.height*o),c=Math.floor(r.width*o),!n["worker/ready"]){e.next=12;break}return e.next=12,i("worker/setMultiInputImageUrlResized",{imageDataSrc:r,width:c,height:u},{root:!0});case 12:return e.abrupt("return");case 13:n["worker/ready"]&&a("_imageDataUrl",pn.imageSrcFromImageData(r));case 14:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}(),imageFile:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t,r){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.getters["busy"],e.abrupt("return",new dn.a(function(e){var i=new Image;i.onload=Object(pr["a"])(regeneratorRuntime.mark(function n(){var s,o;return regeneratorRuntime.wrap(function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,s=pn.imageDataFromImageSrc(i),n.next=4,t.dispatch("imageData",s);case 4:return t.commit("_imageFile",r),n.next=7,hn.getFieldOfViewAsync(i);case 7:o=n.sent,o?(t.commit("imageFieldOfView",o),t.commit("imageFieldOfViewInitial",o)):(t.commit("imageFieldOfView",45),t.commit("imageFieldOfViewInitial",45)),i.onload=null,URL.revokeObjectURL(i.src);case 11:return n.prev=11,a||t.commit("busy",!1),e(),n.finish(11);case 15:case"end":return n.stop()}},n,this,[[0,,11,15]])})),r&&(a||t.commit("busy",!0),i.src=URL.createObjectURL(r))}));case 2:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}(),imageFiles:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t,r){var a,i,n,s,o,u,c,l,d;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:for(e.prev=0,t.commit("busy",!0),a=[],i=!0,n=!1,s=void 0,e.prev=6,o=m()(r);!(i=(u=o.next()).done);i=!0)c=u.value,a.push(c);e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](6),n=!0,s=e.t0;case 14:e.prev=14,e.prev=15,i||null==o.return||o.return();case 17:if(e.prev=17,!n){e.next=20;break}throw s;case 20:return e.finish(17);case 21:return e.finish(14);case 22:l=0;case 23:if(!(l<a.length)){e.next=30;break}return d=a[l],e.next=27,t.dispatch("imageFile",d);case 27:l++,e.next=23;break;case 30:return e.prev=30,t.commit("busy",!1),e.finish(30);case 33:case"end":return e.stop()}},e,this,[[0,,30,33],[6,10,14,22],[15,,17,21]])}));function t(t,r){return e.apply(this,arguments)}return t}(),removeAllOrSelected:function(e){0==e.getters["indicesSelected"].length?e.commit("removeAll"):e.commit("removeSelected")},reloadFilesFromDisc:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.getters["imageFileArray"],t.commit("removeAll"),e.next=4,t.dispatch("imageFiles",r);case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),reloadFilesFromDiscIf:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(0!=t.getters["imageFileArray"].length){e.next=2;break}return e.abrupt("return");case 2:if(0!=t.getters["imageDataArray"].length&&null!=t.getters["imageDataArray"][0]){e.next=5;break}return e.next=5,t.dispatch("reloadFilesFromDisc");case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},Un={namespaced:!0,state:En,getters:Bn,mutations:Ln,actions:qn},zn=r("21a6"),Wn=(r("6aa2"),z()()),Kn=z()(),Gn="load",Yn="init",Hn="params",Xn="match",Jn="reset",Zn="alignedImage",Qn="blendedImage",es="stitchedImage",ts="stitch",rs="stitchedImageWithKeyPoints",as="blendedImagePolygonFixedImage",is="blendedImagePolygonMovingImage",ns="blendedImageFloodFillFixedImage",ss="blendedImageFloodFillMovingImage",os="sideBySideImageGood",us="sideBySideImageGoodInliers",cs="keyPointsFixedImageGood",ls="keyPointsMovingImageGood",ms="keyPointsFixedImageInlier",ds="keyPointsMovingImageInlier",ps="detCompareImage",gs="cInfo",hs="cError",fs="cLog",ys="cAssert",vs="resize",bs="multiStitchInit",ws="multiStitchReset",Is="multiStitchParams",_s="multiStitch",xs="multiStitchStart",ks="multiStitchNext",Ss=function(){function e(t){if(Object(L["a"])(this,e),t!=Kn)throw"Cannot construct Singleton!";this._init()}return Object(q["a"])(e,[{key:"_init",value:function(){var e=this;this.worker=new Worker("js/imgalign.worker.js"),this.worker.onmessage=function(t){return e._handleMessage(t)},this.worker.onerror=function(t){return e._handleError(t)}}},{key:"reInitWorker",value:function(){this.__messageDone=null,this.worker.terminate(),this.__messageAbort&&this.__messageAbort(),this.__messageAbort=null,this._init()}},{key:"postWorkerMessageAsync",value:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t){var r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new dn.a(function(e,a){r.__messageDone=function(){e.apply(void 0,arguments)},r.__messageAbort=function(){a("ignore")},r.__error=function(e){return a(e)},r.worker.postMessage(t)}));case 1:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"resetWorkerDataAsync",value:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.postWorkerMessageAsync({msg:Jn});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"resetMultiStitchWorkerDataAsync",value:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.postWorkerMessageAsync({msg:ws});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"loadAsync",value:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.postWorkerMessageAsync({msg:Gn,payload:{workerFileName:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"_initAsync",value:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.postWorkerMessageAsync({msg:Yn,payload:{fixedImage:t,movingImage:r}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"_multiStitchInitAsync",value:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.postWorkerMessageAsync({msg:bs,payload:{images:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"_matchAsync",value:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.postWorkerMessageAsync({msg:Xn,payload:{fixedImagePolygonPts:t,movingImagePolygonPts:r}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"_setParams",value:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.postWorkerMessageAsync({msg:Hn,payload:t.filter(function(e){return 301!=e.id})});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"_multiStitchSetParams",value:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.postWorkerMessageAsync({msg:Is,payload:t.filter(function(e){return 301!=e.id})});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"_multiStitch",value:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.postWorkerMessageAsync({msg:_s,payload:{fieldsOfView:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"_multiStitchStart",value:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.postWorkerMessageAsync({msg:xs,payload:{fieldsOfView:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"_compareAsync",value:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t,r,a,i){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.postWorkerMessageAsync({msg:ps,payload:{imageType:t,detTypesArr:r,fixedImagePolygonPts:a,movingImagePolygonPts:i}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(t,r,a,i){return e.apply(this,arguments)}return t}()},{key:"compare_requestImageAsync",value:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t,r,a,i,n,s,o){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._initAsync(t,r);case 2:return e.next=4,this._setParams(a);case 4:return e.next=6,this._compareAsync(i,n,s,o);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));function t(t,r,a,i,n,s,o){return e.apply(this,arguments)}return t}()},{key:"stitchAsync",value:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t,r,a,i,n,s,o,u,c,l,m,d){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.postWorkerMessageAsync({msg:ts,payload:{projectionType1:t,projectionType2:r,seamBlend:a,colorTransfer:i,fieldOfViewFixedImage:n,fieldOfViewMovingImage:s,calcRotationYaw2:o,calcRotationPitch2:u,yaw1:c,pitch1:l,yaw2:m,pitch2:d}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(t,r,a,i,n,s,o,u,c,l,m,d){return e.apply(this,arguments)}return t}()},{key:"matchAsync",value:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t,r,a,i,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._initAsync(t,r);case 2:return e.next=4,this._setParams(a);case 4:return e.next=6,this._matchAsync(i,n);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));function t(t,r,a,i,n){return e.apply(this,arguments)}return t}()},{key:"multiStitch",value:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t,r,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._multiStitchInitAsync(t);case 2:return e.next=4,this._multiStitchSetParams(a);case 4:return e.next=6,this._multiStitch(r);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));function t(t,r,a){return e.apply(this,arguments)}return t}()},{key:"multiStitchRecompute",value:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._multiStitchSetParams(r);case 2:return e.next=4,this._multiStitch(t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"multiStitchStart",value:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t,r,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._multiStitchInitAsync(t);case 2:return e.next=4,this._multiStitchSetParams(a);case 4:return e.next=6,this._multiStitchStart(r);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));function t(t,r,a){return e.apply(this,arguments)}return t}()},{key:"multiStitchNext",value:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.postWorkerMessageAsync({msg:ks});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"multiStitchStartRecompute",value:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._multiStitchSetParams(r);case 2:return e.next=4,this._multiStitchStart(t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"requestAlignedImageAsync",value:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.postWorkerMessageAsync({msg:Zn});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"requestBlendedImageAsync",value:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.postWorkerMessageAsync({msg:Qn,payload:{weight:t,doOverlay:r}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"requestStitchedImageAsync",value:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.postWorkerMessageAsync({msg:es,payload:{weight:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"requestStitchedImageWithKeyPointsAsync",value:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.postWorkerMessageAsync({msg:rs,payload:{weight:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"requestBlendedImagePolygonAsync",value:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t,r,a,i){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.postWorkerMessageAsync({msg:i?as:is,payload:{weight:t,doOverlay:r,polygon:a,isFixedImage:i}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(t,r,a,i){return e.apply(this,arguments)}return t}()},{key:"requestBlendedImageFloodFillAsync",value:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t,r,a,i,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.postWorkerMessageAsync({msg:n?ns:ss,payload:{weight:t,doOverlay:r,pts:a,floodFillTolerances:i,isFixedImage:n}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(t,r,a,i,n){return e.apply(this,arguments)}return t}()},{key:"requestSideBySideImageGoodAsync",value:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.postWorkerMessageAsync({msg:os});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"requestSideBySideImageGoodInliersAsync",value:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.postWorkerMessageAsync({msg:us});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"requestKeyPointsGoodFixedImageAsync",value:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.postWorkerMessageAsync({msg:cs});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"requestKeyPointsGoodMovingImageAsync",value:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.postWorkerMessageAsync({msg:ls});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"requestKeyPointsInlierFixedImageAsync",value:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.postWorkerMessageAsync({msg:ms});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"requestKeyPointsInlierMovingImageAsync",value:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.postWorkerMessageAsync({msg:ds});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"requestResizedImageAsync",value:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t,r,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.postWorkerMessageAsync({msg:vs,payload:{image:t,width:r,height:a}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(t,r,a){return e.apply(this,arguments)}return t}()},{key:"_messageDone",value:function(){this.__messageDone&&(this.__messageDone.apply(this,arguments),this.__messageDone=null)}},{key:"_getImageData",value:function(e){if(0==e.width||0==e.height)return null;var t=new Uint8ClampedArray(e.buf,e.byteOffset,e.bufLen);return new ImageData(t,e.width,e.height)}},{key:"_messageImage",value:function(e){this._messageDone(this._getImageData(e))}},{key:"_messageCompareImage",value:function(e){this._messageDone({imageData:this._getImageData(e),timeUsedArr:e.additionalData.timeUsedArr,keyPointsCountArr:e.additionalData.keyPointsCountArr})}},{key:"_messageStitchedImage",value:function(e){this._messageDone({imageData:this._getImageData(e),fieldOfView:e.additionalData})}},{key:"_messageMultiStitchImage",value:function(e){this._messageDone({imageData:this._getImageData(e),imageDataSmall:e.imageDataSmall?this._getImageData(e.imageDataSmall):null,stitchedImagesN:e.additionalData})}},{key:"_messageMultiStitchImageStart",value:function(e){this._messageDone({imageData:this._getImageData(e),stitchIndices:e.additionalData})}},{key:"_handleMessage",value:function(e){if(!this._handleLogMessages(e.data)){if("done"!=e.data.info)throw new Error("Unknown message info: ".concat(e.data.info));switch(e.data.msg){case Gn:case Yn:case Hn:case Xn:case Jn:case bs:case ws:case Is:this._messageDone(e.data.payload);break;case Zn:case Qn:case es:case rs:case as:case is:case ns:case ss:case os:case us:case cs:case ls:case ms:case ds:case vs:this._messageImage(e.data.payload);break;case xs:this._messageMultiStitchImageStart(e.data.payload);break;case ps:this._messageCompareImage(e.data.payload);break;case ts:this._messageStitchedImage(e.data.payload);break;case _s:case ks:this._messageMultiStitchImage(e.data.payload);break;default:}console.log("[WorkerClient][_handleMessage][".concat(e.data.msg,"][success]"))}}},{key:"_handleError",value:function(e){if(this.__error)this.__error(e),this.__error=null;else{var t="Line: "+(e.lineno?e.lineno:"unknown "),r="File: "+(e.filename?e.filename:"unknown "),a="Message: "+(e.message?e.message:"unknown");console.log("[WorkerClient][_handleError]: "+t+r+a)}}},{key:"_handleLogMessages",value:function(e){var t,r,a,i,n=e.msg,s=e.info,o=e.payload;function u(e,t){return"extern"==e?["opencv"].concat(Object(d["a"])(t)):t}switch(n){case fs:return(t=console).log.apply(t,Object(d["a"])(u(s,o))),!0;case gs:return(r=console).info.apply(r,Object(d["a"])(u(s,o))),!0;case hs:return(a=console).error.apply(a,Object(d["a"])(u(s,o))),!0;case ys:return(i=console).assert.apply(i,Object(d["a"])(u(s,o))),!0;default:return!1}}}],[{key:"instance",get:function(){return this[Wn]||(this[Wn]=new e(Kn)),this[Wn]}}]),e}(),Ds=r("308d"),Ts=r("6bb5"),Os=r("4e2b"),Vs=r("7618"),As=function(){function e(){Object(L["a"])(this,e),this.params=[{id:pe.detType.id,type:fe.discrete,defaultValue:pe.detType_sift.id,value:pe.detType_sift.id,values:this.getDiscreteParams(pe.detType.id)},{id:pe.desType.id,type:fe.discrete,defaultValue:pe.desType_sift.id,value:pe.desType_sift.id,values:this.getDiscreteParams(pe.desType.id)},{id:pe.matcherType.id,type:fe.discrete,defaultValue:pe.matcherType_auto.id,value:pe.matcherType_auto.id,values:this.getDiscreteParams(pe.matcherType.id)},{id:pe.transformFinderType.id,type:fe.discrete,defaultValue:pe.transformFinderType_ransac.id,value:pe.transformFinderType_ransac.id,values:this.getDiscreteParams(pe.transformFinderType.id)},{id:pe.compareDetTypes.id,type:fe.multiple,defaultValue:[pe.detType_sift.id,pe.detType_orb.id,pe.detType_akaze.id].toString(),value:[pe.detType_sift.id,pe.detType_orb.id,pe.detType_akaze.id].toString(),values:this.getDiscreteParams(pe.detType.id)},{id:pe.compareImageType.id,type:fe.discrete,defaultValue:pe.imageFirst.id,value:pe.imageFirst.id,values:this.getDiscreteParams(pe.compareImageType.id)},{id:pe.imageCap.id,type:fe.rangeSquareRoot,defaultValue:3e5,value:3e5,range:{min:1e4,max:9e6}},{id:pe.imageCapInput.id,type:fe.rangeSquareRoot,defaultValue:35e4,value:35e4,range:{min:1e4,max:16e6}},{id:pe.floodFillTolerance.id,type:fe.range,defaultValue:20,value:20,range:{min:0,max:255}},{id:pe.alignSelectionOverlay.id,type:fe.bool,defaultValue:1,value:1},{id:pe.logInfoEnabled.id,type:fe.bool,defaultValue:0,value:0},{id:pe.logErrorEnabled.id,type:fe.bool,defaultValue:1,value:1},{id:pe.logAssertEnabled.id,type:fe.bool,defaultValue:1,value:1},{id:pe.logExternEnabled.id,type:fe.bool,defaultValue:0,value:0},{id:pe.sift_featuresN.id,type:fe.number,value:0,defaultValue:0},{id:pe.sift_octaveLayersN.id,type:fe.number,value:3,defaultValue:3},{id:pe.sift_contrastThresh.id,type:fe.number,value:.04,defaultValue:.04},{id:pe.sift_edgeThresh.id,type:fe.number,value:10,defaultValue:10},{id:pe.sift_sigma.id,type:fe.number,value:1.6,defaultValue:1.6},{id:pe.surf_hessianThresh.id,type:fe.number,value:100,defaultValue:100},{id:pe.surf_octavesN.id,type:fe.number,value:4,defaultValue:4},{id:pe.surf_octaveLayersN.id,type:fe.number,value:3,defaultValue:3},{id:pe.surf_extended.id,type:fe.bool,value:0,defaultValue:0},{id:pe.orb_featuresN.id,type:fe.number,value:500,defaultValue:500},{id:pe.orb_scale.id,type:fe.number,value:1.2,defaultValue:1.2},{id:pe.orb_levelsN.id,type:fe.number,value:8,defaultValue:8},{id:pe.orb_edgeThresh.id,type:fe.number,value:31,defaultValue:31},{id:pe.orb_patchSize.id,type:fe.number,value:31,defaultValue:31},{id:pe.brisk_thresh.id,type:fe.number,value:30,defaultValue:30},{id:pe.brisk_octavesN.id,type:fe.number,value:3,defaultValue:3},{id:pe.brisk_patternScale.id,type:fe.number,value:1,defaultValue:1},{id:pe.kaze_thresh.id,type:fe.number,value:.001,defaultValue:.001},{id:pe.kaze_octavesN.id,type:fe.number,value:4,defaultValue:4},{id:pe.kaze_octaveLayersN.id,type:fe.number,value:4,defaultValue:4},{id:pe.akaze_thresh.id,type:fe.number,value:.001,defaultValue:.001},{id:pe.akaze_octavesN.id,type:fe.number,value:4,defaultValue:4},{id:pe.akaze_octaveLayersN.id,type:fe.number,value:4,defaultValue:4},{id:pe.matchFilterSpreadAuto.id,type:fe.bool,value:1,defaultValue:1},{id:pe.matchFilterSpreadFactor.id,type:fe.number,value:2.2,defaultValue:2.2},{id:pe.matchFilterMinMatchesToRetain.id,type:fe.number,value:300,defaultValue:300},{id:pe.matchFilterMaxMatchesToRetain.id,type:fe.number,value:800,defaultValue:800},{id:pe.stitch_projection.id,type:fe.discrete,defaultValue:pe.stitch_projectionTypeNone.id,value:pe.stitch_projectionTypeNone.id,values:this.getDiscreteParams(pe.stitch_projection.id)},{id:pe.stitch_projection2.id,type:fe.discrete,defaultValue:pe.stitch_projectionTypeNone.id,value:pe.stitch_projectionTypeNone.id,values:this.getDiscreteParams(pe.stitch_projection2.id)},{id:pe.stitch_seamBlend.id,type:fe.bool,value:1,defaultValue:1},{id:pe.stitch_colorTransfer.id,type:fe.bool,value:0,defaultValue:0},{id:pe.stitch_fieldOfView1.id,type:fe.numberAuto,value:45,defaultValue:45},{id:pe.stitch_yaw1.id,type:fe.numberAuto,value:0,defaultValue:0},{id:pe.stitch_pitch1.id,type:fe.numberAuto,value:0,defaultValue:0},{id:pe.stitch_fieldOfView2.id,type:fe.numberAuto,value:45,defaultValue:45},{id:pe.stitch_yaw2.id,type:fe.numberAuto,value:0,defaultValue:0,flagId:pe.stitch_yaw2Auto.id},{id:pe.stitch_pitch2.id,type:fe.numberAuto,value:0,defaultValue:0,flagId:pe.stitch_pitch2Auto.id},{id:pe.stitch_yaw2Auto.id,type:fe.bool,value:1,defaultValue:1},{id:pe.stitch_pitch2Auto.id,type:fe.bool,value:1,defaultValue:1},{id:pe.multiStitch_projectionType.id,type:fe.discrete,value:pe.stitch_projectionTypeNone.id,defaultValue:pe.stitch_projectionTypeNone.id,values:this.getDiscreteParams(pe.multiStitch_projectionType.id)},{id:pe.multiStitch_rectifyPerspective.id,type:fe.bool,value:0,defaultValue:0},{id:pe.multiStitch_rectifyStretch.id,type:fe.bool,value:0,defaultValue:0},{id:pe.multiStitch_maxRectangle.id,type:fe.bool,value:0,defaultValue:0},{id:pe.multiStitch_camEstimate.id,type:fe.bool,value:1,defaultValue:1},{id:pe.multiStitch_bundleAdjust.id,type:fe.discrete,value:pe.bat_none.id,defaultValue:pe.bat_none.id,values:this.getDiscreteParams(pe.multiStitch_bundleAdjust.id)},{id:pe.multiStitch_waveCorrection.id,type:fe.discrete,value:pe.waveCorrectionType_N.id,defaultValue:pe.waveCorrectionType_N.id,values:this.getDiscreteParams(pe.multiStitch_waveCorrection.id)},{id:pe.multiStitch_seamBlend.id,type:fe.bool,value:1,defaultValue:1},{id:pe.multiStitch_seamFinderType.id,type:fe.discrete,value:pe.seamFinderType_Vornoi.id,defaultValue:pe.seamFinderType_Vornoi.id,values:this.getDiscreteParams(pe.multiStitch_seamFinderType.id)},{id:pe.multiStitch_blendStrength.id,type:fe.range,defaultValue:5,value:5,range:{min:0,max:100}},{id:pe.multiStitch_colorTransfer.id,type:fe.bool,value:0,defaultValue:0},{id:pe.multiStitch_exposureCompensator.id,type:fe.bool,value:0,defaultValue:0},{id:pe.multiStitch_calcCenterImage.id,type:fe.bool,value:1,defaultValue:1},{id:pe.multiStitch_warpFirst.id,type:fe.bool,value:0,defaultValue:0},{id:pe.multiStitch_confidenceThresh.id,type:fe.range,defaultValue:.4,value:.4,range:{min:0,max:3},step:.01},{id:pe.multiStitch_inputImagesMatchReach.id,type:fe.range,defaultValue:0,value:0,range:{min:1,max:40,maxReplace:0},step:1},{id:pe.multiStitch_limitResultPreview.id,type:fe.rangeSquareRoot,defaultValue:8e5,value:8e5,range:{min:1e4,max:4e6}},{id:pe.multiStitch_limitInputView.id,type:fe.rangeSquareRoot,defaultValue:1e5,value:1e5,range:{min:1e4,max:1e6}},{id:pe.multiStitch_disposeInputImages.id,type:fe.bool,value:0,defaultValue:0},{id:pe.multiStitch_limitLiveStitchingPreview.id,type:fe.rangeSquareRoot,defaultValue:2e5,value:2e5,range:{min:1e4,max:1e6}},{id:pe.multiStitch_preserveAlphaChannelValue.id,type:fe.bool,value:0,defaultValue:0},{id:pe.multiStitch_liveUpdateCycle.id,type:fe.range,defaultValue:5,value:5,range:{min:1,max:20}},{id:pe.openCvType.id,type:fe.discrete,value:pe.openCvType_small.id,defaultValue:pe.openCvType_small.id,values:this.getDiscreteParams(pe.openCvType.id)}]}return Object(q["a"])(e,[{key:"getDiscreteParams",value:function(e){return H()(pe).filter(function(t){return pe[t].groupId==e||pe[t].groupId2&&pe[t].groupId2==e||pe[t].groupId3&&pe[t].groupId3==e}).map(function(e){return pe[e]})}},{key:"getParamDefaultValueById",value:function(e){return this._getParamById(e).defaultValue}},{key:"getParamValueById",value:function(e){return this._getParamById(e).value}},{key:"getParamValuesById",value:function(e){var t=this._getParamById(e);return this._throwIfNotMultiple(t),this._valueToArray(t.value)}},{key:"getParamDefaultValuesById",value:function(e){var t=this._getParamById(e);return this._throwIfNotMultiple(t),this._valueToArray(t.defaultValue)}},{key:"getParamValueNamesById",value:function(e){var t=this.getParamValuesById(e);return t.map(function(e){return he.getParamName(e)})}},{key:"setParamValueById",value:function(e,t){var r=this._getParamById(e);r.value=t}},{key:"getIdArr",value:function(){return this.params.map(function(e){return e.id})}},{key:"getIdValueArr",value:function(){return this.params.map(function(e){return{id:e.id,value:e.value}})}},{key:"getIdValueArrExcludingDefaults",value:function(){return this.params.filter(function(e){return e.value!=e.defaultValue}).map(function(e){return{id:e.id,value:e.value}})}},{key:"getIdValueDefaultArr",value:function(){return this.params.map(function(e){return{id:e.id,value:e.value,defaultValue:e.defaultValue}})}},{key:"setByIdValueArr",value:function(e){var t=this;e.forEach(function(e){t.setParamValueById(e.id,e.value)})}},{key:"removeInvalidParams",value:function(e){var t=this;return e=e.filter(function(e){var r=t.params.find(function(t){return t.id==e.id});if(!r)return!1;if(r.type==fe.discrete){var a=t.getDiscreteParams(r.id);if(!a||!a.find(function(t){return t.id==e.value}))return!1}else if((r.type==fe.range||r.type==fe.rangeSquareRoot)&&(e.value<r.range.min||e.value>r.range.max))return!1;return!0}),e}},{key:"equals",value:function(e){if(null==e)return!this.params||0==this.params.length;if(e.length!=this.params.length)return!1;for(var t=0;t<e.length;++t){if(e[t].id!=this.params[t].id)return!1;if(e[t].value!=this.params[t].value)return!1}return!0}},{key:"getRelatingIdValue",value:function(e,t){switch(e){case pe.detType.id:switch(t){case pe.detType_sift.id:return{id:pe.desType.id,value:pe.desType_sift.id};case pe.detType_surf.id:return{id:pe.desType.id,value:pe.desType_surf.id};case pe.detType_orb.id:return{id:pe.desType.id,value:pe.desType_orb.id};case pe.detType_brisk.id:return{id:pe.desType.id,value:pe.desType_brisk.id};case pe.detType_kaze.id:return{id:pe.desType.id,value:pe.desType_kaze.id};case pe.detType_akaze.id:return{id:pe.desType.id,value:pe.desType_akaze.id};default:return null}default:return null}}},{key:"getCurrentDetTypeGroupKey",value:function(){var e=this.params.find(function(e){return e.id==pe.detType.id}),t=H()(pe).find(function(t){return pe[t].id==e.value}),r=pe[t].name;return H()(Z).find(function(e){return Z[e].name==r})}},{key:"paramsByGroupKey",value:function(e){var t=this;return H()(pe).filter(function(t){return pe[t].groupId==Z[e].id||pe[t].groupId&&pe[t].groupId==Z[e].id}).map(function(e){return t.params.find(function(t){return t.id==pe[e].id})})}},{key:"copyValuesTo",value:function(e){console.assert(this.params.length==e.params.length);for(var t=0;t<this.params.length;++t)console.assert(this.params[t].id===e.params[t].id),e.params[t].value!=this.params[t].value&&(e.params[t].value=this.params[t].value)}},{key:"getParamById",value:function(e){return this._getParamById(e)}},{key:"_getParamById",value:function(e){var t=this.params.find(function(t){return t.id==e});if(!t)throw new Error("No param with id ${id} exists");return t}},{key:"_throwIfNotMultiple",value:function(e){if(e.type!=fe.multiple)throw new Error("Param id/name ".concat(e.id,"/").concat(e.name," is not capable"))}},{key:"_valueToArray",value:function(e){return e?isNaN(Number(e))?e.split(",").map(function(e){return+e}):[+e]:[]}}]),e}(),Cs=function(){function e(t,r){if(Object(L["a"])(this,e),this._imageData=null,this._imageDataUrl=null,this._success=null,this._time=0,this._name=t,this._settings=new As,null==r||"function"==!Object(Vs["a"])(r))throw new Error("Need a valid conversion function");this._imageDataToUrlFn=r}return Object(q["a"])(e,[{key:"setImageData",value:function(e,t){this._imageData=e,this._imageDataUrl=e?t?this._imageDataToUrlFn(t):this._imageDataToUrlFn(e):null}},{key:"name",get:function(){return this.name}},{key:"imageData",get:function(){return this._imageData},set:function(e){this._imageData=e,this._imageDataUrl=e?this._imageDataToUrlFn(e):null}},{key:"imageDataUrl",get:function(){return this._imageDataUrl}},{key:"imageDataValid",get:function(){return this._imageData&&this._imageData.width>0&&this._imageData.height>0}},{key:"success",get:function(){return this._success},set:function(e){this._success=e}},{key:"time",get:function(){return this._time},set:function(e){this._time=e}},{key:"settings",get:function(){return this._settings},set:function(e){this._settings=e}}]),e}(),Rs=function(e){function t(e,r){var a;return Object(L["a"])(this,t),a=Object(Ds["a"])(this,Object(Ts["a"])(t).call(this,e,r)),a._matcherImageType=ca.aligned,a._matcherImageBlend=.5,a}return Object(Os["a"])(t,e),Object(q["a"])(t,[{key:"setDefault",value:function(){this._matcherImageType=ca.aligned}},{key:"matcherImageType",get:function(){return this._matcherImageType},set:function(e){this._matcherImageType=e}},{key:"matcherImageBlend",get:function(){return this._matcherImageBlend},set:function(e){this._matcherImageBlend=e}}]),t}(Cs),js=function(e){function t(e,r){var a;return Object(L["a"])(this,t),a=Object(Ds["a"])(this,Object(Ts["a"])(t).call(this,e,r)),a._compareTimeUsedPerDet=[],a._compareKeyPointsCountPerDet=[],a}return Object(Os["a"])(t,e),Object(q["a"])(t,[{key:"compareTimeUsedPerDet",get:function(){return this._compareTimeUsedPerDet},set:function(e){this._compareTimeUsedPerDet=e}},{key:"compareKeyPointsCountPerDet",get:function(){return this._compareKeyPointsCountPerDet},set:function(e){this._compareKeyPointsCountPerDet=e}}]),t}(Cs),$s=function(e){function t(e,r){var a;return Object(L["a"])(this,t),a=Object(Ds["a"])(this,Object(Ts["a"])(t).call(this,e,r)),a._projected=!1,a._fieldOfView=null,a}return Object(Os["a"])(t,e),Object(q["a"])(t,[{key:"projected",get:function(){return this._projected},set:function(e){this._projected=e}},{key:"fieldOfView",get:function(){return this._fieldOfView},set:function(e){this._fieldOfView=e}}]),t}(Cs),Ps=function(e){function t(e,r){var a;return Object(L["a"])(this,t),a=Object(Ds["a"])(this,Object(Ts["a"])(t).call(this,e,r)),a._fieldOfView=null,a}return Object(Os["a"])(t,e),Object(q["a"])(t,[{key:"fieldOfView",get:function(){return this._fieldOfView},set:function(e){this._fieldOfView=e}}]),t}(Cs),Fs={imageResults:(Tn={},Object(c["a"])(Tn,Gr,new Rs(Gr,pn.imageSrcFromImageData)),Object(c["a"])(Tn,Yr,new js(Yr,pn.imageSrcFromImageData)),Object(c["a"])(Tn,Hr,new $s(Hr,pn.imageSrcFromImageData)),Object(c["a"])(Tn,Xr,new Ps(Hr,pn.imageSrcFromImageData)),Tn)},Ns={imageData:function(e){return function(t){return e.imageResults[t].imageData}},imageDataUrl:function(e){return function(t){return e.imageResults[t].imageDataUrl}},imageDataValid:function(e){return function(t){return e.imageResults[t].imageDataValid}},success:function(e){return function(t){return e.imageResults[t].success}},time:function(e){return function(t){return e.imageResults[t].time}},settings:function(e){return function(t){return e.imageResults[t].settings}},matcherImageType:function(e){return e.imageResults[Gr].matcherImageType},matcherImageBlend:function(e){return e.imageResults[Gr].matcherImageBlend},compareTimeUsedPerDet:function(e){return e.imageResults[Yr].compareTimeUsedPerDet},compareKeyPointsCountPerDet:function(e){return e.imageResults[Yr].compareKeyPointsCountPerDet},stitcherProjected:function(e){return e.imageResults[Hr].projected},stitcherFieldOfView:function(e){return e.imageResults[Hr].fieldOfView},multiStitcherFieldOfView:function(e){return e.imageResults[Xr].fieldOfView}},Ms={imageData:function(e,t){var r=t.name,a=t.imageData,i=t.imageDataSmall;a?e.imageResults[r].setImageData(a,i):e.imageResults[r].imageData=null},success:function(e,t){var r=t.name,a=t.success;e.imageResults[r].success=a},time:function(e,t){var r=t.name,a=t.time;e.imageResults[r].time=a},settings:function(e,t){var r=t.name,a=t.settings;a&&a.copyValuesTo(e.imageResults[r].settings)},matcherImageType:function(e,t){e.imageResults[Gr].matcherImageType=t},matcherImageTypeSetDefault:function(e){e.imageResults[Gr].setDefault()},matcherImageBlend:function(e,t){e.imageResults[Gr].matcherImageBlend=t},compareTimeUsedPerDet:function(e,t){e.imageResults[Yr].compareTimeUsedPerDet=t},compareKeyPointsCountPerDet:function(e,t){e.imageResults[Yr].compareKeyPointsCountPerDet=t},stitcherProjected:function(e,t){return e.imageResults[Hr].projected=t},stitcherFieldOfView:function(e,t){return e.imageResults[Hr].fieldOfView=t},multiStitcherFieldOfView:function(e,t){return e.imageResults[Xr].fieldOfView=t}},Es={},Bs={namespaced:!0,state:Fs,getters:Ns,mutations:Ms,actions:Es},Ls={loadStartTime:null,loadTime:null,ready:!1,error:null,busyImage:!1,busyCompute:!1,busyLoad:!1,currentActionInfo:"",lastCompletedActionTime:0,currentActionStartTime:null,currentComputeTime:null,currentLoadingTime:null},qs={ready:function(e){return e.ready},loadTime:function(e){return e.loadTime},error:function(e){return e.error},busy:function(e){return e.busyImage||e.busyCompute||e.busyLoad},busyImage:function(e){return e.busyImage},busyCompute:function(e){return e.busyCompute},busyLoad:function(e){return e.busyLoad},currentActionInfo:function(e){return e.currentActionInfo},currentActionTime:function(e){return e.currentActionInfo&&e.currentActionStartTime?new Date-e.currentActionStartTime:null},lastCompletedActionTime:function(e){return e.lastCompletedActionTime},currentComputeTime:function(e){return e.currentComputeTime},currentLoadingTime:function(e){return e.currentLoadingTime}},Us={_init:function(e){e.ready||(e.loadStartTime=new Date)},_ready:function(e,t){t&&e.loadStartTime&&(e.loadTime=new Date-e.loadStartTime),e.ready=t,console.log("[store][worker][mutation][ready][time][ms]: ".concat(e.loadTime,", ").concat(t))},error:function(e,t){e.error=t},_busyCompute:function(e,t){e.busyCompute=t},_busyImage:function(e,t){e.busyImage=t},_busyLoad:function(e,t){e.busyLoad=t},currentActionInfo:function(e,t){e.currentActionInfo=t,t?e.currentActionStartTime=new Date:e.currentActionStartTime&&(e.lastCompletedActionTime=new Date-e.currentActionStartTime,e.currentActionStartTime=null)},currentComputeTime:function(e,t){e.currentComputeTime=t},currentLoadingTime:function(e,t){e.currentLoadingTime=t}},zs={load:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t){var r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!t.getters["ready"]){e.next=2;break}return e.abrupt("return");case 2:if(!t.getters["busy"]){e.next=4;break}return e.abrupt("return");case 4:return t.commit("_busyLoad",!0),t.commit("_init",t),t.commit("currentActionInfo","Loading opencv"),e.prev=7,r=t.rootGetters["settings/param"](pe.openCvType.id),a="opencv_3_4_custom_Oz.js",r==pe.openCvType_fast.id&&(a="opencv_3_4_custom_O3.js"),e.next=13,Ss.instance.loadAsync(a);case 13:t.commit("_ready",!0),e.next=20;break;case 16:e.prev=16,e.t0=e["catch"](7),console.log("[store][worker][load][Error]",e.t0),t.commit("error",e.t0);case 20:return e.prev=20,t.commit("currentActionInfo",""),t.commit("_busyLoad",!1),e.finish(20);case 24:case"end":return e.stop()}},e,this,[[7,16,20,24]])}));function t(t){return e.apply(this,arguments)}return t}(),reload:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return Ss.instance.reInitWorker(),t.commit("error",null),t.commit("_busyCompute",!1),t.commit("_ready",!1),e.next=6,t.dispatch("load");case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),error:function(e,t){e.commit("error",t)},resetWorkerData:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!t.getters["busy"]){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Ss.instance.resetWorkerDataAsync();case 4:t.commit("results/success",{name:Gr,success:0}),t.commit("error",null);case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),multiStitchResetWorkerData:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!t.getters["busy"]){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Ss.instance.resetMultiStitchWorkerDataAsync();case 4:t.commit("results/success",{name:Xr,success:0}),t.commit("error",null);case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),_requestImage:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t,r){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!t.getters["busy"]){e.next=2;break}throw new Error("Cannot request image while busy");case 2:if(t.getters["results/success"](Gr)){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,t.commit("_busyImage",!0),t.commit("error",null),e.next=9,r();case 9:a=e.sent,t.commit("results/imageData",{name:Gr,imageData:a}),e.next=19;break;case 13:e.prev=13,e.t0=e["catch"](4),console.log("[store][worker][generic][Error]",e.t0),t.commit("error",e.t0),t.commit("results/imageData",{name:Gr,imageData:null}),t.commit("results/success",{name:Gr,success:0});case 19:return e.prev=19,t.commit("currentActionInfo",""),t.commit("_busyImage",!1),e.finish(19);case 23:case"end":return e.stop()}},e,this,[[4,13,19,23]])}));function t(t,r){return e.apply(this,arguments)}return t}(),computeMultiStitchedImage:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t,r){var a,i,n,s,o,u,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=r.images,i=r.fieldsOfView,n=r.settings,!t.getters["busy"]){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,t.commit("_busyCompute",!0),t.commit("error",null),t.commit("currentActionInfo","Stitching"),s=new Date,e.next=10,Ss.instance.multiStitch(a,i,n.getIdValueArrExcludingDefaults());case 10:o=e.sent,u=o.imageData,c=o.stitchedImagesN,t.commit("results/imageData",{name:Xr,imageData:u}),t.commit("results/time",{name:Xr,time:new Date-s}),t.commit("results/success",{name:Xr,success:c==a.length?1:0}),e.next=24;break;case 18:e.prev=18,e.t0=e["catch"](3),console.log("[store][worker][computeStitchedImage][Error]",e.t0),t.commit("error",e.t0),t.commit("results/imageData",{name:Xr,imageData:null}),t.commit("results/success",{name:Xr,success:0});case 24:return e.prev=24,t.commit("currentActionInfo",""),t.commit("_busyCompute",!1),e.finish(24);case 28:case"end":return e.stop()}},e,this,[[3,18,24,28]])}));function t(t,r){return e.apply(this,arguments)}return t}(),computeMultiStitchImageInSteps:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t,r){var a,i,n,s,o,u,c,l,m,d,p,g,h,f,y,v;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=r.images,i=r.fieldsOfView,n=r.settings,!t.getters["busy"]){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,t.commit("_busyCompute",!0),t.commit("error",null),t.commit("currentActionInfo","Detecting Features"),s=new Date,e.next=10,Ss.instance.multiStitchStart(a,i,n.getIdValueArrExcludingDefaults());case 10:for(o=e.sent,u=o.imageData,c=o.stitchIndices,l=t.rootGetters["settings/param"](pe.multiStitch_disposeInputImages.id),l&&t.commit("multiInput/freeImageData",null,{root:!0}),m=[],d=function(e){c.some(function(t){return t==e})||m.push(e)},p=0;p<a.length;++p)d(p);m.length>0&&(console.warn("[store][worker][computeMultiStitchImageInSteps]","No match found for image/s with index ".concat(m.map(function(e){return" "+e}))),t.commit("logs/addErrorMessage","No match found for image/s with index ".concat(m.map(function(e){return" "+e})),{root:!0})),t.commit("results/imageData",{name:Xr,imageData:u}),g=c.length-1;case 21:if(!(g>0)){e.next=31;break}return e.next=24,Ss.instance.multiStitchNext();case 24:h=e.sent,f=h.imageData,y=h.imageDataSmall,v=h.stitchedImagesN,0==v?(g=0,console.warn("[store][worker][computeMultiStitchImageInSteps]","Unexpected result from multiStitchNext")):(g=c.length-v,t.commit("results/imageData",{name:Xr,imageData:f,imageDataSmall:y})),e.next=21;break;case 31:t.commit("results/time",{name:Xr,time:new Date-s}),t.commit("results/success",{name:Xr,success:1}),e.next=40;break;case 35:e.prev=35,e.t0=e["catch"](3),console.log("[store][worker][computeMultiStitchImageInSteps][Error]",e.t0),t.commit("error",e.t0),t.commit("results/success",{name:Xr,success:0});case 40:return e.prev=40,t.commit("currentActionInfo",""),t.commit("_busyCompute",!1),e.finish(40);case 44:case"end":return e.stop()}},e,this,[[3,35,40,44]])}));function t(t,r){return e.apply(this,arguments)}return t}(),computeAlignedImage:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t,r){var a,i,n,s,o,u,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=r.fixedImage,i=r.movingImage,n=r.fixedImagePolygonPts,s=r.movingImagePolygonPts,o=r.settings,!t.getters["busy"]){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,t.commit("_busyCompute",!0),t.commit("error",null),t.commit("currentActionInfo","Feature detection"),u=new Date,e.next=10,Ss.instance.matchAsync(a,i,o.getIdValueArrExcludingDefaults(),n,s);case 10:c=e.sent,t.commit("results/time",{name:Gr,time:new Date-u}),t.commit("results/success",{name:Gr,success:c}),e.next=21;break;case 15:e.prev=15,e.t0=e["catch"](3),console.log("[store][worker][computeAlignedImage][Error]",e.t0),t.commit("error",e.t0),t.commit("results/imageData",{name:Gr,imageData:null}),t.commit("results/success",{name:Gr,success:0});case 21:return e.prev=21,t.commit("currentActionInfo",""),t.commit("_busyCompute",!1),e.finish(21);case 25:return e.next=27,t.dispatch("requestImage");case 27:case"end":return e.stop()}},e,this,[[3,15,21,25]])}));function t(t,r){return e.apply(this,arguments)}return t}(),requestImage:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r=t.getters["results/matcherImageType"],e.t0=r,e.next=e.t0===ca.aligned?4:e.t0===ca.blended?7:e.t0===ca.stitched?10:e.t0===ca.stitchedWithKeyPoints?13:e.t0===ca.selectionImage1?16:e.t0===ca.selectionImage2?24:e.t0===ca.keyPointsGoodFixed?32:e.t0===ca.keyPointsGoodMoving?35:e.t0===ca.keyPointsInlierFixed?38:e.t0===ca.keyPointsInlierMoving?41:e.t0===ca.sideBySideGood?44:e.t0===ca.sideBySideGoodInliers?47:50;break;case 4:return e.next=6,t.dispatch("requestAlignedImage");case 6:return e.abrupt("break",51);case 7:return e.next=9,t.dispatch("requestBlendedImage",{weight:t.getters["results/matcherImageBlend"],doOverlay:t.rootGetters["settings/param"](pe.alignSelectionOverlay.id)});case 9:return e.abrupt("break",51);case 10:return e.next=12,t.dispatch("requestStitchedImage",{weight:t.getters["results/matcherImageBlend"]});case 12:return e.abrupt("break",51);case 13:return e.next=15,t.dispatch("requestStitchedImageWithKeyPoints",{weight:t.getters["results/matcherImageBlend"]});case 15:return e.abrupt("break",51);case 16:if(0===t.rootGetters["input/polygonClosedPts"](Wr).length){e.next=21;break}return e.next=19,t.dispatch("requestBlendedImagePolygon",{weight:t.getters["results/matcherImageBlend"],doOverlay:t.rootGetters["settings/param"](pe.alignSelectionOverlay.id),polygon:t.rootGetters["input/polygonClosedPts"](Wr),isFixedImage:!0});case 19:e.next=23;break;case 21:return e.next=23,t.dispatch("requestBlendedImageFloodFill",{weight:t.getters["results/matcherImageBlend"],doOverlay:t.rootGetters["settings/param"](pe.alignSelectionOverlay.id),pts:t.rootGetters["input/pathPts"](Wr),floodFillTolerances:t.rootGetters["input/floodFillTolerances"](Wr),isFixedImage:!0});case 23:return e.abrupt("break",51);case 24:if(0===t.rootGetters["input/polygonClosedPts"](Kr).length){e.next=29;break}return e.next=27,t.dispatch("requestBlendedImagePolygon",{weight:t.getters["results/matcherImageBlend"],doOverlay:t.rootGetters["settings/param"](pe.alignSelectionOverlay.id),polygon:t.rootGetters["input/polygonClosedPts"](Kr),isFixedImage:!1});case 27:e.next=31;break;case 29:return e.next=31,t.dispatch("requestBlendedImageFloodFill",{weight:t.getters["results/matcherImageBlend"],doOverlay:t.rootGetters["settings/param"](pe.alignSelectionOverlay.id),pts:t.rootGetters["input/pathPts"](Kr),floodFillTolerances:t.rootGetters["input/floodFillTolerances"](Kr),isFixedImage:!1});case 31:return e.abrupt("break",51);case 32:return e.next=34,t.dispatch("requestKeyPointsGoodFixedImage");case 34:return e.abrupt("break",51);case 35:return e.next=37,t.dispatch("requestKeyPointsGoodMovingImage");case 37:return e.abrupt("break",51);case 38:return e.next=40,t.dispatch("requestKeyPointsInlierFixedImage");case 40:return e.abrupt("break",51);case 41:return e.next=43,t.dispatch("requestKeyPointsInlierMovingImage");case 43:return e.abrupt("break",51);case 44:return e.next=46,t.dispatch("requestSideBySideImageGood");case 46:return e.abrupt("break",51);case 47:return e.next=49,t.dispatch("requestSideBySideImageGoodInliers");case 49:return e.abrupt("break",51);case 50:return e.abrupt("break",51);case 51:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),requestAlignedImage:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t.commit("currentActionInfo","Requesting aligned image"),t.dispatch("_requestImage",Object(pr["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ss.instance.requestAlignedImageAsync();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})));case 2:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),requestBlendedImage:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t,r){var a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a=r.weight,i=r.doOverlay,t.commit("currentActionInfo","Requesting blended image"),t.dispatch("_requestImage",Object(pr["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ss.instance.requestBlendedImageAsync(a,i);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})));case 3:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}(),requestStitchedImage:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t,r){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a=r.weight,t.commit("currentActionInfo","Requesting stitched image"),t.dispatch("_requestImage",Object(pr["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ss.instance.requestStitchedImageAsync(a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})));case 3:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}(),requestStitchedImageWithKeyPoints:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t,r){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a=r.weight,t.commit("currentActionInfo","Requesting stitched image"),t.dispatch("_requestImage",Object(pr["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ss.instance.requestStitchedImageWithKeyPointsAsync(a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})));case 3:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}(),requestBlendedImagePolygon:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t,r){var a,i,n,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a=r.weight,i=r.doOverlay,n=r.polygon,s=r.isFixedImage,t.commit("currentActionInfo","Requesting blended image"),t.dispatch("_requestImage",Object(pr["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ss.instance.requestBlendedImagePolygonAsync(a,i,n,s);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})));case 3:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}(),requestBlendedImageFloodFill:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t,r){var a,i,n,s,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a=r.weight,i=r.doOverlay,n=r.pts,s=r.floodFillTolerances,o=r.isFixedImage,t.commit("currentActionInfo","Requesting blended image"),t.dispatch("_requestImage",Object(pr["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ss.instance.requestBlendedImageFloodFillAsync(a,i,n,s,o);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})));case 3:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}(),requestSideBySideImageGood:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t.commit("currentActionInfo","Requesting side by side image"),t.dispatch("_requestImage",Object(pr["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ss.instance.requestSideBySideImageGoodAsync();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})));case 2:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),requestSideBySideImageGoodInliers:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t.commit("currentActionInfo","Requesting side by side image"),t.dispatch("_requestImage",Object(pr["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ss.instance.requestSideBySideImageGoodInliersAsync();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})));case 2:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),requestKeyPointsGoodFixedImage:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t.commit("currentActionInfo","Requesting image with key points"),t.dispatch("_requestImage",Object(pr["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ss.instance.requestKeyPointsGoodFixedImageAsync();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})));case 2:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),requestKeyPointsGoodMovingImage:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t.commit("currentActionInfo","Requesting image with key points"),t.dispatch("_requestImage",Object(pr["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ss.instance.requestKeyPointsGoodMovingImageAsync();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})));case 2:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),requestKeyPointsInlierFixedImage:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t.commit("currentActionInfo","Requesting image with key points"),t.dispatch("_requestImage",Object(pr["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ss.instance.requestKeyPointsInlierFixedImageAsync();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})));case 2:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),requestKeyPointsInlierMovingImage:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t.commit("currentActionInfo","Requesting image with key points"),t.dispatch("_requestImage",Object(pr["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ss.instance.requestKeyPointsInlierMovingImageAsync();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})));case 2:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),computeCompareImage:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t,r){var a,i,n,s,o,u,c,l,m,d,p,g,h;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=r.fixedImage,i=r.movingImage,n=r.fixedImagePolygonPts,s=r.movingImagePolygonPts,o=r.settings,!t.getters["busy"]){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,t.commit("_busyCompute",!0),t.commit("error",null),t.commit("currentActionInfo","Feature detection"),u=o.getParamValuesById(pe.compareDetTypes.id),c=o.getParamValueById(pe.compareImageType.id),l=o.getIdValueArrExcludingDefaults(),m=new Date,e.next=13,Ss.instance.compare_requestImageAsync(a,i,l,c,u,n,s);case 13:d=e.sent,p=d.imageData,g=d.timeUsedArr,h=d.keyPointsCountArr,t.commit("results/imageData",{name:Yr,imageData:p}),t.commit("results/compareTimeUsedPerDet",g),t.commit("results/compareKeyPointsCountPerDet",h),t.commit("results/time",{name:Yr,time:new Date-m}),t.commit("results/success",{name:Yr,success:1}),t.commit("results/settings",{name:Yr,settings:o}),e.next=31;break;case 25:e.prev=25,e.t0=e["catch"](3),console.log("[store][worker][generic][Error]",e.t0),t.commit("error",e.t0),t.commit("results/imageData",{name:Yr,imageData:null}),t.commit("results/success",{name:Yr,success:0});case 31:return e.prev=31,t.commit("currentActionInfo",""),t.commit("_busyCompute",!1),e.finish(31);case 35:case"end":return e.stop()}},e,this,[[3,25,31,35]])}));function t(t,r){return e.apply(this,arguments)}return t}(),displayStitchedImage:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t){var r,a,i,n,s,o,u,c,l,m,d,p,g,h,f,y;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!t.getters["busy"]){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,t.commit("_busyImage",!0),t.commit("currentActionInfo","Stitching image"),r=t.rootGetters["settings/param"](pe.stitch_projection.id),a=t.rootGetters["settings/param"](pe.stitch_projection2.id),i=t.rootGetters["settings/param"](pe.stitch_seamBlend.id),n=t.rootGetters["settings/param"](pe.stitch_colorTransfer.id),s=t.rootGetters["settings/param"](pe.stitch_fieldOfView1.id),o=t.rootGetters["settings/param"](pe.stitch_fieldOfView2.id),u=t.rootGetters["settings/param"](pe.stitch_yaw1.id),c=t.rootGetters["settings/param"](pe.stitch_pitch1.id),l=t.rootGetters["settings/param"](pe.stitch_yaw2.id),m=t.rootGetters["settings/param"](pe.stitch_pitch2.id),d=t.rootGetters["settings/param"](pe.stitch_yaw2Auto.id),p=t.rootGetters["settings/param"](pe.stitch_pitch2Auto.id),e.next=19,Ss.instance.stitchAsync(r,a,i,n,s,o,d,p,u,c,l,m);case 19:g=e.sent,h=g.fieldOfView,f=g.imageData,y=a!=pe.stitch_projectionTypeNone,t.commit("results/stitcherFieldOfView",Math.round(h)),t.commit("results/stitcherProjected",y),t.commit("results/imageData",{name:Hr,imageData:f}),e.next=33;break;case 28:e.prev=28,e.t0=e["catch"](2),console.log("[store][worker][displayStitchedImage][Error]",e.t0),t.commit("results/imageData",{name:Hr,imageData:null}),t.commit("error",e.t0);case 33:return e.prev=33,t.commit("currentActionInfo",""),t.commit("_busyImage",!1),e.finish(33);case 37:case"end":return e.stop()}},e,this,[[2,28,33,37]])}));function t(t){return e.apply(this,arguments)}return t}(),computeStitchedImage:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t,r){var a,i,n,s,o,u,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=r.fixedImage,i=r.movingImage,n=r.fixedImagePolygonPts,s=r.movingImagePolygonPts,o=r.settings,!t.getters["busy"]){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,t.commit("_busyCompute",!0),t.commit("error",null),t.commit("currentActionInfo","Feature detection"),u=new Date,e.next=10,Ss.instance.matchAsync(a,i,o.getIdValueArrExcludingDefaults(),n,s);case 10:c=e.sent,t.commit("results/time",{name:Hr,time:new Date-u}),t.commit("results/success",{name:Hr,success:c}),e.next=21;break;case 15:e.prev=15,e.t0=e["catch"](3),console.log("[store][worker][computeStitchedImage][Error]",e.t0),t.commit("error",e.t0),t.commit("results/imageData",{name:Hr,imageData:null}),t.commit("results/success",{name:Hr,success:0});case 21:return e.prev=21,t.commit("currentActionInfo",""),t.commit("_busyCompute",!1),e.finish(21);case 25:case"end":return e.stop()}},e,this,[[3,15,21,25]])}));function t(t,r){return e.apply(this,arguments)}return t}(),setInputImageResized:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t,r){var a,i,n,s,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=r.imageName,i=r.imageDataSrc,n=r.width,s=r.height,!t.getters["busy"]){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,t.commit("_busyImage",!0),t.commit("currentActionInfo","Resizing image"),e.next=8,Ss.instance.requestResizedImageAsync(i,n,s);case 8:o=e.sent,t.dispatch("input/imageData",{name:a,imageData:o},{root:!0}),e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](3),console.log("[store][worker][setInputImageResized][Error]",e.t0),t.commit("error",e.t0);case 16:return e.prev=16,t.commit("currentActionInfo",""),t.commit("_busyImage",!1),e.finish(16);case 20:case"end":return e.stop()}},e,this,[[3,12,16,20]])}));function t(t,r){return e.apply(this,arguments)}return t}(),setMultiInputImageResized:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t,r){var a,i,n,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=r.imageDataSrc,i=r.width,n=r.height,!t.getters["busy"]){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,t.commit("_busyImage",!0),t.commit("currentActionInfo","Resizing image"),e.next=8,Ss.instance.requestResizedImageAsync(a,i,n);case 8:return s=e.sent,t.commit("_busyImage",!1),e.next=12,t.dispatch("multiInput/imageData",s,{root:!0});case 12:e.next=18;break;case 14:e.prev=14,e.t0=e["catch"](3),console.log("[store][worker][setMultiInputImageResized][Error]",e.t0),t.commit("error",e.t0);case 18:return e.prev=18,t.commit("currentActionInfo",""),t.commit("_busyImage",!1),e.finish(18);case 22:case"end":return e.stop()}},e,this,[[3,14,18,22]])}));function t(t,r){return e.apply(this,arguments)}return t}(),setMultiInputImageUrlResized:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t,r){var a,i,n,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=r.imageDataSrc,i=r.width,n=r.height,!t.getters["busy"]){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,t.commit("_busyImage",!0),t.commit("currentActionInfo","Resizing image (base64)"),e.next=8,Ss.instance.requestResizedImageAsync(a,i,n);case 8:return s=e.sent,t.commit("_busyImage",!1),e.next=12,t.dispatch("multiInput/imageDataUrl",s,{root:!0});case 12:e.next=18;break;case 14:e.prev=14,e.t0=e["catch"](3),console.log("[store][worker][setMultiInputImageUrlResized][Error]",e.t0),t.commit("error",e.t0);case 18:return e.prev=18,t.commit("currentActionInfo",""),t.commit("_busyImage",!1),e.finish(18);case 22:case"end":return e.stop()}},e,this,[[3,14,18,22]])}));function t(t,r){return e.apply(this,arguments)}return t}(),saveResultImage:function(){var e=Object(pr["a"])(regeneratorRuntime.mark(function e(t,r){var a,i,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=r.name,i=r.imageFileName,!t.getters["busyImage"]){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,t.commit("_busyImage",!0),e.next=7,pn.imageBlobFromImageData(t.getters["results/imageData"](a));case 7:n=e.sent,Object(zn["saveAs"])(n,i);case 9:return e.prev=9,setTimeout(function(){t.commit("_busyImage",!1)},500),e.finish(9);case 12:case"end":return e.stop()}},e,this,[[3,,9,12]])}));function t(t,r){return e.apply(this,arguments)}return t}()},Ws={results:Bs},Ks={namespaced:!0,state:Ls,getters:qs,mutations:Us,actions:zs,modules:Ws},Gs=function(){function e(){Object(L["a"])(this,e)}return Object(q["a"])(e,null,[{key:"saveIdValue",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null==r||t!=r)localStorage.setItem(e.toString(),t.toString());else{var a=e.toString();localStorage.getItem(a)&&localStorage.removeItem(a)}}},{key:"saveIdValueArr",value:function(e){var t=this;e.forEach(function(e){t.saveIdValue(e.id,e.value,e.defaultValue||(0===e.defaultValue?0:null))})}},{key:"_getValueById",value:function(e){var t=localStorage.getItem(e.toString());if(""===t)return t;if(null===t)return null;var r=Number(t);return isNaN(Number(r))?t:r}},{key:"getIdValueArr",value:function(e){var t=this,r=[];return e.forEach(function(e){var a=t._getValueById(e);(a||0===a)&&r.push({id:e,value:a})}),r}}]),e}(),Ys={settings:new As,defaultSettings:null,activeTabIndexDetector:null,activeTabIndexStitcher:null,stitcherSettingsOn:!1,activeTabIndexMultiStitcher:!1,multiStitcherSettingsOn:!1},Hs={param:function(e){return function(t){return e.settings.getParamValueById(t)}},paramDefault:function(e){return function(t){return e.settings.getParamDefaultValueById(t)}},settings:function(e){return e.settings},equalsDefault:function(e){return e.settings.equals(e.defaultSettings)},idValueArrExcludingDefaults:function(e){return e.settings.getIdValueArrExcludingDefaults()},activeTabIndexDetector:function(e){return e.activeTabIndexDetector},getCurrentDetTypeGroupKey:function(e){return e.settings.getCurrentDetTypeGroupKey()},activeTabIndexStitcher:function(e){return e.activeTabIndexStitcher},stitcherSettingsOn:function(e){return e.stitcherSettingsOn},multiStitcherSettingsOn:function(e){return e.multiStitcherSettingsOn},activeTabIndexMultiStitcher:function(e){return e.activeTabIndexMultiStitcher}},Xs={param:function(e,t){var r=t.id,a=t.value;e.settings.setParamValueById(r,a)},params:function(e,t){e.settings.setByIdValueArr(t)},default:function(e){e.settings=new As},defaultSettings:function(e,t){e.defaultSettings=J()(t)},activeTabIndexDetector:function(e,t){e.activeTabIndexDetector=t},activeTabIndexStitcher:function(e,t){e.activeTabIndexStitcher=t},stitcherSettingsOn:function(e,t){e.stitcherSettingsOn=t},multiStitcherSettingsOn:function(e,t){e.multiStitcherSettingsOn=t},activeTabIndexMultiStitcher:function(e,t){e.activeTabIndexMultiStitcher=t}},Js={init:function(e){var t=e.getters["settings"];e.commit("defaultSettings",t.getIdValueArr());var r=Gs.getIdValueArr(t.getIdArr());r=t.removeInvalidParams(r),e.commit("params",r)},param:function(e,t){var r=e.commit,a=e.getters,i=t.id,n=t.value,s=a["settings"];r("param",{id:i,value:n}),Gs.saveIdValue(i,n,s.getParamDefaultValueById(i));var o=s.getRelatingIdValue(i,n);o&&(r("param",{id:o.id,value:o.value}),Gs.saveIdValue(o.id,o.value,s.getParamDefaultValueById(o.id)))},default:function(e){var t=e.commit,r=e.getters;t("default");var a=r["settings"].getIdValueDefaultArr();Gs.saveIdValueArr(a)},activeTabIndexDetector:function(e,t){var r=e.commit;r("activeTabIndexDetector",t)},activeTabIndexStitcher:function(e,t){var r=e.commit;r("activeTabIndexStitcher",t)},stitcherSettingsOn:function(e,t){var r=e.commit;r("stitcherSettingsOn",t)},multiStitcherSettingsOn:function(e,t){var r=e.commit;r("multiStitcherSettingsOn",t)},activeTabIndexMultiStitcher:function(e,t){var r=e.commit;r("activeTabIndexMultiStitcher",t)}},Zs={namespaced:!0,state:Ys,getters:Hs,mutations:Xs,actions:Js},Qs=null,eo={maxMessagesCount:50,messages:[],totalCount:0,infoMessafe:"",maxErrorMessagesCount:15,errorMessages:[],currentErrorMessage:""},to={messages:function(e){return e.messages},totalCount:function(e){return e.totalCount},errorMessages:function(e){return e.errorMessages},currentErrorMessage:function(e){return e.currentErrorMessage}},ro={addMessage:function(e,t){e.maxMessagesCount==e.messages.length&&e.messages.shift(),e.messages.push((new Date).toLocaleTimeString()+": "+t),e.totalCount++},setInfoMessage:function(e,t){e.infoMessafe=t},addErrorMessage:function(e,t){e.maxErrorMessagesCount==e.errorMessages.length&&e.errorMessages.shift(),e.errorMessages.push((new Date).toLocaleTimeString()+": "+t),Qs&&(clearTimeout(Qs),Qs=null),e.currentErrorMessage=t,Qs=setTimeout(function(){e.currentErrorMessage=""},3e3)}},ao={},io={namespaced:!0,state:eo,getters:to,mutations:ro,actions:ao};a["a"].use(ln["a"]);var no=new ln["a"].Store({state:{},getters:{},mutations:{},actions:{},modules:{worker:Ks,settings:Zs,input:Rn,multiInput:Un,logs:io}}),so=r("9483");Object(so["a"])("".concat("/","workbox-sw.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var oo=r("ecee"),uo=r("f2d1"),co=r("ad3d");oo["c"].add(uo["b"]),oo["c"].add(uo["a"]),a["a"].component("font-awesome-icon",co["a"]),a["a"].config.productionTip=!1,a["a"].config.devtools=!1,a["a"].prototype.$cvready={},a["a"].prototype.$cvready.cbs=[],a["a"].prototype.$cvready.addCb=function(e){a["a"].prototype.$cvready.cbs.push(e)},new a["a"]({router:cn,store:no,render:function(e){return e(ke)}}).$mount("#app")},"5c22":function(e,t,r){e.exports=r.p+"img/mountains1.24b57b69.jpg"},"5ef7":function(e,t,r){},"5fba":function(e,t,r){e.exports=r.p+"img/mountains2.47f92173.jpg"},"62e0":function(e,t,r){"use strict";var a=r("7468"),i=r.n(a);i.a},6303:function(e,t,r){"use strict";var a=r("af3c"),i=r.n(a);i.a},"6a4c":function(e,t,r){},7468:function(e,t,r){},"7a39":function(e,t,r){"use strict";var a=r("ccc0"),i=r.n(a);i.a},"7c24":function(e,t,r){"use strict";var a=r("5403"),i=r.n(a);i.a},8785:function(e,t,r){},"91c2":function(e,t,r){},"9b54":function(e,t,r){},"9c9a":function(e,t,r){"use strict";var a=r("db44"),i=r.n(a);i.a},ac87:function(e,t,r){"use strict";var a=r("355c"),i=r.n(a);i.a},af3c:function(e,t,r){},b9b3:function(e,t,r){},beb2:function(e,t,r){},c81e:function(e,t,r){"use strict";var a=r("8785"),i=r.n(a);i.a},c992:function(e,t,r){},ccc0:function(e,t,r){},d01a:function(e,t,r){"use strict";var a=r("9b54"),i=r.n(a);i.a},d39f:function(e,t,r){"use strict";var a=r("b9b3"),i=r.n(a);i.a},db44:function(e,t,r){},dce7:function(e,t,r){e.exports=r.p+"img/ms3.21ccf3d3.jpg"},e591:function(e,t,r){"use strict";var a=r("1e18"),i=r.n(a);i.a},ec32:function(e,t,r){e.exports=r.p+"img/zauberSchuleAlign.c708ef5f.jpg"},ee03:function(e,t,r){},f1ae:function(e,t,r){"use strict";var a=r("11a7"),i=r.n(a);i.a},f627:function(e,t,r){e.exports=r.p+"img/ms2.e94e24ee.jpg"},fcd5:function(e,t,r){"use strict";var a=r("91c2"),i=r.n(a);i.a}});
//# sourceMappingURL=app.6c9af63b.js.map